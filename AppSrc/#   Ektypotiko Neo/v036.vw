//AB/ Project V036:BARTICL
//AB/ Object prj is a View_Project
//AB/     Set ProjectName to "V036:BARTICL"
//AB/     Set ProjectFileName to "V036.VW"

// Project Object Structure
//   V036 is a dbViewSubs
//     Ctypkin_DD2 is a Ctypkin_DataDictionary
//     Company_DD is a DataDictionary
//     Branch_DD is a DataDictionary
//     Year_DD is a DataDictionary
//     Bartlno_DD is a DataDictionary
//     Btypkin_DD is a DataDictionary
//     Baxiokat_DD is a DataDictionary
//     Barticl_DD is a DataDictionary
//     Bsum_DD is a DataDictionary
//     Baxio_DD is a DataDictionary
//     Syscurxr_DD is a DataDictionary
//     Clients_DD is a DataDictionary
//     Cn_DD is a DataDictionary
//     Bmove_DD is a DataDictionary
//     dbGrpYear is a dbGroupSub
//       otxtCompany is a TextBoxSub
//       cboCompany is a ComboFormSub
//       otxtBranch is a TextBoxSub
//       cboBranch is a ComboFormSub
//       otxtYear is a TextBoxSub
//       cboYear is a ComboFormSub
//       btnChangeXr is a ButtonSub
//     Btypkin_Btypkin_Code is a dbFormSub
//     Btypkin_Btypkin_Descr is a dbFormSub
//     Barticl_Barticl_Hmnia is a dbFormSub
//     Barticl_Barticl_No is a dbFormSub
//     Barticl_Barticl_Code1 is a dbFormSub
//     Barticl_Barticl_Epon1 is a dbFormSub
//     Barticl_Barticl_Code2 is a dbFormSub
//     Barticl_Barticl_Epon2 is a dbFormSub
//     Barticl_Pae_Arithm is a dbFormSub
//     cSydbDateForm1 is a cSydbDateForm
//     Barticl_Barticl_Aitiol is a dbFormSub
//     Barticle_Cn_Code is a dbFormSub
//     Barticl_Sxolia1 is a dbFormSub
//     Barticl_Sxolia2 is a dbFormSub
//     Barticl_Barticl_Rec0 is a dbFormSub
//     dbTbDlgMove is a dbTabDialogSubS
//       TP_Bmove is a dbTabPageSubS
//         dbGrdBmove is a dbGridSub
//       TP_Synola is a dbTabPageSubS
//         Bsum_ is a dbGridSub
//       TP_Modules is a dbTabPageSubS
//         Barticl_Garticl_Rec0 is a dbFormSub
//         Barticl_Gmove_Mrec0 is a dbFormSub
//         Barticl_Gplan_Mrec0 is a dbFormSub
//         Barticl_Carticl_Rec0 is a dbFormSub
//         Barticl_Varticl_Rec0 is a dbFormSub
//         TextBoxSub12 is a TextBoxSub
//         TextBoxSub13 is a TextBoxSub
//         TextBoxSub14 is a TextBoxSub
//         TextBoxSub18 is a TextBoxSub
//         TextBoxSub19 is a TextBoxSub
//         TextBoxSub20 is a TextBoxSub
//     frmIsClosed is a FormSub
//     TextBoxSub1 is a TextBoxSub
//     TextBoxSub2 is a TextBoxSub
//     TextBoxSub3 is a TextBoxSub
//     TextBoxSub4 is a TextBoxSub
//     TextBoxSub5 is a TextBoxSub
//     TextBoxSub6 is a TextBoxSub
//     TextBoxSub7 is a TextBoxSub
//     TextBoxSub8 is a TextBoxSub
//     TextBoxSub9 is a TextBoxSub
//     TextBoxSub10 is a TextBoxSub
//     TextBoxSub11 is a TextBoxSub
//     FormSub1 is a FormSub
//     Cn_Cn_Descr is a dbFormSub
//     Textbox1 is a TextBoxSub
//     TextBoxSub16 is a TextBoxSub
//     oDetail_bn is a ButtonSub
//     oPrint_Bn is a ButtonSub
//     btnKleisimo is a ButtonSub
//     Barticl_Barticl_Sv2 is a dbFormSub
//     Barticl_Barticl_Lines is a dbFormSub
//     ButtonSub1 is a ButtonSub
//     RadioGroupSub1 is a RadioGroupSub
//       Radio3 is a RadioSub
//       Radio2 is a RadioSub
//     TextBoxSub17 is a TextBoxSub
//     btnAutoCopen is a ButtonSub
//     cSyDateForm1 is a cSyDateForm
//     frmHmniaLabel is a TextBoxSub
//     Textbox1 is a Textbox
//     btnMessages is a FormSub
//     btnMessages2 is a FormSub
//     TextBoxSub21 is a TextBoxSub
//     Barticl_Arith_Orist is a dbFormSub
//     TextBoxSub22 is a TextBoxSub
//     oOK_bn is a ButtonSub
//     Barticl_Recr is a dbFormSub
//     txtBartlRecr is a TextBoxSub
//     Bmove_Bmove_Recr is a dbFormSub
//     Baxio_Baxio_Recr is a dbFormSub
//     txtBmoveRecr is a TextBoxSub
//     txtBaxioRecr is a TextBoxSub

// Register all objects
Register_Object Barticl_Arith_Orist
Register_Object Barticl_Barticl_Aitiol
Register_Object Barticl_Barticl_Code1
Register_Object Barticl_Barticl_Code2
Register_Object Barticl_Barticl_Epon1
Register_Object Barticl_Barticl_Epon2
Register_Object Barticl_Barticl_Hmnia
Register_Object Barticl_Barticl_Lines
Register_Object Barticl_Barticl_No
Register_Object Barticl_Barticl_Rec0
Register_Object Barticl_Barticl_Sv2
Register_Object Barticl_Carticl_Rec0
Register_Object Barticl_DD
Register_Object Barticl_Garticl_Rec0
Register_Object Barticl_Gmove_Mrec0
Register_Object Barticl_Gplan_Mrec0
Register_Object Barticl_Pae_Arithm
Register_Object Barticl_Recr
Register_Object Barticl_Sxolia1
Register_Object Barticl_Sxolia2
Register_Object Barticl_Varticl_Rec0
Register_Object Barticle_Cn_Code
Register_Object Bartlno_DD
Register_Object Baxio_Baxio_Recr
Register_Object Baxio_DD
Register_Object Baxiokat_DD
Register_Object Bmove_Bmove_Recr
Register_Object Bmove_DD
Register_Object Branch_DD
Register_Object Bsum_
Register_Object Bsum_DD
Register_Object Btypkin_Btypkin_Code
Register_Object Btypkin_Btypkin_Descr
Register_Object Btypkin_DD
Register_Object ButtonSub1
Register_Object btnAutoCopen
Register_Object btnChangeXr
Register_Object btnKleisimo
Register_Object btnMessages
Register_Object btnMessages2
Register_Object Clients_DD
Register_Object Cn_Cn_Descr
Register_Object Cn_DD
Register_Object Company_DD
Register_Object Ctypkin_DD2
Register_Object cboBranch
Register_Object cboCompany
Register_Object cboYear
Register_Object cSyDateForm1
Register_Object cSydbDateForm1
Register_Object dbGrdBmove
Register_Object dbGrpYear
Register_Object dbTbDlgMove
Register_Object FormSub1
Register_Object frmHmniaLabel
Register_Object frmIsClosed
Register_Object oDetail_bn
Register_Object oOK_bn
Register_Object oPrint_Bn
Register_Object otxtBranch
Register_Object otxtCompany
Register_Object otxtYear
Register_Object Radio2
Register_Object Radio3
Register_Object RadioGroupSub1
Register_Object Syscurxr_DD
Register_Object TextBoxSub1
Register_Object TextBoxSub10
Register_Object TextBoxSub11
Register_Object TextBoxSub12
Register_Object TextBoxSub13
Register_Object TextBoxSub14
Register_Object TextBoxSub16
Register_Object TextBoxSub17
Register_Object TextBoxSub18
Register_Object TextBoxSub19
Register_Object TextBoxSub2
Register_Object TextBoxSub20
Register_Object TextBoxSub21
Register_Object TextBoxSub22
Register_Object TextBoxSub3
Register_Object TextBoxSub4
Register_Object TextBoxSub5
Register_Object TextBoxSub6
Register_Object TextBoxSub7
Register_Object TextBoxSub8
Register_Object TextBoxSub9
Register_Object Textbox1
Register_Object TP_Bmove
Register_Object TP_Modules
Register_Object TP_Synola
Register_Object txtBartlRecr
Register_Object txtBaxioRecr
Register_Object txtBmoveRecr
Register_Object V036
Register_Object Year_DD


//AB/ AppBuild VIEW


//AB-StoreTopStart
Register_Object sl033
Register_Object R044
Register_Object sl100
Register_Object Rmhtraxio1
open sysfile
Use sl041.sl
Use bpEnCmv3.dg // Business Process Finilizing Barticle
Use slNomism.sl
Use Globals.Inc
Use baxio.dd
use sl037.sl
Use sl033.sl
Use r044.rv
Use v037.vw
Use sl100.sl
Use sl036.sl

Use Barticl2.cls
use rmhtraxio1.rv

Use bp2ndCop.dg
Use bpACopen.dg

//    Use DoEnhaxio.dg
//    Use DoEnhgl.dg
//    Use DoEnhmgl.dg
//    Use DoAkyr.dg

//AB-StoreTopEnd

//AB-IgnoreStart

Use dbViews.Sub
Use DFAllEnt.pkg
Use dbGroup.Sub
Use Txtbox.Sub
Use Cmbfrm.Sub
Use Button.Sub
Use dbForm.Sub
Use cSydbDateForm.Pkg
Use dbTabdlgS.Sub
Use dbTabPageSubS.Sub
Use dbGrid.Sub
Use Form.Sub
Use Rgroup.Sub
Use Radio.Sub
Use cSyDateForm.Pkg

Use COMPANY.DD
Use BRANCH.DD
Use YEAR.DD
Use BARTLNO.DD
Use BTYPKIN.DD
Use BAXIOKAT.DD
Use BARTICL.DD
Use BSUM.DD
Use BAXIO.DD
Use SYSCURXR.DD
Use CLIENTS.DD
Use CN.DD
Use BMOVE.DD

//AB-IgnoreEnd

ACTIVATE_VIEW Activate_V036 FOR V036

Object V036 is a dbViewSubs

    //AB-StoreTopStart
    Property Integer    piChangedBarticl    Public False
    Property String     psModule            Public ''
    Property String     psClientRecr        Public ''
    Property String     psFromCmoves        Public ''
    Property String     psCTypkinModule     Public ''
    Property integer    piepil              public 0
    Property Date       pdHmniaEos          public ''
    Property Integer    piFromBP            Public False
    property string     psfromexofl         public ''
    property string     psolarecr           public ''

    Set Verify_Data_Loss_Msg TO Get_No_Confirmation
    Set Verify_Delete_Msg    TO Get_No_Confirmation
    Set Verify_Save_Msg      TO Get_No_Confirmation
    Set Verify_Exit_Msg      TO Get_No_confirmation

    Register_Function GetEponymia Integer aiCode1Or2 String asCode Returns String

    Procedure Find_Eponymia Integer aiOneOrTwo
        String sCode
        Integer iCode
        If (aiOneOrTwo=1) Begin
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Code1 to sCode
            Move (Trim(sCode)) to sCode
            Set Field_Changed_Value Of Barticl_DD Field Barticl.Barticl_Epon1 to (GetEponymia(Self,1,sCode))
        End
        Else If (aiOneOrTwo=2) Begin
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Code2 to sCode
            Move (Trim(sCode)) to sCode
            Set Field_Changed_Value Of Barticl_DD Field Barticl.Barticl_Epon2 to (GetEponymia(Self,2,sCode))
        End
    End_Procedure

    Object Ctypkin_DD2 is a Ctypkin_DataDictionary
    End_Object    // Ctypkin_DD2

    Function fsbaxioid string sno Returns string
                    If (sno='0') Function_Return 'àõÂ¶¨'
             Else   If (sno='1') Function_Return 'í®Â´¶¨'
             Else                Function_Return ''
    End_Function

    //AB-StoreTopEnd

    Set Label to "Ñ†©ß®·•ú†™-è¢û®‡£‚™"
    Set Size to 319 530
    Set Location to 6 17

    //AB-DDOStart

    Object Company_DD is a Company_DataDictionary
    End_Object    // Company_DD

    Object Branch_DD is a Branch_DataDictionary
        Set DDO_Server to (Company_DD(self))
    End_Object    // Branch_DD

    Object Year_DD is a Year_DataDictionary
        Set DDO_Server to (Branch_DD(self))
    End_Object    // Year_DD

    Object Bartlno_DD is a Bartlno_DataDictionary
    End_Object    // Bartlno_DD

    Object Btypkin_DD is a Btypkin_DataDictionary

        //AB-StoreStart

        Set Foreign_Field_Options DD_KEYFIELD           to DD_Clear_Field_Options DD_FindReq
        Set Foreign_Field_Options DD_INDEXFIELD         to DD_Clear_Field_Options DD_FindReq

        Set Field_Options Field Btypkin.Btypkin_Code    to DD_Clear_Field_Options DD_Required





        //AB-StoreEnd

    End_Object    // Btypkin_DD

    Object Baxiokat_DD is a Baxiokat_DataDictionary

        //AB-StoreStart
        Set Field_Prompt_Object Field Baxiokat.Baxiokat_Code to (sl033(Self))

        Set Field_Options Field Baxiokat.Baxiokat_Code    to DD_Clear_Field_Options DD_Required



        //AB-StoreEnd

    End_Object    // Baxiokat_DD

    Object Barticl_DD is a Barticl_DataDictionary

        //AB-StoreTopStart
        Property Integer piNoChangesAllowed Public 0
        Property Integer piCreating Public 0



        //AB-StoreTopEnd

        Set DDO_Server to (Btypkin_DD(self))

        //AB-StoreStart

        Set Allow_Foreign_New_Save_State to True

        Procedure Constrain
            Forward Send Constrain
            Constrain Barticl.Company_Code Eq SyscurXr.Company_Code  // gs_Selected_Company_Code
            Constrain Barticl.Branch_Code  Eq SyscurXr.Branch_Code   // gs_Selected_Branch_Code
            Constrain Barticl.Year_Year    Eq SyscurXr.Year_Year     // gi_Selected_Year
        End_Procedure   //constrain

        Procedure Update
            If (Barticl.Ekkremes=1) Forward Send Update
        End_Procedure

        Procedure Backout
            If (Barticl.Ekkremes=1) Forward Send Backout
        End_Procedure

        Procedure Save_Main_File
            Integer isAllowed
            clear branch
            move syscurxr.company_code to branch.company_code
            move syscurxr.branch_code  to branch.branch_code
            find eq branch by index.1
            If (NOT((Barticl.Barticl_Hmnia>branch.date_locked) And (Barticl.Ekkremes=1))) begin
                Error 9601 "Ü Ü£ú®¶£û§Âò úÂ§ò† é®†©´†°¶ß¶†û£‚§û. Ü úöö®ò≠„ ÉÑå °ò´òÆ‡®„üû°ú"
                Clear Barticl
                Send Activate to Btypkin_Btypkin_Code
                Set piCreating to 0
                Procedure_Return
            End

            Date dHmnia dHm
            Move Barticl.Barticl_Hmnia  to dHm
            Move "31/12/2099"           to dHmnia

            Clear tmpSap
            Move dHmnia to tmpSap.Date
            Find LE tmpSap By Index.1
            If ((Found) And (tmpSap.Date >= Barticl.Barticl_Hmnia)) Begin
                Error 7223 "ÑÆ¶¨§ ©´ò¢úÂ ö‚≠¨®ú™ SAP.\nõú§ úß†´®‚ßú´ò† õû£†¶¨®öÂò „ ´®¶ß¶ß¶Âû©û"
                Procedure_Return
            End
            Forward Send Save_Main_File

        End_Procedure


        Procedure Request_Save
            String sCode sCtypkinRecr sClientID Scn
            Integer iNotOK iAnti iRecnum isEkkremes iBtCode iBtCode2
            date dlocked  ddate

            Get Field_Current_Value Field Barticl.Ekkremes to isEkkremes
            Get Field_Current_Value Field Barticl.Recnum to iRecnum

            If ( (iRecnum>0) And (piNoChangesAllowed(Self)<>1) And (isEkkremes<>0) ) Begin

                Get Field_Current_Value Of Btypkin_DD   Field Btypkin.Btypkin_Code to iBtCode
                Get Field_Current_Value Of Barticl_DD   Field Barticl.Btypkin_Code to iBtCode2

                If (iBtCode2<>iBtCode) Begin
                    Set Value Of Btypkin_Btypkin_Code Item 0 to iBtCode
                    Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
                    Send Activate to Btypkin_Btypkin_Code
                    Error 5432 "Éú§ úß†´®‚ßú´ò† ò¢¢òö„ ´û™ âÂ§û©û™"
                    Procedure_Return
                End
            End

            If ( (iRecnum=0) Or ((piNoChangesAllowed(Self)<>1) And (isEkkremes<>0)) ) Begin
                Get Field_Current_Value Of Btypkin_DD   Field Btypkin.Btypkin_anti1 to iAnti
                Get Field_Current_Value Of Btypkin_DD   Field Btypkin.Ctypkin_Recr  to sCtypkinRecr
                Get Field_Current_Value Of Barticl_DD   Field Barticl.Barticl_code1 to sClientID
                Get Field_Current_Value Of Barticl_DD   Field Barticl.Barticl_hmnia to ddate
                Clear Clients
                move sClientID to clients.client_id
                Find Eq Clients by index.6 //Clients:Index.2:Client_ID
                If (Not(Found)) Begin
                    If ((iAnti=2) Or (iAnti=3)) Begin
                        Error 7001 "Éú§ ô®‚üû°ú ¶ ë¨§ò¢¢/§¶™"
                        Send Activate to Btypkin_Btypkin_Code
                        Set piCreating to 0
                        Procedure_Return
                    End
                End

                Clear Ctypkin
                Move sCtypkinRecr to Ctypkin.Ctypkin_Recr
                Find Eq Ctypkin by Index.2 //Ctypkin:Index.2:Client_Recr
                If (Not(Found)) Begin
                    Error 7002 "Éú§ ô®‚üû°ú ¶ ´Áß¶™ °Â§û©û™"
                    //Send Stop_Box "Éú‡ ô®‚üû°ú ¶ ´Áß¶™ °Â§û©û™" "ë≠·¢£ò 7002"
                    Send Activate to Btypkin_Btypkin_Code
                    Set piCreating to 0
                    Procedure_Return
                End
                 //gts 05-12-07 den epitrepetai pleon na allazei oristikopoihmena parastatika h na pernaei nea
                // me hmnia mikroterh ths oristikopoihshs
                clear branch
                move syscurxr.company_code to branch.company_code
                move syscurxr.branch_code  to branch.branch_code
                find eq branch by index.1
                If (NOT((dDate>branch.date_locked) And (isEkkremes=1))) begin
                    Error 9602 "Ü Ü£ú®¶£û§Âò úÂ§ò† é®†©´†°¶ß¶†û£‚§û. Ü úöö®ò≠„ ÉÑå °ò´òÆ‡®„üû°ú"
                    Clear Barticl
                    Send Activate to Btypkin_Btypkin_Code
                    Set piCreating to 0
                    Procedure_Return
                End


                Date dHmnia dHm
                Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Hmnia to dHm
                Move "31/12/2099" to dHmnia

                Clear tmpSap
                Move dHmnia to tmpSap.Date
                Find LE tmpSap By Index.1
                If ((Found) And (tmpSap.Date >= dHm)) Begin
                    Clear Barticl
                    Send Activate to Btypkin_Btypkin_Code
                    Set piCreating to 0
                    Error 7224 "ÑÆ¶¨§ ©´ò¢úÂ ö‚≠¨®ú™ SAP.\nõú§ úß†´®‚ßú´ò† õû£†¶¨®öÂò „ ´®¶ß¶ß¶Âû©û"
                    If (iRecnum) Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
                    Procedure_Return
                End

                Forward Send Request_Save

            End
            Else Begin
                Send Stop_Box "é®†©´†°¶ß¶†û£‚§¶ „ °¢ú†õ‡£‚§¶ ·®ü®¶. ÉÑå ´®¶ß¶ß¶†úÂ´ò†" "è®¶©¶Æ„"
                If (iRecnum) Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
                //Send Beginning_Of_Data to (dbGrdBmove(TP_Bmove(dbTbDlgMove(Self)))) True
            End

            Set piCreating to 0

        End_Procedure

        Procedure Request_Delete
            Date dDate
            Integer iErr isClosed isPrinted isReadOnly iRecnum isEkkremes
            Get Field_Current_Value Of Self Field Barticl.Ekkremes to isEkkremes
            Get Field_Current_Value Of Self Field Barticl.Barticl_Hmnia to dDate
            Get Field_Current_Value Of Self Field Barticl.Recnum to iRecnum

            clear branch
            move syscurxr.company_code to branch.company_code
            move syscurxr.branch_code  to branch.branch_code
            find eq branch by index.1
            If (NOT((dDate>branch.date_locked) And (isEkkremes=1))) begin
                Error 9602 "Ü Ü£ú®¶£û§Âò úÂ§ò† é®†©´†°¶ß¶†û£‚§û. Ü úöö®ò≠„ ÉÑå õ†òö®·≠ú´ò†"
                Clear Barticl
                Send Activate to Btypkin_Btypkin_Code
                Set piCreating to 0
                Procedure_Return
            End

            Date dHmnia dHm
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Hmnia to dHm
            Move "31/12/2099" to dHmnia

            Clear tmpSap
            Move dHmnia to tmpSap.Date
            Find LE tmpSap By Index.1
            If ((Found) And (tmpSap.Date >= dHm)) Begin
                Clear Barticl
                Send Activate to Btypkin_Btypkin_Code
                Set piCreating to 0
                Error 7225 "ÑÆ¶¨§ ©´ò¢úÂ ö‚≠¨®ú™ SAP.\nõú§ úß†´®‚ßú´ò† û õ†òö®ò≠„"
                If (iRecnum) Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
                Procedure_Return
            End

            Move Barticl.Recnum to iRecnum
            If ((piNoChangesAllowed(Self)<>1) And (isEkkremes<>0)) Begin
                Forward Send Request_Delete to Barticl_DD
            End
            Else Begin
            Send Stop_Box "é®†©´†°¶ß¶†û£‚§¶ „ °¢ú†õ‡£‚§¶ ·®ü®¶. ÉÑå õ†òö®·≠ú´ò†" "è®¶©¶Æ„"
            If (iRecnum) Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
                Send Beginning_Of_Data to (dbGrdBmove(TP_Bmove(dbTbDlgMove(Self)))) True
            End
        End_Procedure


        Procedure Creating
            if (trim(barticl.cn_code)='');
                error 1031 'Ñ®ö¶ Äßò®òÂ´û´¶'
            else Begin
                Move 1 to Barticl.Ekkremes
                Forward Send Creating
                Set piCreating to True
            End
        End_Procedure //creating











        //AB-StoreEnd

    End_Object    // Barticl_DD

    Object Bsum_DD is a Bsum_DataDictionary
        Set DDO_Server to (Barticl_DD(self))
        Set Constrain_File to Barticl.File_Number

        //AB-StoreStart



        //AB-StoreEnd

    End_Object    // Bsum_DD

    Object Baxio_DD is a Baxio_DataDictionary
        Set DDO_Server to (Baxiokat_DD(self))

        //AB-StoreStart
        set pimustnotconstrain to 2
        Set allow_foreign_new_save_state to true


        //AB-StoreEnd

    End_Object    // Baxio_DD

    Object Syscurxr_DD is a Syscurxr_DataDictionary

        //AB-StoreStart




        //AB-StoreEnd

    End_Object    // Syscurxr_DD

    Object Clients_DD is a Clients_DataDictionary

        //AB-StoreStart

        Procedure OnConstrain
            String sModule
            Get psCTypkinModule to sModule
            Move (Trim(sModule)) to sModule
            If (sModule<>'') Begin
                     If (sModule='01') Constrain Clients.Is_Client          Eq '1'
                Else If (sModule='02') Constrain Clients.Is_Promhtheyths    Eq '1'
            End
        End_Procedure


        //AB-StoreEnd

    End_Object    // Clients_DD

    Object Cn_DD is a Cn_DataDictionary
        Set DDO_Server to (Clients_DD(self))

        //AB-StoreStart

        //AB-StoreEnd

    End_Object    // Cn_DD

    Object Bmove_DD is a Bmove_DataDictionary

        //AB-StoreTopStart
        Property Integer piNoChangesAllowed Public 0
        Property Integer piCreating Public 0

        //AB-StoreTopEnd

        Set DDO_Server to (Barticl_DD(self))
        Set DDO_Server to (Baxio_DD(self))
        Set Constrain_File to Barticl.File_Number

        //AB-StoreStart

        Set Ordering to 3

        Procedure Update
            Integer iRecnum
            Move Barticl.Recnum to iRecnum
            If (Barticl.Ekkremes=1) Begin
                Forward Send Update
            End
            Else Begin
                Send Stop_Box "é®†©´†°¶ß¶†û£‚§¶ „ °¢ú†õ‡£‚§¶ ·®ü®¶. ÉÑå õ†òö®·≠ú´ò†" "è®¶©¶Æ„"
                Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
            End
        End_Procedure

        Procedure Backout
            Integer iRecnum
            Move Barticl.Recnum to iRecnum
            If (Barticl.Ekkremes=1) Forward Send Backout
            Else Begin
                Send Stop_Box "é®†©´†°¶ß¶†û£‚§¶ „ °¢ú†õ‡£‚§¶ ·®ü®¶. ÉÑå õ†òö®·≠ú´ò†" "è®¶©¶Æ„"
                Send Find_By_Recnum to Barticl_DD Barticl.File_Number iRecnum
            End
        End_Procedure


        Procedure Save_Main_File
            Integer isAllowed
            clear branch
            move syscurxr.company_code to branch.company_code
            move syscurxr.branch_code  to branch.branch_code
            find eq branch by index.1
            If (NOT((Barticl.Barticl_Hmnia>branch.date_locked) And (Barticl.Ekkremes=1))) begin
                Error 9602 "Ü Ü£ú®¶£û§Âò úÂ§ò† é®†©´†°¶ß¶†û£‚§û. Ü úöö®ò≠„ ÉÑå °ò´òÆ‡®„üû°ú"
                Clear Bmove
                Send Activate to Btypkin_Btypkin_Code
                Set piCreating to 0
                Procedure_Return
            End
            //-------
            Date dHmnia dHm
            Move Barticl.Barticl_Hmnia  to dHm
            Move "31/12/2099"           to dHmnia

            Clear tmpSap
            Move dHmnia to tmpSap.Date
            Find LE tmpSap By Index.1
            If ((Found) And (tmpSap.Date >= Barticl.Barticl_Hmnia)) Begin
                Error 7226 "ÑÆ¶¨§ ©´ò¢úÂ ö‚≠¨®ú™ SAP.\nõú§ úß†´®‚ßú´ò† õû£†¶¨®öÂò „ ´®¶ß¶ß¶Âû©û"
                Procedure_Return
            End
            Forward Send Save_Main_File
        End_Procedure

        Procedure Request_Save
            Integer iRecnum isEkkremes ikin
            date dlocked dDate
            Get Field_Current_Value Of Barticl_DD Field Barticl.Ekkremes to isEkkremes
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Hmnia to dDate
            Get Field_Current_Value Of Self Field Bmove.Recnum to iRecnum
            If ( (piNoChangesAllowed(Self)<>1) And (isEkkremes<>0)) Begin
                Forward Send Request_Save
            End
            Else Begin
            End
        End_Procedure

        Procedure Request_Delete
            Integer iRecnum isEkkremes ikin
            Date    dDate
            Get Field_Current_Value Of Barticl_DD Field Barticl.Ekkremes to isEkkremes
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Hmnia to dDate
            clear branch
            move syscurxr.company_code to branch.company_code
            move syscurxr.branch_code  to branch.branch_code
            find eq branch by index.1
            If (NOT((dDate>branch.date_locked) And (isEkkremes=1))) begin
                Error 9603 "Ü Ü£ú®¶£û§Âò úÂ§ò† é®†©´†°¶ß¶†û£‚§û. Ü úöö®ò≠„ ÉÑå õ†òö®·≠ú´ò†"
                Clear Bmove
                Send Activate to Btypkin_Btypkin_Code
                Set piCreating to 0
                Procedure_Return
            End

            Date dHmnia
            Move "31/12/2099" to dHmnia
            Clear tmpSap
            Move dHmnia to tmpSap.Date
            Find LE tmpSap By Index.1
            If ((Found) And (tmpSap.Date >= dDate)) Begin
                Clear Bmove
                Send Activate to Btypkin_Btypkin_Code
                Set piCreating to 0
                Error 7227 "ÑÆ¶¨§ ©´ò¢úÂ ö‚≠¨®ú™ SAP.\nõú§ úß†´®‚ßú´ò† û É†òö®ò≠„"
                Procedure_Return
            End

            If ( (piNoChangesAllowed(Self)<>1) And (isEkkremes<>0)) Begin
                Forward Send Request_Delete
            End
            Else Begin
            End
        End_Procedure












        //AB-StoreEnd

    End_Object    // Bmove_DD

    Set Main_DD to (Barticl_DD(self))
    Set Server to (Barticl_DD(self))

    //AB-DDOEnd

    Object dbGrpYear is a dbGroupSub

        //AB-StoreTopStart
        Open Company
        Open Branch
        Open Year
        Open SysCurXr
        Open Nomisma

        Use Wax.DD
        Use Witemx.DD
        Use Witemxen.DD
        Use Witemxtr.DD
        Use Witemxt.DD
        Use Ptyppar.DD
        Use Itemd.DD
        Use Bmove.DD
        Use Baxio.DD

        Property String     psCurrentCompany    Public ''
        Property String     psCurrentBranch     Public ''
        Property Integer    piCurrentYear       Public  0

        Property String     psChoosenCompany    Public ''
        Property String     psChoosenBranch     Public ''
        Property Integer    piChoosenYear       Public  0

        Property Integer    pidbGrpYearID       Public  0
        Property Integer    picboCompanyID      Public  0
        Property Integer    picboBranchID       Public  0
        Property Integer    picboYearID         Public  0
        Property Integer    pibtnChangeXrID     Public  0

        //AB-StoreTopEnd

        Set Size to 26 517
        Set Location to 0 6
        Object otxtCompany is a TextBoxSub
            Set Label to "Ñ´ò†®úÂò"
            Set Auto_Size_State to FALSE
            Set TextColor to clNavy
            Set FontSize to 4 0
            Set Location to 11 5
            Set Size to 10 31
            Set FontWeight to 800
            Set Justification_Mode to jMode_Right
            Set TypeFace to "MS Sans Serif"
            Set Enabled_State to TRUE
        End_Object    // otxtCompany

        Object cboCompany is a ComboFormSub

            //AB-StoreTopStart

            //AB-StoreTopEnd

            Set Size to 13 141
            Set Location to 9 46
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart

            Procedure Exiting Integer WhereTo Returns Integer
                Integer rVal iID iYes
                Forward Get Msg_Exiting WhereTo to rVal
                If rVal Procedure_Return rVal
                If ((WhereTo<>picboCompanyID (Self)) And ;
                    (WhereTo<>picboBranchID  (Self)) And ;
                    (WhereTo<>picboYearID    (Self)) And ;
                    (WhereTo<>pibtnChangeXrID(Self))) Begin
                    If ((psChoosenCompany(Self)<>SyscurXr.Company_Code) Or ;
                        (psChoosenBranch (Self)<>SyscurXr.Branch_Code ) Or ;
                        (piChoosenYear   (Self)<>SyscurXr.year_Year   )) Begin
                        Get YesNo_Box 'è®¶©¶Æ„ ! Ä¢¢·•ò´ú ©´¶†ÆúÂò Ñ´ò†®Âò™/ìß¶°ò´./ï®„©û™\nò¢¢· ÉÑå ßò´„©ò´ú ´¶ °¶¨£ßÂ ö†ò ú§ú®ö¶ß¶Âû©û ò¢¢òö„™ Æ®„©û™\ná‚¢ú´ú §ò ú§ú®ö¶ß¶†„©‡ ´È®ò ´û§ ò¢¢òö„ ò¨´„ ?' to iYes
                        If (iYes=MBR_YES) Send KeyAction to (pibtnChangeXrID(Self))
                        Else Send Reset_Combos
                    End
                End
                Procedure_return rVal
            End_Procedure

            Procedure Key Integer iKey
            End_Procedure

            Procedure Combo_Fill_List
                Clear Company
                Find Gt Company.Recnum
                While (Found)
                    Send Combo_Add_Item (Trim(Company.Company_Code)+' - '+ Trim(Company.Company_Name))
                    Find Gt Company.Recnum
                Loop

                // Find Current Company to display in Combo
                Clear Company
                Move (psChoosenCompany(Self))   to Company.Company_Code
                Find Eq Company By Index.1
                If (Found)  Set Value Of cboCompany Item 0 to (Trim(Company.Company_Code)+' - '+ Trim(Company.Company_Name))
                Else        Set Value Of cboCompany Item 0 to ''
            End_procedure

            Procedure Combo_Item_Changed
                String  sVal
                Integer iPos
                Forward Send Combo_Item_Changed
                Get Value Of cboCompany Item 0  to sVal
                If (Trim(sVal)='') Begin
                    Clear Company
                    Move (psChoosenCompany(Self))   to Company.Company_Code
                    Find Eq Company By Index.1
                    If (Found)  Set Value Of cboCompany Item 0 to (Trim(Company.Company_Code)+' - '+ Trim(Company.Company_Name))
                    Else        Set Value Of cboCompany Item 0 to ''
                End
                Else Begin
                    Move (Pos('-',sVal)-1) to iPos
                    Set psChoosenCompany            to (Trim(Left(sVal,iPos)))
                End
                Send Fill_Branch
            End_procedure

            Procedure End_Construct_Object
                Integer iID
                Forward Send End_Construct_Object
                Get Object_ID Of Self   to iID
                Set picboCompanyID      to iID
            End_Procedure


            //AB-StoreEnd

        End_Object    // cboCompany

        Object otxtBranch is a TextBoxSub
            Set Label to "ìß¶°/£ò :"
            Set Auto_Size_State to FALSE
            Set TextColor to clNavy
            Set FontSize to 4 0
            Set Location to 11 195
            Set Size to 10 30
            Set FontWeight to 800
            Set Justification_Mode to jMode_Right
            Set TypeFace to "MS Sans Serif"
            Set Enabled_State to TRUE
        End_Object    // otxtBranch

        Object cboBranch is a ComboFormSub
            Set Size to 13 147
            Set Location to 9 235
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart

            Procedure Exiting Integer WhereTo Returns Integer
                Integer rVal iID iYes
                Forward Get Msg_Exiting WhereTo to rVal
                If rVal Procedure_Return rVal
                If ((WhereTo<>picboCompanyID (Self)) And ;
                    (WhereTo<>picboBranchID  (Self)) And ;
                    (WhereTo<>picboYearID    (Self)) And ;
                    (WhereTo<>pibtnChangeXrID(Self))) Begin
                    If ((psChoosenCompany(Self)<>SyscurXr.Company_Code) Or ;
                        (psChoosenBranch (Self)<>SyscurXr.Branch_Code ) Or ;
                        (piChoosenYear   (Self)<>SyscurXr.year_Year   )) Begin
                        Get YesNo_Box 'è®¶©¶Æ„ ! Ä¢¢·•ò´ú ©´¶†ÆúÂò Ñ´ò†®Âò™/ìß¶°ò´./ï®„©û™\nò¢¢· ÉÑå ßò´„©ò´ú ´¶ °¶¨£ßÂ ö†ò ú§ú®ö¶ß¶Âû©û ò¢¢òö„™ Æ®„©û™\ná‚¢ú´ú §ò ú§ú®ö¶ß¶†„©‡ ´È®ò ´û§ ò¢¢òö„ ò¨´„ ?' to iYes
                        If (iYes=MBR_YES) Send KeyAction to (pibtnChangeXrID(Self))
                        Else Send Reset_Combos
                    End
                End
                Procedure_return rVal
            End_Procedure

            Procedure Key Integer iKey
            End_Procedure

            Procedure Combo_Fill_List
            End_procedure

            Procedure Combo_Item_Changed
                String  sVal
                Integer iPos
                Forward Send Combo_Item_Changed
                Get Value Of cboBranch Item 0  to sVal
                If (Trim(sVal)='') Begin
                    Clear Branch
                    Move (psChoosenCompany(Self))   to Branch.Company_Code
                    Move (psChoosenBranch (Self))   to Branch.Branch_Code
                    Find Eq Branch By Index.1
                    If (Found)  Set Value Of cboBranch Item 0 to (Trim(Branch.Branch_Code)+' - '+ Trim(Branch.Branch_Name))
                    Else        Set Value Of cboBranch Item 0 to ''
                End
                Else Begin
                    Move (Pos('-',sVal)-1) to iPos
                    Set psChoosenBranch    to (Trim(Left(sVal,iPos)))
                End
                Send Fill_Year
            End_procedure

            Procedure End_Construct_Object
                Integer iID
                Forward Send End_Construct_Object
                Get Object_ID Of Self   to iID
                Set picboBranchID       to iID
            End_Procedure





            //AB-StoreEnd

        End_Object    // cboBranch

        Object otxtYear is a TextBoxSub
            Set Label to "ï®„©û :          "
            Set Auto_Size_State to FALSE
            Set FontSize to 4 0
            Set Location to 11 392
            Set Size to 10 23
            Set FontWeight to 600
            Set Justification_Mode to jMode_Left
            Set TypeFace to "MS Sans Serif"
            Set Enabled_State to TRUE

            //AB-StoreStart

            Set TextColor to clYellow

            //AB-StoreEnd

        End_Object    // otxtYear

        Object cboYear is a ComboFormSub
            Set Size to 13 54
            Set Location to 9 423
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart

            Procedure Exiting Integer WhereTo Returns Integer
                Integer rVal iID iYes
                Forward Get Msg_Exiting WhereTo to rVal
                If rVal Procedure_Return rVal
                If ((WhereTo<>picboCompanyID (Self)) And ;
                    (WhereTo<>picboBranchID  (Self)) And ;
                    (WhereTo<>picboYearID    (Self)) And ;
                    (WhereTo<>pibtnChangeXrID(Self))) Begin
                    If ((psChoosenCompany(Self)<>SyscurXr.Company_Code) Or ;
                        (psChoosenBranch (Self)<>SyscurXr.Branch_Code ) Or ;
                        (piChoosenYear   (Self)<>SyscurXr.year_Year   )) Begin
                        Get YesNo_Box 'è®¶©¶Æ„ ! Ä¢¢·•ò´ú ©´¶†ÆúÂò Ñ´ò†®Âò™/ìß¶°ò´./ï®„©û™\nò¢¢· ÉÑå ßò´„©ò´ú ´¶ °¶¨£ßÂ ö†ò ú§ú®ö¶ß¶Âû©û ò¢¢òö„™ Æ®„©û™\ná‚¢ú´ú §ò ú§ú®ö¶ß¶†„©‡ ´È®ò ´û§ ò¢¢òö„ ò¨´„ ?' to iYes
                        If (iYes=MBR_YES) Send KeyAction to (pibtnChangeXrID(Self))
                        Else Send Reset_Combos
                    End
                End
                Procedure_return rVal
            End_Procedure

            Procedure Key Integer iKey
            End_Procedure

            Procedure Combo_Fill_List
            End_procedure

            Procedure Combo_Item_Changed
                Integer iVal
                Forward Send Combo_Item_Changed
                Get Value Of cboYear Item 0 to iVal
                Set piChoosenYear           to iVal
            End_procedure

            Procedure End_Construct_Object
                Integer iID
                Forward Send End_Construct_Object
                Get Object_ID Of Self   to iID
                Set picboYearID         to iID
            End_Procedure




            //AB-StoreEnd

        End_Object    // cboYear

        Object btnChangeXr is a ButtonSub
            Set Bitmap to "Convert2.bmp"
            Set Size to 20 23
            Set Location to 5 487
            Set Border_Style to Border_Normal
            Set Focus_Mode to Pointer_Only
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart

            Set TooltipValue to 'Ñß†ôúôòÂ‡©û ò¢¢òö„™ ©´¶†ÆúÂ‡§ Æ®„©û™'

            Procedure OnClick
                String  sOld sNew
                Integer iYes
                Append sOld 'Ä¢¢òö„ òß¶ -> ' (Trim(SyscurXr.Company_Name)) ' - ' (Trim(SyscurXr.Branch_Name)) ' - ' (String(SyscurXr.Year_Year)) '\n'
                Append sNew '        ©ú -> ' (Trim(Value(cboCompany(Self),0))) ' - ' (Trim(Value(cboBranch(Self),0))) ' - ' (Trim(String(Value(cboYear(Self),0)))) ' ?'
                Get YesNo_Box (sOld+sNew) to iYes
                If (iYes=MBR_NO) Begin
                    Send Reset_Combos
                    Procedure_Return
                End


                Send Reset_All_Files_Except_System

                // Verify that choosen company+branch+year
                // is a valid record and existing record
                Clear Year
                Move (psChoosenCompany(Self)) to Year.Company_Code
                Move (psChoosenBranch (Self)) to Year.Branch_Code
                Move (piChoosenYear   (Self)) to Year.Year_Year
                Find Eq Year By Index.1
                If (Not(Found)) Begin
                    Send Stop_Box 'Ä§Áßò®°´û úß†¢¶ö„ Ñ´ò†®Âò™/ìß¶°ò´ò©´„£ò´¶™/ï®„©û™' 'ë≠·¢£ò 8000'
                    Send Reset_Combos
                    Procedure_Return
                End
                // First Close All the Views and Check if
                // function returns 0 = all views closed OK
                //                  1 = Not ok

                If (Close_All_Views(Self,False)=1) Begin
                    Send Reset_Combos
                    Procedure_Return
                End
                // Change Current Xrhsh
                Send Change_Current_Xrhsh
            End_Procedure // OnClick

            Procedure Change_Current_Xrhsh
                Integer iRetVal00 iBreak00 iID
                String  ldcheck00 lsYearRecr00 lsSite00 sCname00 sBname00
                String  sYname00 sNom100 sNom200 sNom300 sCode00
                Date    ldYearXrhsh_From00 ldYearXrhsh_To00

                // Exoume Current Year record apo ton elegxo sthn onclick
                // tou button allaghs xrhshs mesa sto combo group.
                // energopoioume kai tous mpampades.
                Relate Year
                //
                Move Company.Company_Code   to gs_Selected_Company_Code
                Move Company.Company_Name   to sCname00

                Move Branch.Branch_Code     to gs_Selected_Branch_Code
                Move Branch.Beto_Site       to gs_Selected_Beto_Site
                Move Branch.Branch_Site     to lsSite00
                Move Branch.Branch_name     to sBname00

                Move Year.Year_Year         to gi_Selected_Year
                Move Year.Year_Recr         to lsYearRecr00
                Move Year.Year_C_Code0      to sNom100
                Move Year.Year_C_Code00     to sNom200
                Move Year.Year_C_CodeR      to sNom300
                Move Year.Year_Descr        to sYname00

                Move Year.Year_Xrhshfrom    to ldYearXrhsh_From00
                Move Year.Year_XrhshTo      to ldYearXrhsh_To00

                Move 0 to iBreak00
                Clear Nomisma
                Find Gt Nomisma.Recnum
                While ((Found=1) And (iBreak00=0))
                    If (Nomisma.Einai_Euro='1') Begin
                        Move 1 to iBreak00
                        Move Nomisma.Nomisma_Code to sCode00
                    End
                    If (Not(iBreak00)) Find Gt Nomisma.Recnum
                Loop
                Move (Trim(sCode00)) to sCode00

                Reread SysCurXR
                Move gs_Selected_Company_Code   to SysCurXR.Company_Code
                Move sCname00                   to SysCurXR.Company_Name
                Move gs_Selected_beto_site      to SysCurXR.beto_site
                Move gs_Selected_Branch_Code    to SysCurXR.Branch_Code
                Move lsSite00                   to SysCurXR.Branch_Site
                Move sBname00                   to SysCurXR.Branch_Name
                Move gi_Selected_Year           to SysCurXR.Year_Year
                Move lsYearRecr00               to SysCurXR.Year_Recr
                Move sYname00                   to SysCurXR.Year_Descr
                Move ldYearXrhsh_From00         to SysCurXr.Year_XrhshFrom
                Move ldYearXrhsh_To00           to SysCurXr.Year_XrhshTo
                Move  (Trim(sNom100))           to SysCurXR.C_Code0
                Move  (Trim(sNom200))           to SysCurXR.C_Code00
                Move  (Trim(sNom300))           to SysCurXR.C_CodeR
                Move sCode00                    to SysCurXR.Euro_Code

                Saverecord SysCurXR
                Unlock

                If (Syscurxr_DD(Self)<>0) Send Find_By_Recnum to Syscurxr_DD Syscurxr.File_Number Syscurxr.Recnum

                Move lsYearRecr00               to gs_Selected_Year_Recr
                Send Reset_Combos

                //Send Reset_The_Constraints_After_Changing_Syscurxr

                // Ta pidbViewID kai psdbViewName einai nea property
                // apo thn klash dbViewSubS kai kratane to ID tou view
                // kai to onoma tou.
                Send Activate_View Of (pidbViewID(Self))
                Send Reset_Combos
            End_Procedure

            Procedure End_Construct_Object
                Integer iID
                Forward Send End_Construct_Object
                Get Object_ID Of Self   to iID
                Set pibtnChangeXrID     to iID
            End_Procedure


            //AB-StoreEnd

        End_Object    // btnChangeXr


        //AB-StoreStart
        Procedure Reset_Combos
            Set psCurrentCompany    to SysCurXr.Company_Code
            Set psCurrentBranch     to SysCurXr.Branch_Code
            Set piCurrentYear       to SysCurXr.Year_Year
            Set psChoosenCompany    to SysCurXr.Company_Code
            Set psChoosenBranch     to SysCurXr.Branch_Code
            Set piChoosenYear       to SysCurXr.Year_Year
            Send Combo_Item_Changed to cboCompany
        End_Procedure

        Procedure Activating
            Forward Send Activating
            Send Reset_Combos
        End_Procedure

        Procedure Fill_Branch
            Send Combo_Delete_Data to cboBranch
            Clear Branch
            Move (psChoosenCompany(Self)) to Branch.Company_Code
            Find Gt Branch By Index.1
            While ((Found=1) And (Branch.Company_Code=(psChoosenCompany(Self))))
                Send Combo_Add_Item to cboBranch (Trim(Branch.Branch_Code)+' - '+ Trim(Branch.Branch_Name))
                Find Gt Branch By Index.1
            Loop

            // Find Current Branch to display in Combo
            Clear Branch
            Move (psChoosenCompany(Self))   to Branch.Company_Code
            Move (psChoosenBranch (Self))   to Branch.Branch_Code
            Find Eq Branch By Index.1
            If (Found)  Set Value Of cboBranch Item 0 to (Trim(Branch.Branch_Code)+' - '+ Trim(Branch.Branch_Name))
            Else        Set Value Of cboBranch Item 0 to ''
            Send Fill_Year
        End_Procedure

        Procedure Fill_Year
            Send Combo_Delete_Data to cboYear
            Clear Year
            Move (psChoosenCompany(Self))   to Year.Company_Code
            Move (psChoosenBranch (Self))   to Year.Branch_Code
            Find Gt Year By Index.1
            While ((Found=1) And (Year.Company_Code=(psChoosenCompany(Self))) And (Year.Branch_Code=(psChoosenBranch(Self))))
                Send Combo_Add_Item to cboYear (Trim(String(Year.Year_Year)))
                Find Gt Year By Index.1
            Loop

            // Find Current Year to display in Combo
            Clear Year
            Move (psChoosenCompany(Self))   to Year.Company_Code
            Move (psChoosenBranch (Self))   to Year.Branch_Code
            Move (piChoosenYear   (Self))   to Year.Year_Year
            Find Eq Year By Index.1
            If (Found=1)    Set Value Of cboYear Item 0 to (Trim(String(Year.Year_Year)))
            Else            Set Value Of cboYear Item 0 to ''
        End_Procedure

        Procedure End_Construct_Object
            Integer iID
            Forward Send End_Construct_Object
            Get Object_ID Of Self   to iID
            Set pidbGrpYearID       to iID
        End_Procedure


        //AB-StoreEnd

    End_Object    // dbGrpYear

    Object Btypkin_Btypkin_Code is a dbFormSub

        //AB-StoreTopStart


        //AB-StoreTopEnd

        Entry_Item Btypkin.Btypkin_code
        Set Size to 13 42
        Set Location to 47 65
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure Rythmise_Ta_Pedia_Pelath  Integer aiExeiLista     ;
                                            Integer aiMpaineiMesa   ;
                                            Integer aiPedio

            If (aiPedio=1) Begin
                Set Enabled_State            Of Barticl_Barticl_Code1 to (aiMpaineiMesa=1)
                Set Prompt_Object            Of Barticl_Barticl_Code1 to aiExeiLista
                If (aiExeiLista>0) ;
                     Set Prompt_Button_Mode  Of Barticl_Barticl_Code1 to PB_promptOn
                Else Set Prompt_Button_Mode  Of Barticl_Barticl_Code1 to PB_promptOff
            End
            Else If (aiPedio=2) Begin
                Set Enabled_State            Of Barticl_Barticl_Code2 to (aiMpaineiMesa=1)
                Set Prompt_Object            Of Barticl_Barticl_Code2 to aiExeiLista
                If (aiExeiLista>0) ;
                     Set Prompt_Button_Mode  Of Barticl_Barticl_Code2 to PB_promptOn
                Else Set Prompt_Button_Mode  Of Barticl_Barticl_Code2 to PB_promptOff
            End
        End_Procedure

        //////////////////////////////////////////////
        // btypkin_anti
        // "-1" "É‚§ ìß·®Æú†"
        // "0"  "Data Entry"
        // "1"  "ä¶öò®†ò©£È§ Çä"
        // "2"  "î¶®‚ò™"
        // "3"  "è®¶£ûüú¨´È§"
        // "5"  "é ë¨§ò¢¢ò©Ê£ú§¶™"
        // "6"  "íú¢.èò®ò¢„ß´û™"

        Procedure Refresh Integer iMode
            Integer liBtypkin_Anti1 liBtypkin_Anti2
            String  sCtypkinRecr sModule
            Forward Send Refresh iMode

            Move Btypkin.Btypkin_Anti1 to liBtypkin_Anti1
            Move Btypkin.Btypkin_Anti2 to liBtypkin_Anti2

            If ((liBtypkin_Anti1 = 2) Or (liBtypkin_Anti1 = 3)) ;
                  Send Rythmise_Ta_Pedia_Pelath (sl100(Self)) 1 1
            Else  Send Rythmise_Ta_Pedia_Pelath             0 0 1

            If ((liBtypkin_Anti2 = 2) Or (liBtypkin_Anti2 = 3)) ;
                  Send Rythmise_Ta_Pedia_Pelath (sl100(Self)) 1 2
            Else  Send Rythmise_Ta_Pedia_Pelath             0 0 2
            Move Btypkin.Ctypkin_Recr to sCtypkinRecr

            Clear Ctypkin
            Move sCtypkinRecr to Ctypkin.Ctypkin_Recr
            Find Eq Ctypkin By Index.2 // Ctypkin:Index.2:Ctypkin_Recr
            If (Ctypkin.Ctypkin_Module<>'') Move Ctypkin.Ctypkin_Module to sModule
            Else                            Move ''                     to sModule

            Set psCTypkinModule                     to sModule
            set enabled_state of barticl_barticl_no to (btypkin.btypkin_flag05<>1)

            Send Rebuild_Constraints to Clients_DD

        End_Procedure



        //AB-StoreEnd

    End_Object    // Btypkin_Btypkin_Code

    Object Btypkin_Btypkin_Descr is a dbFormSub
        Entry_Item Btypkin.Btypkin_descr
        Set Size to 13 185
        Set Location to 47 109
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Btypkin_Btypkin_Descr

    Object Barticl_Barticl_Hmnia is a dbFormSub
        Entry_Item Barticl.Barticl_hmnia
        Set Size to 13 66
        Set Location to 47 332
        Set Label_Row_Offset to 1
        Set Label_Col_Offset to 2
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure Prompt
            Integer iTypkinCode
            String  sClientID sEpon
            Date    dHmnia

            Get Value               Of Barticl_Barticl_Hmnia Item 0             to dHmnia
            Get Field_Current_Value Of Btypkin_DD Field Btypkin.Btypkin_Code    to iTypkinCode
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Code1   to sClientID
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Epon1   to sEpon

            Set FragmaTypkinCode    Of Barticl to iTypkinCode
            Set FragmaClientID      Of Barticl to sClientID
            Set FragmaHmnia         Of Barticl to dHmnia
            Set FragmaClientEpon    Of Barticl to sEpon
            Set Modal_State Of Barticl to True
            Forward Send Prompt
            Set Modal_State Of Barticl to False
        End_Procedure

        procedure exiting integer whereTo returns integer
            local integer ret_val
            forward get msg_exiting whereTo to ret_val
            if ret_val procedure_return ret_val
            Date    dHmnia
            Integer isLocked
            Get Field_Current_Value Of Btypkin_DD Field Btypkin.Locked          to isLocked
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Hmnia   to dHmnia
            If (dHmnia<>"") Begin
                If ((isLocked=1) And (dHmnia>Btypkin.Locked_Date)) Begin
                    Set Color of btypkin_btypkin_code to 5869567
                    Send Stop_Box "Ü âÂ§û©û úÂ§ò† °¢ú†õ‡£‚§û. ÉÑå üò úß†´®òßúÂ °ò´òÆÈ®û©û" "ë≠·¢£ò 8500"
                End
                Else Set Color of btypkin_btypkin_code to clWindow
            End
            Else Set Color of btypkin_btypkin_code to clWindow
            procedure_return ret_val
        end_procedure

        Procedure Refresh Integer iMode
            Integer iRecn iEkkremes iektyp
            Date dHmnia
            Forward Send Refresh iMode
            Sysdate4 dHmnia
            Set Value Of cSyDateForm1 Item 0 to dHmnia
            Set pdHmniaEos to dHmnia
            Set Enabled_State   Of oPrint_Bn            to True
            Set Enabled_State   Of BtnKleisimo          to True
            Set Enabled_State   Of Buttonsub1           to True
            Set piChangedBarticl                        to True
            Move Barticl.Ekkremes   to iEkkremes
            move Barticl.isotimia   to iektyp
            Move Barticl.Recnum to iRecn

            //gts 30/11/07 é† °†§„©ú†™ ß¶¨ úÂ§ò† locked ©´¶ Btypkin õú§ ´®¶ß¶ß¶†¶Á§´ò†
            Set piNoChangesAllowed Of Barticl_DD    to ((Barticl.Barticl_Ekleise='1') or (Btypkin.locked=1) Or (iEkkremes=0) or (iektyp=1))
            Set piNoChangesAllowed Of Bmove_DD      to ((Barticl.Barticl_Ekleise='1') or (Btypkin.locked=1) Or (iEkkremes=0) or (iektyp=1))

            Set Enabled_State   Of buttonsub1       to ((Barticl.Barticl_Ekleise='1') And (iEkkremes=0))
            Set Enabled_State   Of oPrint_Bn        to (Barticl.Barticl_Ekleise='1')
            Set Enabled_State   Of BtnKleisimo      to ((irecn>0) and (Btypkin.locked<>1) And (iEkkremes=1) and (iektyp<>1))
            Set Enabled_State   Of oDetail_Bn       to ((Current_Record(Baxio_DD(Self))) and (Btypkin.locked<>1) And (iEkkremes=1))

            If ((iEkkremes<>1) And (iRecn>0)) Begin
                Set Color           Of FrmIsClosed  to 9711729
                set label           Of Btnkleisimo  to 'é®†©´†°Ê'
                Set Bitmap          Of BtnKleisimo  to 'Granazi.bmp'
            End
            Else If (Barticl.Barticl_Ekleise='1') Begin
                Set Color           Of FrmIsClosed  to clRed
                set label           Of Btnkleisimo  to 'Ä§¶†ö£ò'
                Set Bitmap          Of BtnKleisimo  to 'Open1.bmp'
            End
            Else Begin
                Set Color           Of FrmIsClosed  to clLime
                set label           Of Btnkleisimo  to "â¢úÂ©†£¶"
                Set Bitmap          Of BtnKleisimo  to 'Close1.bmp'
            End
            Send Show_CN

        End_Procedure // Refresh


        Procedure OnChange
            String sbtnMessages
            Date dDate dHmnia
            String sHmera
            Integer cColor cColorT isEkkremes iRec
            Move "" to sHmera
            Move "" to sbtnMessages

            Get Value Item 0 to dHmnia

            Move Barticl.Ekkremes to isEkkremes
            Move Barticl.Recnum to iRec

            clear branch
            move syscurxr.company_code to branch.company_code
            move syscurxr.branch_code  to branch.branch_code
            find eq branch by index.1
            move (Trim(String(branch.date_locked))) to dDate
            Move (Trim(DateToWeekDayName(dDate)))   to sHmera

            If (dDate<>"") Begin
                Move ("íú¢. é®†©´†°¶ß¶†û£‚§û = "+sHmera+" "+String(dDate)) to sbtnMessages

                If (dHmnia="") Begin
                    Move clGreen to cColor
                    Move clWhite to cColorT
                End
                Else Begin
                    If (dHmnia<=dDate) Begin
                        Move 5329407    to cColor
                        Move clWhite    to cColorT

                    End
                    Else Begin
                        Move clGreen to cColor
                        Move clWhite to cColorT
                    End
                End
            End
            Else Begin
                Move "" to sbtnMessages
                Move clGreen to cColor
                Move clWhite to cColorT
            End


            Set Value       Of btnMessages Item 0   to sbtnMessages
            Set Color       Of btnMessages          to cColor
            Set TextColor   Of btnMessages          to cColorT

        End_Procedure






































        //AB-StoreEnd

    End_Object    // Barticl_Barticl_Hmnia

    Object Barticl_Barticl_No is a dbFormSub
        Entry_Item Barticl.Barticl_no
        Set Size to 13 47
        Set Location to 47 476
        Set Label_Row_Offset to 1
        Set Form_TypeFace Item 0 to "MS Sans Serif"
    End_Object    // Barticl_Barticl_No

    Object Barticl_Barticl_Code1 is a dbFormSub
        Entry_Item Barticl.Barticl_code1
        Set Size to 13 102
        Set Location to 62 65
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure OnChange
            String sCode
            Integer iCode
            If (Focus(Desktop)=Barticl_Barticl_Code1(Self)) Begin
                Send Find_Eponymia 1
                Send Show_CN
            End
        End_Procedure // OnChange

        Procedure Prompt
            String sModule
            Get psModule    Of (sl100(Self))    to sModule
            Set psModule    Of (sl100(Self))    to (psCTypkinModule(Self))
            Set Modal_State Of (sl100(Self))    to True
            Send Clear                          to Clients_DD
            Send Clear                          to CN_DD
            Set Value       Of Barticle_CN_Code to ''
            Forward Send Prompt
            Send Find_Eponymia 1
            Send Show_CN
            Set psModule    Of (sl100(Self))    to sModule
        End_Procedure // Prompt


        //AB-StoreEnd

    End_Object    // Barticl_Barticl_Code1

    Object Barticl_Barticl_Epon1 is a dbFormSub
        Entry_Item Barticl.Barticl_epon1
        Set Size to 13 160
        Set Location to 62 215
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Barticl_Barticl_Epon1

    Object Barticl_Barticl_Code2 is a dbFormSub
        Entry_Item Barticl.Barticl_code2
        Set Size to 13 102
        Set Location to 76 65
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure OnChange
            String sCode
            Integer iCode
            If (Focus(Desktop)=Barticl_Barticl_Code2(Self)) Begin
                Send Find_Eponymia 2
            End
        End_Procedure // OnChange

        Procedure Prompt
            String sModule
            Get psModule    Of (sl100(Self))    to sModule
            Set psModule    Of (sl100(Self))    to (psCTypkinModule(Self))
            Set Modal_State Of (sl100(Self))    to True
            Send Clear                          to Clients_DD
            Forward Send Prompt
            Send Find_Eponymia 2
            Set psModule    Of (sl100(Self))    to sModule
        End_Procedure // Prompt


        //AB-StoreEnd

    End_Object    // Barticl_Barticl_Code2

    Object Barticl_Barticl_Epon2 is a dbFormSub
        Entry_Item Barticl.Barticl_epon2
        Set Size to 13 160
        Set Location to 76 215
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Barticl_Barticl_Epon2

    Object Barticl_Pae_Arithm is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Barticl.Pae_arithm
        Set Size to 13 47
        Set Location to 74 409
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure End_Construct_Object
            Forward Send End_Construct_Object
            Set Enabled_State to (sysfile.serial_number='1')
        End_Procedure



        //AB-StoreEnd

    End_Object    // Barticl_Pae_Arithm

    Object cSydbDateForm1 is a cSydbDateForm

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Barticl.Pae_hmnia
        Set Size to 13 65
        Set Location to 74 458
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure End_Construct_Object
            Forward Send End_Construct_Object
            Set Enabled_State to (sysfile.serial_number='1')
        End_Procedure



        //AB-StoreEnd

    End_Object    // cSydbDateForm1

    Object Barticl_Barticl_Aitiol is a dbFormSub
        Entry_Item Barticl.Barticl_aitiol
        Set Size to 13 296
        Set Location to 90 65
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"
    End_Object    // Barticl_Barticl_Aitiol

    Object Barticle_Cn_Code is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Barticl.Cn_code
        Set Size to 14 126
        Set Location to 105 65
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOn
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set Prompt_Object to (sl041(Self))

        Procedure Request_Clear
            Send Clear to Cn_DD
        End_Procedure

        Procedure Request_Clear_All
            Send Clear to Cn_DD
        End_Procedure

        procedure prompt
            string sclient sCode
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Code1   to sclient
            Get Field_Current_Value Of Btypkin_DD Field Btypkin.Ctypkin_Code    to sCode
            Clear Ctypkin
            Move sCode to Ctypkin.Ctypkin_Code
            Find Eq Ctypkin by index.1
            If (Ctypkin.Ctypkin_Module='01') set fragmaclient_id of (sl041(self)) to sclient
            forward send prompt
            Send Show_CN
            set fragmaclient_id of (sl041(self)) to ''
        end_procedure

        Procedure OnChange
            Send Show_CN
        End_procedure


        Procedure Find_Next
        End_Procedure

        Procedure Find_Previous
        End_Procedure

        Procedure Find_GE
        End_Procedure

        Procedure Key Integer iKey
        End_Procedure
        //AB-StoreEnd

    End_Object    // Barticle_Cn_Code

    Object Barticl_Sxolia1 is a dbFormSub
        Entry_Item Barticl.Sxolia1
        Set Size to 13 254
        Set Location to 119 269
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        //AB-StoreEnd

    End_Object    // Barticl_Sxolia1

    Object Barticl_Sxolia2 is a dbFormSub
        Entry_Item Barticl.Sxolia2
        Set Size to 13 254
        Set Location to 133 269
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"
    End_Object    // Barticl_Sxolia2

    Object Barticl_Barticl_Rec0 is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Barticl.Barticl_rec0
        Set Size to 13 85
        Set Location to 90 410
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE

        //AB-StoreStart

        Set Enabled_state to False

        //AB-StoreEnd

    End_Object    // Barticl_Barticl_Rec0

    Object dbTbDlgMove is a dbTabDialogSubS
        Set Size to 106 523
        Set Location to 146 2
        Object TP_Bmove is a dbTabPageSubS
            Set Label to "â†§„©ú†™    "
            Object dbGrdBmove is a dbGridSub

                //AB-StoreTopStart

                Function private.Check_If_Bmove_Is_Last Integer liBmove_aa Integer liBaxio_Bmove_Laa Returns Integer
                         If (liBmove_aa <> liBaxio_Bmove_Laa) Function_Return 0
                         Else                                 Function_Return 1
                End_Function //private.check_if_last

                //AB-StoreTopEnd

                Set Main_File to Bmove.File_Number
                Set Server to (Bmove_DD(self))
                Set Ordering to 3
                Set Size to 84 515
                Set Location to 4 2
                Set CurrentRowColor to 11468799
                Set CurrentCellColor to 11468799
                Set Wrap_State to TRUE

                Begin_Row
                    Entry_Item Bmove.Bmove_aa
                    Entry_Item Baxiokat.Baxiokat_code
                    Entry_Item Baxiokat.Baxiokat_descr
                    Entry_Item Baxio.Baxio_code
                    Entry_Item Baxio.Baxio_hmnial
                    Entry_Item Baxio.Baxio_c_code2
                    Entry_Item Baxio.Baxio_v2
                    Entry_Item Baxio.Baxio_banka
                    Entry_Item (Code_Description(Self))
                    Entry_Item Baxio.Baxio_no
                    Entry_Item (private.Check_If_Bmove_Is_Last(Self,Bmove.Baxio_aa,Baxio.Baxio_Bmove_Laa))
                    Entry_Item Baxio.Baxio_from
                    Entry_Item (fsbaxioid(self,baxio.baxio_from))
                End_Row

                Set Form_Width    item 0 to 23
                Set Header_Label  item 0 to "ò/ò"

                Set Form_Width    item 1 to 33
                Set Header_Label  item 1 to "íÁß¶™"

                Set Form_Width    item 2 to 55
                Set Header_Label  item 2 to "èú®†ö®ò≠„"

                Set Form_Width    item 3 to 43
                Set Header_Label  item 3 to "â‡õ†°Ê™"

                Set Form_Width    item 4 to 59
                Set Header_Label  item 4 to "Ü£/§Âò ä„•û™"

                Set Form_Width    item 5 to 41
                Set Header_Label  item 5 to "åÊ£†©£ò"

                Set Form_Width    item 6 to 50
                Set Header_Label  item 6 to "è¶©Ê"

                Set Form_Width    item 7 to 18
                Set Header_Label  item 7 to "í"

                Set Form_Width    item 8 to 48
                Set Header_Label  item 8 to "í®·ßúùò"

                Set Form_Width    item 9 to 60
                Set Header_Label  item 9 to "Ä®†ü£Ê™"

                Set Form_Width    item 10 to 34
                Set Header_Label  item 10 to "íú¢ú¨´."
                Set Column_Checkbox_State  item 10 to True

                Set Form_Width    item 11 to 18
                Set Header_Label  item 11 to "àõ"

                Set Form_Width    item 12 to 29
                Set Header_Label  item 12 to "àõ/í®"


                //AB-StoreStart
                Set Child_Table_State to True
                Set Export_Code_Description_State   Item 7 to True

                Set Points                          Item 6 to 2
                Set Numeric_Mask                    Item 6 to 14 2 ' ,*'

                Set Column_Option                   Item 2 to Noenter True
                Set Column_Option                   Item 3 to Noenter True
                Set Column_Option                   Item 12 to Noenter True
                Set Column_Prompt_Object            Item 5 to (slNomism(Self))


                Function Child_entering returns Integer
                    Integer rVal iRec isEkkremes

                    Get Field_Current_Value of Barticl_DD Field Barticl.Ekkremes to isEkkremes

                    If (isEkkremes=0) Begin
                        Function_Return 1
                    End

                    If (piFromBP(Self)) Begin
                        Set piFromBP to False
                        Set Changed_State Of Barticl_DD to False
                        Set Changed_State Of Bmove_DD   to False
                    End

                    Forward Get Child_Entering to rVal
                    If (Not(rVal)) Begin
                        If (Should_Save(Barticl_DD(Self))) Send Request_Save to (Barticl_DD(Self))
                        Get Field_Current_Value Of Btypkin_DD Field Btypkin.Recnum to iRec
                        If (Not(iRec)) Begin
                            Send Info_Box "Éú§ ‚Æú´ú úß†¢‚•ú† °Â§û©û ò•†¶ö®·≠¶¨" "ë≠·¢£ò"
                            Function_Return 1
                        End
                        If ((Current_Record(Self)) and (Not(Current_Record(Baxio_DD(Self))))) ;
                            Send Beginning_Of_Data True
                    End
                    Function_Return rVal
                End_Function


                Procedure Item_Change Integer FromI Integer ToI Returns Integer
                    Integer rVal iCol iBase_item iCI iGridID iNomismaOffset iBaxioCode
                    String  sNom
                    Get Field_Current_Value Of Baxio_DD Field Baxio.Baxio_Code      to iBaxioCode
                    Get Field_Current_Value Of Baxio_DD Field Baxio.Baxio_C_Code2   to sNom

                    Move (dbGrdBmove(TP_Bmove(dbTbDlgMove(self)))) to iGridID
                    If (Focus(Desktop) = iGridID) begin
                        Get Column FromI to iCol
                        If ((iCol>0) And (iCol<5) And (sNom='')) Begin
                            If (Trim(sNom)='') Set Field_Current_Value Of Baxio_DD Field ;
                                Baxio.Baxio_C_Code2 to SysCurXr.C_Code0
                        End
                        Forward Get Msg_Item_Change Fromi toi to rVal
                    End
                    Procedure_return rVal
                End_Procedure

                On_key kExit_application Send None

                Procedure FindBaxioStatusPlace Integer hPrompt
                 Integer liBkinkatRec0 liStatus liBtypkinCode liBaxiokatCode
                 String sBkinkatRecr sclient sStat

                 Move Bkinkat.Bkinkat_Recr to sBkinkatRecr
                 Get Field_Current_Value of Baxiokat_DD Field Baxiokat.Baxiokat_Code to liBaxiokatCode
                 Get Field_Current_Value of Btypkin_DD  Field Btypkin.Btypkin_Code   to liBtypkinCode

                 Move '' to sStat
                 Append sStat '5'

                 Clear Bkinkat
                 Move Syscurxr.Company_Code to Bkinkat.Company_Code
                 Move Syscurxr.Branch_Code  to Bkinkat.Branch_Code
                 Move Syscurxr.Year_Year    to Bkinkat.Year_Year
                 Move liBtypkinCode         to Bkinkat.Btypkin_Code
                 Move liBaxiokatCode        to Bkinkat.Baxiokat_Code
                 Find eq Bkinkat by Index.1 //Bkinkat:Index.1:Company-Branch-Year-Btypkin_Code-Baxiokat_Code
                 Set piFragmaBaxioPlace  of hPrompt to (If((Found),Bkinkat.Baxio_Plac_From,0))
                  If (Found) If (piEpil(Self)=0) Append sStat (Trim(String(Bkinkat.Baxio_Stat_From)))
                  Set psFragmaBaxioStatus of hPrompt to (Trim(sStat))
                 //Set piFragmaBaxioStatus of hPrompt to (If((Found),Bkinkat.Baxio_Stat_From,0))
                 if (piepil(self)=1) begin
                    get field_current_value of barticl_dd field barticl.barticl_code1 to sclient
                    set psfragmaclient of (sl037(self)) to sclient
                 end
                 else set psfragmaclient of (sl037(self)) to ''

                 Clear Bkinkat
                 Move sBkinkatRecr to Bkinkat.Bkinkat_Recr
                 Find eq Bkinkat by Index.2 // Bkinkat_Recr
                End_Procedure // FindBaxioStatusPlace

                Procedure Request_Clear_All
                  Delegate Send Request_Clear_All
                End_Procedure // Request_Clear_All

                Function Row_Save Returns Integer
                  Integer iNotOK iBaxiokatCode iYear iYear2 isOK
                  String  sStr
                  Date    dHmnia1 dHmnia2
                  Get Field_Current_Value Of Barticl_DD   Field Barticl.Barticl_Hmnia     to dHmnia1
                  Get Field_Current_Value Of Baxio_DD     Field Baxio.Baxio_HmniaL        to dHmnia2
                  Get Field_Current_Value Of Baxiokat_DD  Field Baxiokat.Baxiokat_Code    to iBaxiokatCode
                  If ((dHmnia1<>'') And (dHmnia2<>'')) Begin
                      If (TheYearSegment(dHmnia2)<TheYearSegment(dHmnia1)) Begin
                          Move '' to sStr
                          Move 'í¶ ‚´¶™ ´û™ ¢„•û™ ´û™ úß†´òö„™ úÂ§ò†\n£†°®Ê´ú®¶ òß¶ ´¶ ‚´¶™ ´¶¨ ßò®ò©´ò´†°¶Á\nåò ©¨§úÆÂ©‡ £ú ´û§ °ò´òÆÈ®û©û ?' to sStr
                          Move (YesNo_Box(sStr,"è®¶©¶Æ„",MB_DEFBUTTON2)) to isOK
                          If (isOK=MBR_NO) Function_Return 0
                      End
                  End
                  If (iBaxiokatCode=0) Function_Return 0
                  Forward Get row_save to iNotOK
                  Function_Return iNotOK
                End_Function

                Procedure Prompt_Callback Integer hPrompt
                 Integer liBaxiokatOffset liBaxioOffset liBaxiokatCode liSrv liBtypkinCode
                 Move 1 to liBaxiokatOffset
                 Move 4 to liBaxioOffset //apo 3
                 If (Current_Col(Self) = liBaxioOffset) Begin
                     Get Server of (Parent(hPrompt)) to liSrv
                     Set Ordering of liSrv to 7
                //       Set Auto_Index_State of hPrompt to False
                     Get Field_Current_Value of Baxiokat_DD Field  Baxiokat.Baxiokat_Code to liBaxiokatCode
                     Set piFragmaBaxiokatCode of hPrompt to liBaxiokatCode
                     Send FindBaxioStatusPlace hPrompt
                 End
                 Else Begin
                     If (Current_Col(Self) = liBaxiokatOffset) Begin
                         Get Field_Current_Value of Btypkin_DD Field  Btypkin.Btypkin_Code to liBtypkinCode
                         Set piFragmaBtypkinCode of hPrompt to liBtypkinCode
                     End
                 End
                End_Procedure // Prompt_Callback




                //AB-StoreEnd

            End_Object    // dbGrdBmove


            //AB-StoreStart

            set label to "Ä§·¢¨©û ë¨§ò¢¢òö„™"



            //AB-StoreEnd

        End_Object    // TP_Bmove

        Object TP_Synola is a dbTabPageSubS
            Set Label to "ëÁ§¶¢ò"
            Object Bsum_ is a dbGridSub

                //AB-StoreTopStart

                Function private.Baxiokat_Code String lsBaxiokat_Recr Returns Integer
                     Integer liBaxiokatCode
                     String  lsBaxiokatRecr

                     Move Baxiokat.Baxiokat_Recr to lsBaxiokatRecr

                     Clear Baxiokat
                     Move lsBaxiokat_Recr to Baxiokat.Baxiokat_Recr
                     Find Eq Baxiokat by Index.2 //baxiokat_recr
                     [Found] Move Baxiokat.Baxiokat_Code to liBaxiokatCode
                     Clear Baxiokat
                     Move lsBaxiokatRecr to Baxiokat.Baxiokat_Recr
                     Find eq Baxiokat by Index.2 //baxiokat_rec0

                     Function_Return liBaxiokatCode
                End_Function //private.baxiokat_code

                Function private.Baxiokat_Descr String lsBaxiokat_Recr Returns String
                     String lsBaxiokatDescr lsBaxiokatRecr
                     Move Baxiokat.Baxiokat_Recr to lsBaxiokatRecr
                     Clear Baxiokat
                     Move lsBaxiokat_Recr to Baxiokat.Baxiokat_Recr
                     Find Eq Baxiokat by Index.2 //baxiokat_recr
                     [Found] Move Baxiokat.Baxiokat_Descr to lsBaxiokatDescr
                     Clear Baxiokat
                     Move lsBaxiokatRecr to Baxiokat.Baxiokat_Recr
                     Find eq Baxiokat by Index.2 //baxiokat_recr
                     Function_Return lsBaxiokatDescr
                End_Function //private.baxiokat_descr

                //AB-StoreTopEnd

                Set Main_File to Bsum.File_Number
                Set Server to (Bsum_DD(self))
                Set Size to 84 407
                Set Location to 2 4
                Set Wrap_State to TRUE
                Set Read_Only_State to TRUE

                Begin_Row
                    Entry_Item (private.Baxiokat_Code (Self,Bsum.BAxiokat_Recr))
                    Entry_Item (private.Baxiokat_Descr(Self,Bsum.BAxiokat_Recr))
                    Entry_Item Bsum.Bsum_sv2
                    Entry_Item Bsum.Gmove_srec0
                End_Row

                Set Form_Width    item 0 to 84
                Set Header_Label  item 0 to "ÑÂõ¶™"

                Set Form_Width    item 1 to 85
                Set Header_Label  item 1 to "èú®†ö®ò≠„"

                Set Form_Width    item 2 to 132
                Set Header_Label  item 2 to "ëÁ§¶¢¶"

                Set Form_Width    item 3 to 98
                Set Header_Label  item 3 to "â‡õ†°Ê™ ©Á§õú©û™ £ú Ç.ä."


                //AB-StoreStart

                Procedure Set Col_Entry_State Integer iItem Integer iState
                    Integer liPrototype
                    Get Prototype_Object to liPrototype
                    Set Entry_State of liPrototype Item iItem to iState
                End_Procedure // Col_Entry_State

                Set Col_Entry_State to 0 False
                Set Col_Entry_State to 1 False
                Set Col_Entry_State to 2 False
                Set Col_Entry_State to 3 False

                //***************** Predefined Procedures and Functions Section **************

                //Set Points          Item 2 to 0
                //Set Numeric_Mask    Item 2 to 14 0 ' ,*'

                Procedure Request_Clear_All
                End_Procedure // Request_Clear_All

                Procedure Mouse_Up Integer aiWindow Integer iChar_Pos
                End_Procedure // Mouse_Up

                Procedure End_Construct_Object
                    Integer iDecimals
                    Forward Send End_Construct_Object
                    Get fiDekadika_Nomismatos SysCurXr.C_Code0 to iDecimals
                    Set Points Item 2 to iDecimals
                    Set Numeric_Mask Item 2 to 14 iDecimals ' ,*'
                End_Procedure




                //AB-StoreEnd

            End_Object    // Bsum_


            //AB-StoreStart

            set label to "Ñß†£‚®¶¨™ ëÁ§¶¢ò Ä•†È§"



            //AB-StoreEnd

        End_Object    // TP_Synola

        Object TP_Modules is a dbTabPageSubS
            Set Label to "Modules"
            Object Barticl_Garticl_Rec0 is a dbFormSub
                Entry_Item Barticl.Garticl_rec0
                Set Size to 13 90
                Set Location to 14 145
                Set Label_Col_Offset to 2
                Set Form_TypeFace Item 0 to "MS Sans Serif"
            End_Object    // Barticl_Garticl_Rec0

            Object Barticl_Gmove_Mrec0 is a dbFormSub
                Entry_Item Barticl.Gmove_mrec0
                Set Size to 13 90
                Set Location to 28 145
                Set Label_Col_Offset to 2
                Set Form_TypeFace Item 0 to "MS Sans Serif"
            End_Object    // Barticl_Gmove_Mrec0

            Object Barticl_Gplan_Mrec0 is a dbFormSub
                Entry_Item Barticl.Gplan_mrec0
                Set Size to 13 90
                Set Location to 42 145
                Set Label_Col_Offset to 2
                Set Form_TypeFace Item 0 to "MS Sans Serif"
            End_Object    // Barticl_Gplan_Mrec0

            Object Barticl_Carticl_Rec0 is a dbFormSub
                Entry_Item Barticl.Carticl_rec0
                Set Size to 13 90
                Set Location to 60 145
                Set Label_Col_Offset to 2
                Set Form_TypeFace Item 0 to "MS Sans Serif"
            End_Object    // Barticl_Carticl_Rec0

            Object Barticl_Varticl_Rec0 is a dbFormSub
                Entry_Item Barticl.Varticl_rec0
                Set Size to 13 90
                Set Location to 75 145
                Set Label_Col_Offset to 2
                Set Form_TypeFace Item 0 to "MS Sans Serif"
            End_Object    // Barticl_Varticl_Rec0

            Object TextBoxSub12 is a TextBoxSub
                Set Label to "Ä®. ·®ü®¶¨ Ç.ä.:"
                Set Location to 11 6
                Set Size to 10 59
                Set TypeFace to "MS Sans Serif"
            End_Object    // TextBoxSub12

            Object TextBoxSub13 is a TextBoxSub
                Set Label to "Ñöö®ò≠„ °Â§û©û™ Ç.ä.ö†ò ©¨§ò¢¢/£ú§¶:"
                Set Location to 26 6
                Set Size to 10 135
                Set TypeFace to "MS Sans Serif"
            End_Object    // TextBoxSub13

            Object TextBoxSub14 is a TextBoxSub
                Set Label to "Ñöö®ò≠„ °‡õ†°¶Á ©¨§/©Ê£ú§¶¨ ©´û Ç.ä.:"
                Set Location to 42 6
                Set Size to 9 134
                Set TypeFace to "MS Sans Serif"
            End_Object    // TextBoxSub14

            Object TextBoxSub18 is a TextBoxSub
                Set Label to "Ñöö®ò≠„ °‡õ†°¶Á ©¨§ò¢¢/£‚§¶¨ ©´û Ç.ä.:"
                Set Location to 42 6
                Set Size to 10 113
                Set TypeFace to "MS Sans Serif"
            End_Object    // TextBoxSub18

            Object TextBoxSub19 is a TextBoxSub
                Set Label to "Carticle_Rec0"
                Set Location to 62 6
                Set Size to 10 46
                Set TypeFace to "MS Sans Serif"
            End_Object    // TextBoxSub19

            Object TextBoxSub20 is a TextBoxSub
                Set Label to "Varticle_Rec0"
                Set Location to 76 6
                Set Size to 10 46
                Set TypeFace to "MS Sans Serif"
            End_Object    // TextBoxSub20


            //AB-StoreStart

            set label to "ëÁ§õú©û £ú ·¢¢ò Modules"

            //AB-StoreEnd

        End_Object    // TP_Modules


        //AB-StoreStart

        Function tab_change integer pageNumber integer focus_mode returns integer
            Integer rVal
            Forward Get Tab_Change PageNumber Focus_Mode to rVal
            If (PageNumber=1) Send Beginning_Of_Data to (Bsum_(Tp_Synola(Self))) True
            Function_Return rVal
        End_Function


        //AB-StoreEnd

    End_Object    // dbTbDlgMove

    Object frmIsClosed is a FormSub
        Set Size to 13 18
        Set Location to 90 504
        Set Color to 9711729
        Set Label_Col_Offset to 2
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set Shadow_State to True


        //AB-StoreEnd

    End_Object    // frmIsClosed

    Object TextBoxSub1 is a TextBoxSub
        Set Label to "âÂ§û©û"
        Set Location to 47 5
        Set Size to 10 34
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub1

    Object TextBoxSub2 is a TextBoxSub
        Set Label to "ë¨§ò¢¢/§¶™"
        Set Location to 62 5
        Set Size to 10 51
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub2

    Object TextBoxSub3 is a TextBoxSub
        Set Label to "èò®ò¢„ß´û™"
        Set Location to 76 5
        Set Size to 10 49
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub3

    Object TextBoxSub4 is a TextBoxSub
        Set Label to "Ä†´†¶¢¶öÂò"
        Set Location to 90 5
        Set Size to 10 56
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub4

    Object TextBoxSub5 is a TextBoxSub
        Set Label to "Ñß‡§¨£Âò"
        Set Location to 63 176
        Set Size to 10 33
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub5

    Object TextBoxSub6 is a TextBoxSub
        Set Label to "Ñß‡§¨£Âò"
        Set Location to 78 176
        Set Size to 10 33
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub6

    Object TextBoxSub7 is a TextBoxSub
        Set Label to "Ü£ú®/§Âò"
        Set Location to 47 297
        Set Size to 10 33
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub7

    Object TextBoxSub8 is a TextBoxSub
        Set Label to "Ä®. èò®ò©´ò´†°¶Á"
        Set Location to 47 404
        Set Size to 10 67
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub8

    Object TextBoxSub9 is a TextBoxSub
        Set Label to "Ä®. Í®ü®¶¨:"
        Set Location to 92 367
        Set Size to 10 41
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub9

    Object TextBoxSub10 is a TextBoxSub
        Set Label to "Çú§†°Ê ëÁ§¶¢¶"
        Set Color to clNavy
        Set TextColor to clYellow
        Set Location to 286 276
        Set Size to 10 51
        Set FontWeight to 600
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub10

    Object TextBoxSub11 is a TextBoxSub
        Set Label to "íú£·Æ†ò"
        Set Color to clNavy
        Set TextColor to clYellow
        Set Location to 271 300
        Set Size to 10 30
        Set FontWeight to 600
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub11

    Object FormSub1 is a FormSub
        Set Size to 7 9
        Set Location to 109 198
        Set Label_Col_Offset to 2
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        Set Shadow_State    to True
        Set Enabled_State   to False
        Set Color           to clLime
        //AB-StoreEnd

    End_Object    // FormSub1

    Object Cn_Cn_Descr is a dbFormSub
        Entry_Item Barticl.Cn_descr
        Set Size to 13 254
        Set Location to 106 269
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOff
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE

        //AB-StoreStart





        //AB-StoreEnd

    End_Object    // Cn_Cn_Descr

    Object Textbox1 is a TextBoxSub
        Set Label to "Î®ö¶/ìß¶°ò´."
        Set Location to 105 5
        Set Size to 10 59
        Set TypeFace to "MS Sans Serif"
    End_Object    // Textbox1

    Object TextBoxSub16 is a TextBoxSub
        Set Label to "èú®†ö®ò≠„"
        Set Location to 108 221
        Set Size to 10 39
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub16

    Object oDetail_bn is a ButtonSub
        Set Bitmap to "Sxetika.bmp"
        Set Size to 21 23
        Set Location to 274 59
        Set Focus_Mode to Pointer_Only
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        set tooltipvalue to "ë&´¶†ÆúÂò Ä•†¶ö®·≠¶¨ (CTRL+T)"

        //Set MDI_Container to (V036(Self))

        Procedure OnClick
            If (Current_Record(Baxio_DD(Self))) send Activate_Vw037 to Client_Area
            Else Forward Send OnClick
        End_Procedure // OnClick






        //AB-StoreEnd

    End_Object    // oDetail_bn

    Object oPrint_Bn is a ButtonSub
        Set Bitmap to "Print17.bmp"
        Set Size to 21 23
        Set Location to 274 31
        Set Focus_Mode to Pointer_Only
        Set Form_FontHeight Item 0 to 12
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set Visible_State to False



        //AB-StoreEnd

    End_Object    // oPrint_Bn

    Object btnKleisimo is a ButtonSub
        Set Bitmap to "open1.bmp"
        Set Size to 21 23
        Set Location to 274 3
        Set Focus_Mode to Pointer_Only
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set TooltipValue to "Ä§¶†ö£ò / â¢úÂ©†£¶ ßò®ò©´ò´†°¶Á"

        Procedure OnClick
            String sRecr sStr sCmovesRecr spartl_akyr_recr sMessage
            Integer isClosed iErr iRecnum ilogik iYes iError_Object_ID iSrv iCurr iFile
            Integer iLathos iBmove
            Date    dHmnia

            Set piFromBP to True

            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Recr  to sRecr
            Get Field_Current_Value Of Barticl_DD Field Barticl.Recnum        to iRecnum
            Get Field_Current_Value Of Barticl_DD Field Barticl.se_logik      to ilogik
            if (ilogik=1) begin
                Send Stop_Box 'Ñö†§ú ¢¶ö†©´†°¶ß¶Âû©û ßò®ò©´ò´†°¶Á. Éú§ •ú°¢ú†õÈ§ú†' 'ë≠·¢£ò 6500'
                procedure_return
            end

            Move (Trim(sRecr)) to sRecr
            If (sRecr<>'') Begin
                Send Beginning_Of_Data to (dbgrdbmove(tp_bmove(dbtbdlgmove(v036(Self))))) True
                If Status Bmove Begin
                    Get Field_Current_Value Of Bmove_DD Field Bmove.Recnum              to iBmove
                    Get Field_Current_Value of barticl_dd field barticl.barticl_ekleise to isclosed
                    Get Field_Current_Value of barticl_dd field barticl.barticl_Hmnia   to dHmnia
                    Get Field_Current_Value of barticl_dd field barticl.Partl_akyr_recr to spartl_akyr_recr

                    Begin_Transaction
                        move Error_Object_ID to iError_Object_ID

                        If (isClosed) Begin
                            // js 14/04/2003
                            // Elegxoume prota an exei logistikopoihthei
                            If (spartl_akyr_recr<>'') Begin
                                Move '' to sMessage
                                Append sMessage "í¶ ßò®ò©´ò´†°Ê ‚Æú† ¢¶ö†©´†°¶ß¶†ûüúÂ"
                                Append sMessage "\nÄ°¨®È©´ú ß®È´ò ´¶ ·®ü®¶ ©´û§ Çä °ò† £ú´·"
                                Append sMessage "\nòß¶ ´†™ ö‚≠¨®ú™, •ú£ò®°·®ú´ú ´¶ ßò®ò©´ò´†°Ê."
                                Error 7000 sMessage
                            End

        //                            // js 01/04/2003
        //                            // Prosthiki gia online enhmerosh GL (AKYROSH)
        //                            If (Sysfile.OnLine_Logist=1) Begin
        //                                Clear Gbridgeh
        //                                Move Barticl.Partl_akyr_recr to Gbridgeh.Gbridgeh_Recr
        //                                Find Eq Gbridgeh By Index.2
        //                                If (Found) Begin
        //                                    Clear GbridgeH
        //                                    Clear GbridgeD
        //                                    Set pirecnum    Of DoAkyr   to Gbridgeh.Recnum
        //                                    Send DoProcess              to DoAkyr
        //                                End
        //                                Else Begin
        //                                    // ?????????
        //                                End
        //                            End
        //                            // js 01/04/2003
                    End
                    Else Begin
        //                            // Prosthiki gia online enhmerosh GL (ENHMEROSH)
        //                            If (Sysfile.OnLine_Logist=1) Begin
        //                                Set pddate      Of Doenhaxio    to dHmnia
        //                                Set pirecnum    Of Doenhaxio    to iRecnum
        //                                Set psModule    Of Doenhaxio    to '04'
        //                                Send DoProcess                  to Doenhaxio
        //                                Set pdDate      Of DoEnhmgl     to dHmnia
        //                                Send DoProcess                  to Doenhmgl
        //                            End
                        End

                        Set psModule        Of (bpEnCmv3(Self)) to (psModule(Self))
                        Set psBarticleRecr  Of (bpEnCmv3(Self)) to sRecr
                        Set piBarticleRecn  Of (bpEnCmv3(Self)) to irecnum
                        Send DoProcess                          to (bpEnCmv3(Self))
                        Get piLathos        Of (bpEnCmv3(Self)) to iLathos
                    End_Transaction
                    move iError_Object_ID to Error_Object_ID
                End
                If (wait(bpEnCmv3(Self))) Send Deactivate to (wait(bpEnCmv3(Self)))

                If (Err) Begin
                    Send Find_By_Recnum to barticl_DD barticl.File_Number iRecnum
                End
                Else Begin
                    Send Find_By_Recnum to barticl_DD barticl.File_Number iRecnum
                    Get Field_Current_Value of barticl_dd field barticl.barticl_ekleise to isclosed
                    if (isclosed=1) Begin
                        send info_box 'Ä•†Êö®ò≠ò úß†´¨ÆÈ™ °¢ú†©£‚§ò \nÉú§ ´®¶ß¶ß¶†¶Á§´ò† ò§ õú§ •ú°¢ú†õÈ©¶¨§' 'è¢û®¶≠¶®Âò'
                    End
                    else send info_box 'Ä•†Êö®ò≠ò ò§¶†Æ´·.Ñß†´®‚ßú´ò† û ´®¶ß¶ß¶Âû©û ´¶¨™' 'è¢û®¶≠¶®Âò'
                End


            End
            Else Send Info_Box "Éú§ ô®‚üû°ú úöö®ò≠„ °Â§û©û™ ò•†¶ö®·≠¶¨" "è¢û®¶≠¶®Âò"

            If (Wait(Self)) Send Deactivate to (Wait(Self))
            Indicate Err False
            Send Activate to (dbGrdBmove(TP_Bmove(dbTbdlgMove(Self))))
            Clear Barticl
            Clear Bmove
            Send Clear_All Of Bmove_DD
            Send Clear_All Of Barticl_DD
            Send Find_By_Recnum to barticl_DD barticl.File_Number iRecnum
            Send Activate to Btypkin_Btypkin_Code
        End_Procedure // OnClick
























        //AB-StoreEnd

    End_Object    // btnKleisimo

    Object Barticl_Barticl_Sv2 is a dbFormSub
        Entry_Item Barticl.Barticl_sv0
        Set Size to 13 64
        Set Location to 282 338
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set Shadow_State            to True
        Set Enabled_State           to False

        Set Color                   to clNavy
        Set TextColor               to clAqua

        Procedure End_Construct_Object
            Integer iDecimals
            Forward Send End_Construct_Object
            Get fiDekadika_Nomismatos SysCurXr.C_Code0 to    iDecimals
            Set Points         item 0   to idecimals
            Set Numeric_Mask   item 0   to 14 idecimals " ,*"
        End_Procedure



        //AB-StoreEnd

    End_Object    // Barticl_Barticl_Sv2

    Object Barticl_Barticl_Lines is a dbFormSub
        Entry_Item Barticl.Barticl_lines
        Set Size to 13 37
        Set Location to 269 338
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set Shadow_State            to True
        Set Enabled_State           to False

        Set Color                   to clNavy
        Set TextColor               to clAqua


        //AB-StoreEnd

    End_Object    // Barticl_Barticl_Lines

    Object ButtonSub1 is a ButtonSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Set Bitmap to "printer1.bmp"
        Set Size to 21 23
        Set Location to 273 495
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set TooltipValue to "Ñ°´Áß‡©û èò®ò©´ò´†°¶Á "

        Procedure OnClick
            string wrecr
            integer irecnum iEkkr
            indicate err false
            if (psolarecr(self)<>'') begin
                get psolarecr to wrecr
                Set psRecr  of (rmhtraxio(self)) to Wrecr
                Send startreport to (rmhtraxio(Self))
                set psolarecr to ''
            End
            else begin
                Get Field_Current_Value Of barticl_dd Field barticl.Ekkremes To iEkkr
                If (iEkkr<>0) Procedure_Return
                Get Field_Current_Value Of barticl_dd Field barticl.barticl_recr To wrecr
                Get Field_Current_Value Of barticl_dd Field barticl.recnum To irecnum
                Set psRecr  of (rmhtraxio(self)) to Wrecr
                Send startreport to (rmhtraxio(Self))
                if (not(err)) begin
                    clear barticl
                    move irecnum to barticl.recnum
                    find eq barticl.recnum
                    if (found) begin
                        move 1 to  barticl.isotimia
                        saverecord barticl
                    end
                end

                Send Clear_all to Barticl_DD
            End
        End_Procedure // OnClick


















        //AB-StoreEnd

    End_Object    // ButtonSub1

    Object RadioGroupSub1 is a RadioGroupSub
        Set Size to 20 125
        Set Location to 119 64
        Object Radio3 is a RadioSub
            Set Label to "Ó¢ú™"
            Set Size to 10 40
            Set Location to 7 3
        End_Object    // Radio3

        Object Radio2 is a RadioSub
            Set Label to "Éú©£ú¨£‚§ú™"
            Set Size to 10 62
            Set Location to 7 61
        End_Object    // Radio2


        //AB-StoreStart

        Procedure Notify_Select_State integer iToItem integer iFromItem
             IF itoitem eq 0 set piepil to 0
             else if itoitem eq 1 set piepil to 1
        End_Procedure




        //AB-StoreEnd

    End_Object    // RadioGroupSub1

    Object TextBoxSub17 is a TextBoxSub
        Set Label to "Status Ñß†´òöÈ§ "
        Set Location to 126 5
        Set Size to 10 57
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub17

    Object btnAutoCopen is a ButtonSub
        Set Bitmap to "AutoCopen.bmp"
        Set Size to 21 23
        Set Location to 274 91
        Set Focus_Mode to Pointer_Only
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        SET VISIBLE_STATE TO FALSE
        set tooltipvalue to "Ä¨´Ê£ò´û õû£†¶¨®öÂò úöö®ò≠È§ ©¨©Æ‚´†©û™ (Open Items) ô·©û û£ú®/§Âò™ õÂß¢ò"

        Set MDI_Container to (V036(Self))

        Procedure OnClick
            String  sRecr sStr sCmovesRecr sModule
            Integer isClosed iErr iRecnum ilogik iYes iError_Object_ID
            number  nPoso
            Date    dHmnia
            Get Field_Current_Value Of Barticl_DD Field Barticl.Recnum          to iRecnum
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Ekleise to isClosed
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_sv0     to nPoso
            Get Value               Of cSyDateForm1 Item 0                      to dHmnia
            Get Field_Current_Value Of btypkin_DD Field btypkin.Ctypkin_recr    to srecr
            send clear to ctypkin_dd2
            move srecr to ctypkin.ctypkin_recr
            send find  to ctypkin_dd2 eq 2
            if (not(found)) begin
               send Stop_Box 'Éú§ ‚Æ‡ ú§ú®ö„ °Â§û©û ßò®ò©´ò´†°¶Á' 'ë≠·¢£ò 50004'
               procedure_return
            end
            Get Field_Current_Value Of Ctypkin_DD2 Field Ctypkin.Ctypkin_Module  to sModule
            Set pdHmniaEos to dHmnia
            If ((iRecnum) And (nPoso) And (dHmnia<>'')) Begin

                Move '' to sStr
                Append sStr 'á‚¢ú´ú §ò õû£†¶¨®öûü¶Á§ ò¨´Ê£ò´ò ¶† úöö®ò≠‚™ ©¨©Æ‚´†©û™ ;'

                If (isClosed=1) Begin
                    Get YesNo_Box sStr "Ñß†ôúôòÂ‡©û" 0 to iYes
                    If (iYes=MBR_YES) Begin
                        Begin_Transaction
                        move Error_Object_ID to iError_Object_ID
                        Send Rebuild_Constraints to Bmove_DD
                        Send Find to Bmove_DD First_Record 3
                        While (Found)
                            Get Field_Current_Value Of Bmove_DD Field Bmove.Cmoves_Recr to sCmovesRecr
                            If (Trim(sCmovesRecr)<>'') Begin

                                Set piLathos        Of bpACopen to 0
                                Set pdHmniaEos      Of bpACopen to dHmnia
                                Set psCmovesRecr    Of bpACopen to sCmovesRecr
                                Set psModule        Of bpACopen to (Trim(sModule))
                                Send DoProcess                  to bpACopen
                            End
                            Send Find to Bmove_DD Next_Record 3
                        Loop
                        End_Transaction
                        move iError_Object_ID to  Error_Object_ID
                        if (not(err)) Send Info_Box 'Ü ò¨´Ê£ò´û õû£†¶¨®öÂò ¶¢¶°¢û®Èüû°ú' 'è¢û®¶≠¶®Âò'

                    End
                End
            End
            Else Begin
                     If (Not(iRecnum))  Send Stop_Box 'Éú§ ¨ß·®Æú† ú§ú®ö„ úöö®ò≠„ ßò®ò©´ò´†°¶Á' 'ë≠·¢£ò 50001'
                Else If (Not(nPoso))    Send Stop_Box 'í¶ ß¶©Ê ´¶¨ ßò®ò©´ò´†°¶Á úÂ§ò† £ûõú§†°Ê' 'ë≠·¢£ò 50002'
                Else If (dHmnia='')     Send Stop_Box 'Éú§ ¶®Â©ò´ú û£ú®/§Âò'                    'ë≠·¢£ò 50003'
            End
        End_Procedure // OnClick




















        //AB-StoreEnd

    End_Object    // btnAutoCopen

    Object cSyDateForm1 is a cSyDateForm
        Set Size to 13 66
        Set Location to 279 201
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_Mask Item 0 to "dd/MM/yyyy"
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Visible_State to FALSE

        //AB-StoreStart
        SET VISIBLE_STATE TO FALSE
        //AB-StoreEnd

    End_Object    // cSyDateForm1

    Object frmHmniaLabel is a TextBoxSub
        Set Label to "Ü£/§Âò ©¨©Æ‚´†©û™ ö†ò °†§„©ú†™ £ú Ü£/§Âò ‡™"
        Set Location to 276 117
        Set Size to 17 83
        Set Justification_Mode to jMode_Center
        Set TypeFace to "MS Sans Serif"
        Set Visible_State to FALSE

        //AB-StoreStart
        SET VISIBLE_STATE TO FALSE

        //AB-StoreEnd

    End_Object    // frmHmniaLabel

    Object Textbox1 is a Textbox
        Set Label to "èò®ò´û®„©ú†™"
        Set TextColor to clNavy
        Set Location to 126 213
        Set Size to 10 53
        Set TypeFace to "MS Sans Serif"
    End_Object    // Textbox1

    Object btnMessages is a FormSub
        Set Size to 13 277
        Set Location to 29 6
        Set Color to clBtnFace
        Set Form_Border Item 0 to Border_Normal
        Set Label_Col_Offset to 2
        Set Enabled_State to FALSE
        Set Form_FontHeight Item 0 to 15
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "Arial Greek"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // btnMessages

    Object btnMessages2 is a FormSub
        Set Size to 13 235
        Set Location to 29 288
        Set Color to clBtnFace
        Set TextColor to clWhite
        Set Form_Border Item 0 to Border_Normal
        Set Label_Col_Offset to 2
        Set Enabled_State to FALSE
        Set Form_FontHeight Item 0 to 15
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "Arial Greek"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // btnMessages2

    Object TextBoxSub21 is a TextBoxSub
        Set Label to "Ä®. é®†©´†°¶ß¶Âû©û™"
        Set Location to 60 403
        Set Size to 12 69
        Set TypeFace to "MS Sans Serif"
    End_Object    // TextBoxSub21

    Object Barticl_Arith_Orist is a dbFormSub
        Entry_Item Barticl.Arith_orist
        Set Size to 13 47
        Set Location to 60 476
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Barticl_Arith_Orist

    Object TextBoxSub22 is a TextBoxSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Set Label to "è.Ä.Ñ."
        Set Location to 75 386
        Set Size to 12 21
        Set TypeFace to "MS Sans Serif"

        //AB-StoreStart

        Procedure End_Construct_Object
            Forward Send End_Construct_Object
            Set Enabled_State to (sysfile.serial_number='1')
        End_Procedure



        //AB-StoreEnd

    End_Object    // TextBoxSub22

    Object oOK_bn is a ButtonSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Set Bitmap to "Login1.bmp"
        Set Size to 26 31
        Set Location to 271 446
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        set visible_state to false
        set enabled_state to false

        Set TooltipValue to "é®†©´†°¶ß¶Âû©û °ò† Ñ°´Áß‡©û í®‚Æ¶§´¶™ èò®ò©´ò´†°¶Á"

        Procedure OnClick
            integer imet iNextNumber iError_Object_ID isEkkremes iiBarticleNO
            date ddate dbrdate dhmnia dBarticleHmnia
            string srecr sbr  msgstr sHmera sBarticleRecr ssBtypkinDescrShort sPerigrafh

            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Recr to sBarticleRecr
            If (sBarticleRecr="") Begin
                Send Stop_Box "Éú§ ¨ß·®Æú† ú§ú®öÊ èò®ò©´ò´†°Ê" "ë≠·¢£ò 8001"
                Procedure_Return
            End
            Get Field_Current_Value Of Barticl_DD Field Barticl.Barticl_Hmnia   to dBarticleHmnia

            String sMess
            Integer iYes iNum iMhnOristikopoieis
            String lsTheAppPath

            Move 0 to iMhnOristikopoieis

            clear branch
            move syscurxr.company_code  to branch.company_code
            move syscurxr.branch_code   to branch.branch_code
            find eq branch by index.1
            move branch.date_locked     to dbrdate
            Move dBarticleHmnia         to ddate

            if (ddate='') begin
                send info_box 'Ü£/§Âò °ú§„' 'è¢û®¶≠¶®Âò'
                procedure_return
            End

            if (dbrdate>ddate)      Move 2 to iMhnOristikopoieis
            else if (dbrdate=ddate) Move 1 to iMhnOristikopoieis

            Get Field_Current_Value Of Barticl_DD Field Barticl.Ekkremes to isEkkremes
            // Ä§ ú†§ò† ¶®†©´†°¶ß¶†û£ú§¶ úß†´®úß¶ü£ú £¶§¶ úßò§ú°´¨ß‡©û
            If (isEkkremes<>1) Move 1 to iMhnOristikopoieis

            clear barticl
            move syscurxr.company_code to barticl.company_code
            move syscurxr.branch_code  to barticl.branch_code
            move syscurxr.year_year    to barticl.year_year
            move 1                     to barticl.ekkremes
            move ddate                 to barticl.barticl_hmnia
            find ge barticl by index.12
            if ((found) and (syscurxr.company_code=barticl.company_code) and;
                            (syscurxr.branch_code =barticl.branch_code)  and;
                            (syscurxr.year_year=barticl.year_year)       and;
                            (barticl.ekkremes=1)                         and;
                            (ddate=barticl.barticl_hmnia)) begin


                find lt barticl by index.12
                if ((found) and (syscurxr.company_code=barticl.company_code)    and;
                              (syscurxr.branch_code =barticl.branch_code)       and;
                              (syscurxr.year_year=barticl.year_year)            and;
                              (barticl.ekkremes=1)) begin
                    move barticl.barticl_hmnia to dhmnia
                    move '' to msgstr
                    move 'è®¶©¶Æ„ ¨ß·®Æ¶¨§ ß®¶©‡®†§‚™ úöö®ò≠‚™ ©ú û£/§Âò = ' to msgstr
                    append msgstr dhmnia
                    send info_box msgstr 'è¢û®¶≠¶®Âò'
                    procedure_return
                 end
           End


            Integer iAllBranch iRecnum
            Integer iNoPrinterAttached
            Integer iBtypkinCode

            Get Field_Current_Value Of Btypkin_DD Field Btypkin.Btypkin_Code to iBtypkinCode
            Get Field_Current_Value Of Btypkin_DD  Field Btypkin.Btypkin_Abr to ssBtypkinDescrShort
            Get Field_Current_Value Of Barticl_DD  Field Barticl.Barticl_No  to iiBarticleNO

            If (iMhnOristikopoieis>0) Goto MonoEktyposh1

            Send ChangeAllFileModes DF_Filemode_ReadOnly
            Set_Attribute DF_File_Mode Of Barticl.File_Number   To DF_Filemode_Default
            Set_Attribute DF_File_Mode Of BartlNo.File_Number   To DF_Filemode_Default
            Set_Attribute DF_File_Mode Of Branch.File_Number    To DF_Filemode_Default
            Set_Attribute DF_File_Mode Of Cmoves.File_Number    To DF_Filemode_Default

            Integer iPerase
            Move 0 to iPerase

            Begin_Transaction
                Move Error_Object_ID To iError_Object_ID

                Clear Barticl
                Move sBarticleRecr to Barticl.Barticl_Recr
                Find Eq Barticl By Index.2
                If (Not(Found)) Error 6000 'Cannot reposition on Article'

                Move Barticl.Recnum to iRecnum

                // Vres epomeno arithmo oristikopoihshs
                Clear BartlNo
                Move SyscurXr.Company_Code  to BartlNo.Company_Code
                Move iBtypkinCode           to BartlNo.Btypkin_Code
                Find Eq BartlNo By Index.1
                Move (BartlNo.Last_No+1)    to iNextNumber
                Move (BartlNo.Last_No+1)    to BartlNo.Last_No
                Saverecord BartlNo
                move 0 to barticl.ekkremes
                Move iNextNumber    to Barticl.Arith_Orist
                Move dBarticleHmnia to Barticl.Hmnia_Orist
                saverecord barticl

                // Prosthikh 19/12/2008 Gia na prosthesoume sthn perigrafh kai ton
                // arithmo oristikopoihshs
                String sPar1 sPar0
                Move "" to sPar0
                Move "" to sPar1
                Clear Cmoves
                Move sBarticleRecr to Cmoves.Barticl_Recr
                Find GE Cmoves By Index.9
                While ((Found) And (sBarticleRecr=Cmoves.Barticl_Recr))
                    Move "" to sPerigrafh
                    Move (Append(sPerigrafh,('*'+(Trim(ssBtypkinDescrShort))+'  '+ (String(iNextNumber))+;
                                             '  èÄâ '+               (String(iiBarticleNO))+ '*'))) to sPerigrafh
                    Move (Trim(sPerigrafh)) to Cmoves.Cmoves_par
                    Saverecord Cmoves

                    Find GT Cmoves By Index.9
                Loop

                move ddate to branch.date_locked
                saverecord branch

            End_Transaction
            Unlock
            Move iError_Object_ID To Error_Object_ID
            Send ChangeAllFileModes DF_Filemode_Default


            MonoEktyposh1:

            If (iMhnOristikopoieis>0) Begin
                Get YesNo_Box "Ü Ñöö®ò≠„ úÂ§ò† ¶®†©´†°¶ß¶†û£‚§û.\nåò ©¨§úÆÂ©‡ £ú ´û§ ú°´Áß‡©û ?" to iYES
                If (iYES=MBR_NO) Begin
                    Send Info_Box "Ü õ†òõ†°ò©Âò ¶¢¶°¢û®Èüû°ú" "è¢û®¶≠¶®Âò"
                    Procedure_Return
                End
            End

            Set psRecr  of (rmhtraxio(self)) to sBarticleRecr
            Send startreport to (rmhtraxio(Self))
            if (not(err)) begin
                clear barticl
                move irecnum to barticl.recnum
                find eq barticl.recnum
                if (found) begin
                    reread Barticl
                    move 1 to  barticl.isotimia
                    saverecord barticl
                    Unlock
                end
            end

            Send Info_Box "Ü õ†òõ†°ò©Âò ¶¢¶°¢û®Èüû°ú" "è¢û®¶≠¶®Âò"
            Send Clear_all to Barticl_DD
        End_Procedure




        //AB-StoreEnd

    End_Object    // oOK_bn

    Object Barticl_Recr is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Barticl.Barticl_recr
        Set Size to 13 78
        Set Location to 257 171
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
        Set Visible_State To False
        Set Enabled_State to False




        //AB-StoreEnd

    End_Object    // Barticl_Recr

    Object txtBartlRecr is a TextBoxSub
        Set Label to "BartRecr"
        Set Location to 259 137
        Set Size to 10 29
        Set TypeFace to "MS Sans Serif"
    End_Object    // txtBartlRecr

    Object Bmove_Bmove_Recr is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Bmove.Bmove_recr
        Set Server to (Bmove_DD(self))
        Set Size to 13 78
        Set Location to 272 171
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
        Set Visible_State To False
        Set Enabled_State to False



        //AB-StoreEnd

    End_Object    // Bmove_Bmove_Recr

    Object Baxio_Baxio_Recr is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Baxio.Baxio_recr
        Set Server to (Bmove_DD(self))
        Set Size to 13 78
        Set Location to 287 171
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
        Set Visible_State To False
        Set Enabled_State to False



        //AB-StoreEnd

    End_Object    // Baxio_Baxio_Recr

    Object txtBmoveRecr is a TextBoxSub
        Set Label to "BmoveRecr"
        Set Location to 274 128
        Set Size to 10 39
        Set TypeFace to "MS Sans Serif"
    End_Object    // txtBmoveRecr

    Object txtBaxioRecr is a TextBoxSub
        Set Label to "BaxioRecr"
        Set Location to 288 132
        Set Size to 10 34
        Set TypeFace to "MS Sans Serif"
    End_Object    // txtBaxioRecr


    //AB-StoreStart

    //Set Locate_Mode to Center_On_Screen

    On_Key Key_Alt+Key_r    Send Show_Recr

    Procedure Show_Recr
        Integer iState
        Get Visible_State Of Barticl_Recr       to iState

        Set Visible_State Of Barticl_Recr       to (1-iState)
        Set Enabled_State Of Barticl_Recr       to (1-iState)
        Set Visible_State Of TxtBartlRecr       to (1-iState)

        Set Visible_State Of Bmove_Bmove_Recr   to (1-iState)
        Set Enabled_State Of Bmove_Bmove_Recr   to (1-iState)
        Set Visible_State Of TxtBmoveRecr       to (1-iState)

        Set Visible_State Of Baxio_Baxio_Recr   to (1-iState)
        Set Enabled_State Of Baxio_Baxio_Recr   to (1-iState)
        Set Visible_State Of TxtBaxioRecr       to (1-iState)
    End_procedure


    Procedure Activate_View Returns Integer
        String  sModule sStr sHmera
        Integer rVal idecimals iSrv
        Move '' to sStr
        Move (append(sstr, 'Ñ†©ß®·•ú†™-è¢û®‡£‚™'           +'        ' +;
                           (Trim(SyscurXr.Company_Name))   +' - '      +;
                           (Trim(SyscurXr.Branch_Name))    +' - '      +;
                           (Trim(SyscurXr.Year_Descr)))) to sStr

        Set Label Of V036 to sStr
        Set Color of btypkin_btypkin_code to clWindow
        Reread Sysfile
        Unlock


        clear barticl
        move syscurxr.company_code to barticl.company_code
        move syscurxr.branch_code  to barticl.branch_code
        move syscurxr.year_year    to barticl.year_year
        move 1                     to barticl.ekkremes
        find gt barticl by index.12
        If ((found) and (syscurxr.company_code=barticl.company_code) and;
                        (syscurxr.branch_code =barticl.branch_code)  and;
                        (syscurxr.year_year=barticl.year_year)       and;
                        (barticl.ekkremes=1)) Begin

            Move (Trim(DateToWeekDayName(Barticl.Barticl_Hmnia))) to sHmera
            Set Value Of btnMessages2 Item 0 to ;
                ("è®È´û £û é®†©´†°¶ß¶†û£‚§û = "+sHmera+" "+String(Barticl.Barticl_Hmnia))
        End
        Else Set Label Of btnMessages2 to ""
        Clear Barticl

        if (psfromexofl(self)<>'') Begin
            Set psModule to '04'
            Clear Barticl
            Move (psFromexofl(Self)) to Barticl.Barticl_Recr
            set psfromexofl to ''
            Find Eq Barticl By Index.2 // Barticl_Recr
            If (Found)  Send Find   to Barticl_DD Eq 2
            Else        Send Clear  to Barticl_DD
        End
        else begin
            If (psFromCmoves(Self)='') Begin
                Get Server to iSrv
                Set psModule to  '04'
                If (iSrv) Begin
                    Send Clear_All      to iSrv
                    Set Changed_State   Of iSrv to False
                End
            End
            Else Begin
                Set psModule to '04'
                Clear Barticl
                Move (psFromCmoves(Self)) to Barticl.Barticl_Recr
                Find Eq Barticl By Index.2 // Barticl_Recr
                If (Found)  Send Find   to Barticl_DD Eq 2
                Else        Send Clear  to Barticl_DD
            End
        end

        Forward Get Msg_Activate_View to rVal

        Set Visible_State Of Barticl_Recr       to False
        Set Enabled_State Of Barticl_Recr       to False
        Set Visible_State Of TxtBartlRecr       to False

        Set Visible_State Of Bmove_Bmove_Recr   to False
        Set Enabled_State Of Bmove_Bmove_Recr   to False
        Set Visible_State Of TxtBmoveRecr       to False

        Set Visible_State Of Baxio_Baxio_Recr   to False
        Set Enabled_State Of Baxio_Baxio_Recr   to False
        Set Visible_State Of TxtBaxioRecr       to False

        Set Color       Of btnMessages2          to clGreen
        Set TextColor   Of btnMessages2          to clWhite

        Set psFromCmoves to ''
        Clear bmove
        Send Request_Assign To (bmove_DD(Self))
        Procedure_Return rVal
    End_Procedure
    //
    //Procedure DoRunTheForm for Baseclass String asFile
    //    string sRunPath lsWspcName
    //    Move (WorkspaceName(ProgramWorkspace(Self))) to lsWspcName
    //    get_profile_string ("workspaces\"+lsWspcName) "programpath" to sRunPath
    //    append sRunPath "\" asFile
    //    send DoRunApplication sRunPath
    //End_Procedure // DoRunTheForm
    //
    //Procedure DoDeleteBarticl
    //    Integer liLines
    //    If (Current_Record(Barticl_DD(Self))) Begin
    //        Get Field_Current_Value of Barticl_DD Field Barticl.Barticl_Lines to liLines
    //        If (Not(liLines)) Begin
    //            Send request_Delete to Barticl_dd
    //        End
    //    End
    //    Send request_Clear  to V036
    //End_Procedure // DoDeleteBarticl
    //
    //
    Function GetEponymia Integer aiCode1Or2 String asCode Returns String
        String lsEponymia lsApoCode lsEosCode
        Integer liBtypkin_Anti
    //
    //                 Btypkin_Anti1 û 2  "-1" "É‚§ ìß·®Æú†"
    //                                     "0" "Data Entry"
    //                                     "1" "ä¶öò®†ò©£È§ Çä"
    //                                     "2" "èú¢ò´È§"
    //                                     "3" "è®¶£ûüú¨´È§"
    //                                     "5" "é ë¨§ò¢¢ò©Ê£ú§¶™"
    //                                     "6" "íú¢.èò®ò¢„ß´û™"
    //
        If (aiCode1Or2 = 1) Begin
            Get Field_Current_Value of Btypkin_DD Field Btypkin.Btypkin_Anti1   to liBtypkin_Anti
            Get Field_Current_Value of Btypkin_DD Field Btypkin.Gplan_Code_Apo1 to lsApoCode
            Get Field_Current_Value of Btypkin_DD Field Btypkin.Gplan_Code_Eos1 to lsEosCode
        End
        Else Begin
            If (aiCode1Or2 = 2) Begin
                Get Field_Current_Value of Btypkin_DD Field Btypkin.Btypkin_Anti2   to liBtypkin_Anti
                Get Field_Current_Value of Btypkin_DD Field Btypkin.Gplan_Code_Apo2 to lsApoCode
                Get Field_Current_Value of Btypkin_DD Field Btypkin.Gplan_Code_Eos2 to lsEosCode
            End
        End
    //
        Case Begin
            Case (liBtypkin_Anti = -1) // Éú§ ¨ß·®Æú†
                Case Break
            Case (liBtypkin_Anti =  0) // Data Entry
                Case Break
            Case (liBtypkin_Anti = 1)  // Çú§†°„ ä¶ö†©´†°„
            // jsjsjs 24/01/2001
    //                Clear Gplan
    //                Move gs_Selected_Company_Code to Gplan.Company_Code
    //                Move gs_Selected_Branch_Code  to Gplan.Branch_Code
    //                Move gi_Selected_Year         to Gplan.Year_Year
    //                Move asCode                   to Gplan.Gplan_Code
    //                Find eq Gplan by Index.1 //Gplan:Index.1:Company_Code-Branch_Code-Year_Year-Gplan_Code
    //                [Found] Begin
    //                    If ((asCode >= lsApoCode) and (asCode <= lsEosCode) and (Gplan.Gplan_Yn_Last = 1)) ;
    //                        Move  Gplan.Gplan_Descr1 to lsEponymia
    //                End
            // jsjsjs 24/01/2001
                Case Break
            Case ((liBtypkin_Anti = 2) Or (liBtypkin_Anti = 3)) // Ä®ÆúÂ¶ èú¢ò´È§/è®¶£ûüú¨´È§
                Clear Clients
    //                move syscurxr.company_code  to clients.company_code
    //                move syscurxr.branch_code   to clients.branch_code
    //                move syscurxr.year_year     to clients.year_year
                move (trim(ascode))         to clients.client_id
    //                Find Eq Clients by Index.5 //company_code+branch_code+year_year+Client_ID
                Find Eq Clients by Index.6 //Client_ID
                move clients.client_name    to lseponymia
    //            If (aiCode1Or2=1) Begin
    //                set psclientrecr to clients.client_recr
    //                Send Rebuild_Constraints to Clients_DD
    //                Send Rebuild_Constraints to CN_DD
    //            End
              Case Break
            Case (liBtypkin_Anti = 4) // ???????????
                Case Break
            Case (liBtypkin_Anti = 5) // é ë¨§ò¢¢ò©Ê£ú§¶™
                Case Break
            Case (liBtypkin_Anti = 6) // íú¢. èò®ò¢„ß´û™
                Case Break
        Case End
        Function_Return (Trim(lsEponymia))
    End_Function // SetEponymia
    //
    //

    Procedure Request_Cancel
        Integer iRec
        Get Field_Current_Value Of Barticl_DD Field Barticl.Recnum to iRec
        If (Not(iRec)) Begin
            Send Clear_All to Barticl_DD
            Set Changed_State Of Barticl_DD to False
        End
        Set psFromCmoves to ''
        Forward Send Request_Cancel
    End_Procedure // Close_Panel

    //
    //On_Key Key_Ctrl+Key_P    Send KeyAction to (oPrint_bn(TP_Bmove(dbTbDlgMove(Self))))
    On_Key Key_Ctrl+Key_T    Send KeyAction to (oDetail_bn(TP_Bmove(dbTbDlgMove(Self))))
    //
    //
    Procedure Show_CN
        String  sCode sCompany sBranch sCustprom sCN_Recr
        String sClient sClient_Recr sCN sCNd sCN_Code sCN_Descr
        Integer iYear ret_val
        Get Value Of Barticle_CN_Code Item 0 to sCode
        Get Value Of Barticl_Barticl_Code1 Item 0 to sClient
        Clear Cn
        Move (Trim(sCode))      to CN.CN_Code
        Find Eq CN By Index.5
        If ((Found) and (sclient=cn.client_id)) Begin
            Move CN.CN_Recr     to sCN_Recr
            Move CN.CN_Descr    to sCN_Descr
            Set Field_Changed_Value Of Barticl_DD  Field Barticl.CN_Recr    to sCN_Recr
            Set Field_Changed_Value Of Barticl_DD  Field Barticl.CN_Descr   to sCN_Descr
            Set Color Of FormSub1 to clLime
        End
        Else Begin
            Send Clear to CN_DD
            Set Field_Changed_Value Of Barticl_DD  Field Barticl.CN_Recr    to ''
            Set Field_Changed_Value Of Barticl_DD  Field Barticl.CN_Descr   to ''
        //    Set Field_Changed_Value Of Barticl_DD  Field Barticl.CN_code    to ''
            Set Color Of FormSub1 to clRed
        End
    End_procedure





























    //AB-StoreEnd

End_Object    // V036


//AB-StoreStart


















//AB-StoreEnd

//AB/ End_Object    // prj
