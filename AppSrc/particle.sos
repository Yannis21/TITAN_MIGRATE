//AB/ Project Particle
//AB/     Object prj is a View_Project
//AB/         Set ProjectName to "Particle"
//AB/         Set ProjectFileName to "Particle.VW"
//AB/         Set GenerateFileName to "NONAME"

// Project Object Structure
//   Particle is a dbViewSub
//     Fpa_DD2 is a Fpa_DataDictionary
//     Ctypkin_DD2 is a Ctypkin_DataDictionary
//     Country_DD2 is a Country_DataDictionary
//     Towns_DD2 is a Towns_DataDictionary
//     Cities_DD2 is a Cities_DataDictionary
//     Payresp_DD2 is a Payresp_DataDictionary
//     Areas_DD2 is a Areas_DataDictionary
//     Clients_DD2 is a Clients_DataDictionary
//     Cmoves_DD2 is a Cmoves_Datadictionary
//     Wtypkin_DD2 is a Wtypkin_DataDictionary
//     Wapokat_DD2 is a Wapokat_DataDictionary
//     Wapomast_DD2 is a Wapomast_DataDictionary
//     Wax_DD2 is a Wax_DataDictionary
//     Units_DD2 is a Units_DataDictionary
//     Witemkat_DD2 is a Witemkat_DataDictionary
//     Item_DD2 is a Item_DataDictionary
//     Witemx_DD2 is a Witemx_DataDictionary
//     Witemcl_DD2 is a Witemcl_DataDictionary
//     Wcmoves_DD2 is a Wcmoves_DataDictionary
//     Wcmoves_DD2 is a Wcmoves_Datadictionary
//     Pseira_DD2 is a Pseira_DataDictionary
//     CN_DD2 is a CN_DataDictionary
//     Psxetika_DD2 is a Psxetika_DataDictionary
//     Ctypkin_DDWR is a Ctypkin_DataDictionary
//     Wtypkin_DDWR is a Wtypkin_DataDictionary
//     Ptyppar_DDWR is a Ptyppar_DataDictionary
//     Pseira_DDWR is a Pseira_DataDictionary
//     Nomisma_DDWR is a Nomisma_DataDictionary
//     Country_DDWR is a Country_DataDictionary
//     Towns_DDWR is a Towns_DataDictionary
//     Cities_DDWR is a Cities_DataDictionary
//     Payresp_DDWR is a Payresp_DataDictionary
//     Areas_DDWR is a Areas_DataDictionary
//     Clients_DDWR is a Clients_DataDictionary
//     Particle_DDWR is a Particle_DataDictionary
//     Wapokat_DDWR is a Wapokat_DataDictionary
//     Wapomast_DDWR is a Wapomast_DataDictionary
//     Wax_DDWR is a Wax_DataDictionary
//     Units_DDWR is a Units_DataDictionary
//     Witemkat_DDWR is a Witemkat_DataDictionary
//     Fpa_DDWR is a Fpa_DataDictionary
//     Item_DDWR is a Item_DataDictionary
//     Witemx_DDWR is a Witemx_DataDictionary
//     Pmoves_DDWR is a Pmoves_DataDictionary
//     Psxetika_DDWR is a Psxetika_DataDictionary
//     PmsSxet_DDWR is a Psxetika_DataDictionary
//     Ctypkin_DD is a DataDictionary
//     Wtypkin_DD is a DataDictionary
//     Ptyppar_DD is a DataDictionary
//     Pseira_DD is a DataDictionary
//     Nomisma_DD is a DataDictionary
//     Country_DD is a DataDictionary
//     Towns_DD is a DataDictionary
//     Cities_DD is a DataDictionary
//     Payresp_DD is a DataDictionary
//     Areas_DD is a DataDictionary
//     Clients_DD is a DataDictionary
//     Particle_DD is a DataDictionary
//     Wapokat_DD is a DataDictionary
//     Wapomast_DD is a DataDictionary
//     Wax_DD is a DataDictionary
//     Units_DD is a DataDictionary
//     Witemkat_DD is a DataDictionary
//     Fpa_DD is a DataDictionary
//     Item_DD is a DataDictionary
//     Witemx_DD is a DataDictionary
//     Pmoves_DD is a DataDictionary
//     Pmsdtl_DD is a DataDictionary
//     Baxiokat_DD is a DataDictionary
//     Syscurxr_DD is a DataDictionary
//     Pmssxet_DD is a DataDictionary
//     Salesmen_DD is a DataDictionary
//     Constrct_DD is a DataDictionary
//     Cn_DD is a DataDictionary
//     Psxetika_DD is a DataDictionary
//     Tparticl_DD is a DataDictionary
//     Partlfpa_DD is a DataDictionary
//     Pmovesl_DD is a DataDictionary
//     Ptyppar_Ptyppar_Code is a dbFormSub
//     Ptyppar_Ptyppar_Descr is a dbFormSub
//     Particle_Partl_Hmnia is a dbFormSub
//     Ora_Apostolhs is a dbFormSub
//     Particle_Pseira_Seira is a dbComboFormSub
//     FormSub1 is a FormSub
//     Particle_Partl_No is a dbFormSub
//     Clients_Client_ID is a dbFormSub
//     Clients_Client_Name is a dbFormSub
//     Particle_Cn_Code is a dbFormSub
//     Cn_Cn_Descr is a dbFormSub
//     Tropos_Diakin is a dbComboFormSub
//     Topos_Apostolhs is a dbFormSub
//     Skopos_Diakin is a dbComboFormSub
//     Oxhma_Code is a dbFormSub
//     Particle_Oxhma_Descr is a dbFormSub
//     Particle_Odhgos_Name is a dbFormSub
//     Particle_Zone_Id is a dbFormSub
//     Antlia_Code is a dbFormSub
//     Particle_Antlia_Descr is a dbFormSub
//     frmIsClosed is a FormSub
//     Nomisma_Nomisma_code is a dbFormSub
//     Particle_Isotimia is a dbFormSub
//     frmIsotimia is a FormSub
//     frmEURO is a FormSub
//     dbTabDialogSub1 is a dbTabDialogSub
//       dbTabPageSub1 is a dbTabPageSub
//         Pmoves_ is a dbGridSub
//         ExtraContainer is a dbContainer3dSub
//           Pms_Pctdisc is a dbFormSub
//           Pms_Discam is a dbFormSub
//           TextBoxSub28 is a TextBoxSub
//           TextBoxSub29 is a TextBoxSub
//           TextBoxSub30 is a TextBoxSub
//           Pmoves_Sx_Parast is a dbFormSub
//           Pmoves_Sx_Hmnia is a dbFormSub
//           Pmoves_Sx_Seira is a dbFormSub
//           Pmoves_Sx_Arithmos is a dbFormSub
//       dbTabPageSub3 is a dbTabPageSub
//         Pmsdtl_Line1 is a dbFormSub
//         Pmsdtl_Line2 is a dbFormSub
//         Pmsdtl_Line3 is a dbFormSub
//         Pmsdtl_Line4 is a dbFormSub
//         Witemx_Witemx_Code is a dbFormSub
//         Witemx_Witemx_Descr is a dbFormSub
//         Pmoves_Pms_Qty is a dbFormSub
//         Units_Units_Descr is a dbFormSub
//         Particle_Parakrat_Pct is a dbFormSub
//         Particle_Parakrat_Poso is a dbFormSub
//         Particle_Partl_totamad is a dbFormSub
//         TextBoxSub37 is a TextBoxSub
//         TextBoxSub38 is a TextBoxSub
//         TextBoxSub39 is a TextBoxSub
//         TextBoxSub40 is a TextBoxSub
//     btnKleisimo is a ButtonSub
//     btnEktyposh is a ButtonSub
//     AmdiscPms is a dbFormSub
//     totamad is a dbFormSub
//     Vatam is a dbFormSub
//     VatamOnTotal is a dbFormSub
//     Payam is a dbFormSub
//     TextBoxSub1 is a TextBoxSub
//     TextBoxSub3 is a TextBoxSub
//     TextBoxSub6 is a TextBoxSub
//     BtnAnalysh is a ButtonSub
//     Textbox1 is a Textbox
//     Textbox3 is a Textbox
//     Textbox4 is a Textbox
//     Textbox5 is a Textbox
//     Textbox6 is a Textbox
//     TextBoxSub8 is a TextBoxSub
//     TextBoxSub11 is a TextBoxSub
//     BtnMetasxhmatismos is a ButtonSub
//     Textbox7 is a Textbox
//     txtEuro is a TextBoxSub
//     btnTP is a ButtonSub
//     btnPreview is a ButtonSub
//     TextBoxSub15 is a TextBoxSub
//     frmEuro0 is a FormSub
//     TextBoxSub17 is a TextBoxSub
//     TextBoxSub18 is a TextBoxSub
//     TextBoxSub19 is a TextBoxSub
//     TextBoxSub20 is a TextBoxSub
//     TextBoxSub21 is a TextBoxSub
//     FormSub2 is a FormSub
//     TextBoxSub22 is a TextBoxSub
//     TextBoxSub23 is a TextBoxSub
//     TextBoxSub24 is a TextBoxSub
//     TextBoxSub27 is a TextBoxSub
//     btnPelath is a ButtonSub
//     btnApothikh is a ButtonSub
//     Particle_Tropos_Plhromhs is a dbComboFormSub
//     btnSxetika is a ButtonSub
//     frmRed is a FormSub
//     frmGreen is a FormSub
//     TextBoxSub31 is a TextBoxSub
//     TextBoxSub32 is a TextBoxSub
//     txtNomisma is a TextBoxSub
//     TextBoxSub33 is a TextBoxSub
//     TextBoxSub34 is a TextBoxSub
//     Particle_Prohg_ypol is a dbFormSub
//     Particle_Trex_ypol is a dbFormSub
//     Particle_Aitiol is a dbEditSub
//     Particle_Partl_Recr is a dbFormSub
//     txtRecr is a TextBoxSub
//     fPctDisc is a FormSub
//     fPosoDisc is a FormSub
//     ButtonSub1 is a ButtonSub
//     TextBoxSub36 is a TextBoxSub
//     TextBoxSub41 is a TextBoxSub
//     Btnpsxetika is a ButtonSub

// Register all objects
Register_Object AmdiscPms
Register_Object Antlia_Code
Register_Object Areas_DD
Register_Object Areas_DD2
Register_Object Areas_DDWR
Register_Object Baxiokat_DD
Register_Object BtnAnalysh
Register_Object BtnMetasxhmatismos
Register_Object Btnpsxetika
Register_Object ButtonSub1
Register_Object btnApothikh
Register_Object btnEktyposh
Register_Object btnKleisimo
Register_Object btnPelath
Register_Object btnPreview
Register_Object btnSxetika
Register_Object btnTP
Register_Object Cities_DD
Register_Object Cities_DD2
Register_Object Cities_DDWR
Register_Object Clients_Client_ID
Register_Object Clients_Client_Name
Register_Object Clients_DD
Register_Object Clients_DD2
Register_Object Clients_DDWR
Register_Object Cmoves_DD2
Register_Object CN_DD2
Register_Object Cn_Cn_Descr
Register_Object Cn_DD
Register_Object Constrct_DD
Register_Object Country_DD
Register_Object Country_DD2
Register_Object Country_DDWR
Register_Object Ctypkin_DD
Register_Object Ctypkin_DD2
Register_Object Ctypkin_DDWR
Register_Object dbTabDialogSub1
Register_Object dbTabPageSub1
Register_Object dbTabPageSub3
Register_Object ExtraContainer
Register_Object FormSub1
Register_Object FormSub2
Register_Object Fpa_DD
Register_Object Fpa_DD2
Register_Object Fpa_DDWR
Register_Object fPctDisc
Register_Object fPosoDisc
Register_Object frmEURO
Register_Object frmEuro0
Register_Object frmGreen
Register_Object frmIsClosed
Register_Object frmIsotimia
Register_Object frmRed
Register_Object Item_DD
Register_Object Item_DD2
Register_Object Item_DDWR
Register_Object Nomisma_DD
Register_Object Nomisma_DDWR
Register_Object Nomisma_Nomisma_code
Register_Object Ora_Apostolhs
Register_Object Oxhma_Code
Register_Object Particle
Register_Object Particle_Aitiol
Register_Object Particle_Antlia_Descr
Register_Object Particle_Cn_Code
Register_Object Particle_DD
Register_Object Particle_DDWR
Register_Object Particle_Isotimia
Register_Object Particle_Odhgos_Name
Register_Object Particle_Oxhma_Descr
Register_Object Particle_Parakrat_Pct
Register_Object Particle_Parakrat_Poso
Register_Object Particle_Partl_Hmnia
Register_Object Particle_Partl_No
Register_Object Particle_Partl_Recr
Register_Object Particle_Partl_totamad
Register_Object Particle_Prohg_ypol
Register_Object Particle_Pseira_Seira
Register_Object Particle_Trex_ypol
Register_Object Particle_Tropos_Plhromhs
Register_Object Particle_Zone_Id
Register_Object Partlfpa_DD
Register_Object Payam
Register_Object Payresp_DD
Register_Object Payresp_DD2
Register_Object Payresp_DDWR
Register_Object Pmoves_
Register_Object Pmoves_DD
Register_Object Pmoves_DDWR
Register_Object Pmoves_Pms_Qty
Register_Object Pmoves_Sx_Arithmos
Register_Object Pmoves_Sx_Hmnia
Register_Object Pmoves_Sx_Parast
Register_Object Pmoves_Sx_Seira
Register_Object Pmovesl_DD
Register_Object Pms_Discam
Register_Object Pms_Pctdisc
Register_Object Pmsdtl_DD
Register_Object Pmsdtl_Line1
Register_Object Pmsdtl_Line2
Register_Object Pmsdtl_Line3
Register_Object Pmsdtl_Line4
Register_Object PmsSxet_DDWR
Register_Object Pmssxet_DD
Register_Object Pseira_DD
Register_Object Pseira_DD2
Register_Object Pseira_DDWR
Register_Object Psxetika_DD
Register_Object Psxetika_DD2
Register_Object Psxetika_DDWR
Register_Object Ptyppar_DD
Register_Object Ptyppar_DDWR
Register_Object Ptyppar_Ptyppar_Code
Register_Object Ptyppar_Ptyppar_Descr
Register_Object Salesmen_DD
Register_Object Skopos_Diakin
Register_Object Syscurxr_DD
Register_Object TextBoxSub1
Register_Object TextBoxSub11
Register_Object TextBoxSub15
Register_Object TextBoxSub17
Register_Object TextBoxSub18
Register_Object TextBoxSub19
Register_Object TextBoxSub20
Register_Object TextBoxSub21
Register_Object TextBoxSub22
Register_Object TextBoxSub23
Register_Object TextBoxSub24
Register_Object TextBoxSub27
Register_Object TextBoxSub28
Register_Object TextBoxSub29
Register_Object TextBoxSub3
Register_Object TextBoxSub30
Register_Object TextBoxSub31
Register_Object TextBoxSub32
Register_Object TextBoxSub33
Register_Object TextBoxSub34
Register_Object TextBoxSub36
Register_Object TextBoxSub37
Register_Object TextBoxSub38
Register_Object TextBoxSub39
Register_Object TextBoxSub40
Register_Object TextBoxSub41
Register_Object TextBoxSub6
Register_Object TextBoxSub8
Register_Object Textbox1
Register_Object Textbox3
Register_Object Textbox4
Register_Object Textbox5
Register_Object Textbox6
Register_Object Textbox7
Register_Object Topos_Apostolhs
Register_Object Towns_DD
Register_Object Towns_DD2
Register_Object Towns_DDWR
Register_Object Tparticl_DD
Register_Object Tropos_Diakin
Register_Object totamad
Register_Object txtEuro
Register_Object txtNomisma
Register_Object txtRecr
Register_Object Units_DD
Register_Object Units_DD2
Register_Object Units_DDWR
Register_Object Units_Units_Descr
Register_Object Vatam
Register_Object VatamOnTotal
Register_Object Wapokat_DD
Register_Object Wapokat_DD2
Register_Object Wapokat_DDWR
Register_Object Wapomast_DD
Register_Object Wapomast_DD2
Register_Object Wapomast_DDWR
Register_Object Wax_DD
Register_Object Wax_DD2
Register_Object Wax_DDWR
Register_Object Wcmoves_DD2
Register_Object Witemcl_DD2
Register_Object Witemkat_DD
Register_Object Witemkat_DD2
Register_Object Witemkat_DDWR
Register_Object Witemx_DD
Register_Object Witemx_DD2
Register_Object Witemx_DDWR
Register_Object Witemx_Witemx_Code
Register_Object Witemx_Witemx_Descr
Register_Object Wtypkin_DD
Register_Object Wtypkin_DD2
Register_Object Wtypkin_DDWR


//AB/     AppBuild VIEW


    //AB-StoreTopStart
        
    Use bpEnCmvs.dg     // Business process to update Cmoves and Wcmoves
    Use RmhtrTITAN.rv       // Report Ñ°´Áß‡©û™ ´†£¶¢¶öÂ¶¨
    Use PartlFpa.vw
    Open Sysfile
    Use V014.vw
    Use TPArticl.vw
    Use KinApoth.vw
    Use vwCmoves.vw
    Use ShowSx.vw
    Use psxetv.vw
    Use bpAkyrDA.dg
    Use DoEnhGL.dg
    Use DoEnhmGL.dg
    Use DoAkyr.dg
    
    //AB-StoreTopEnd

    //AB-IgnoreStart

    Use dbView.Sub
    Use DFAllEnt.pkg
    Use dbForm.Sub
    Use dbCmbfrm.Sub
    Use Form.Sub
    Use dbTabdlg.Sub
    Use dbGrid.Sub
    Use dbCont3.Sub
    Use Txtbox.Sub
    Use Button.Sub
    Use dbEdit.Sub

    Use CTYPKIN.DD
    Use WTYPKIN.DD
    Use PTYPPAR.DD
    Use PSEIRA.DD
    Use NOMISMA.DD
    Use COUNTRY.DD
    Use TOWNS.DD
    Use CITIES.DD
    Use PAYRESP.DD
    Use AREAS.DD
    Use CLIENTS.DD
    Use PARTICLE.DD
    Use WAPOKAT.DD
    Use WAPOMAST.DD
    Use WAX.DD
    Use UNITS.DD
    Use WITEMKAT.DD
    Use FPA.DD
    Use ITEM.DD
    Use WITEMX.DD
    Use PMOVES.DD
    Use PmsDtl.DD
    Use BAXIOKAT.DD
    Use SYSCURXR.DD
    Use PMSSXET.DD
    Use SALESMEN.DD
    Use CONSTRCT.DD
    Use CN.DD
    Use PSXETIKA.DD
    Use TPARTICL.DD
    Use PARTLFPA.DD
    Use PMOVESL.DD
    
    //AB-IgnoreEnd

    ACTIVATE_VIEW Activate_Particle FOR Particle

    Object Particle is a dbViewSub

        //AB-StoreTopStart
        Object Fpa_DD2 is a Fpa_DataDictionary
        End_Object    // Fpa_DD
        
        Object Ctypkin_DD2 is a Ctypkin_DataDictionary
        End_Object    // Ctypkin_DD
        
        Object Country_DD2 is a Country_DataDictionary
        End_Object    // Country_DD
        
        Object Towns_DD2 is a Towns_DataDictionary
            Set DDO_Server to (Country_DD2(self))
        End_Object    // Towns_DD
        
        Object Cities_DD2 is a Cities_DataDictionary
            Set DDO_Server to (Towns_DD2(self))
        End_Object    // Cities_DD
        
        Object Payresp_DD2 is a Payresp_DataDictionary
            Set piCheckPlaf to 0
        End_Object    // Payresp_DD
        
        Object Areas_DD2 is a Areas_DataDictionary
        End_Object    // Areas_DD
        
        Object Clients_DD2 is a Clients_DataDictionary
            Set DDO_Server to (Cities_DD2(self))
            Set DDO_Server to (Payresp_DD2(self))
            Set DDO_Server to (Areas_DD2(self))
            Set piCheckPlaf to 0
        End_Object    // Clients_DD
        
        Object Cmoves_DD2 is a Cmoves_Datadictionary
            Set DDO_Server to (Ctypkin_DD2(self))
            Set DDO_Server to (Clients_DD2(self))
            Set piFromBP to 1
        End_Object
        
        Object Wtypkin_DD2 is a Wtypkin_DataDictionary
        End_Object    // Wtypkin_DD
        
        Object Wapokat_DD2 is a Wapokat_DataDictionary
        End_Object    // Wapokat_DD
        
        Object Wapomast_DD2 is a Wapomast_DataDictionary
            Set DDO_Server to (Wapokat_DD2(self))
        End_Object    // Wapomast_DD
        
        Object Wax_DD2 is a Wax_DataDictionary
            Set DDO_Server to (Wapomast_DD2(self))
        End_Object    // Wax_DD
        
        Object Units_DD2 is a Units_DataDictionary
        End_Object    // Units_DD
        
        Object Witemkat_DD2 is a Witemkat_DataDictionary
        End_Object    // Witemkat_DD
        
        Object Item_DD2 is a Item_DataDictionary
            Set DDO_Server to (Units_DD2(self))
            Set DDO_Server to (Witemkat_DD2(self))
            Set DDO_Server to (Fpa_DD2(self))
        End_Object    // Item_DD
        
        Object Witemx_DD2 is a Witemx_DataDictionary
            Set DDO_Server to (Item_DD2(self))
        End_Object    // Witemx_DD
        
        Object Witemcl_DD2 is a Witemcl_DataDictionary
            Set DDO_Server to (Item_DD2(self))
        End_Object    // Witemcl_DD
        
        Object Wcmoves_DD2 is a Wcmoves_DataDictionary
            Set DDO_Server to (Wax_DD2(self))
            Set DDO_Server to (Wtypkin_DD2(self))
            Set DDO_Server to (Witemx_DD2(self))
        End_Object    // Wcmoves_DD
        
        Object Wcmoves_DD2 is a Wcmoves_Datadictionary
        End_Object
        
        
        Set Verify_Data_Loss_Msg TO Get_No_Confirmation
        Set Verify_Delete_Msg    TO Get_No_Confirmation
        Set Verify_Save_Msg      TO Get_No_Confirmation
        Set Verify_Exit_Msg      TO Get_No_confirmation
        
        Property String     psNom0              Public ''
        Property String     psNom00             Public ''
        Property String     psNomR              Public ''
        Property String     psOldNomismaCode    Public ''
        Property String     psPtyppar           Public ''
        Property String     psPtypparSysx       Public ''
        Property String     psSeira             Public ''
        Property String     psIsSeiraAutoNum    Public ''
        Property String     psClientRecr        Public ''
        Property String     psCNDescr           Public ''
        Property String     psClientID          Public ''
        Property String     psFindParticleRecr  Public ''
        Property Integer    piFromTparticl      Public  0
        Property Integer    piSfalma            Public  0
        Property String     psPartlRecr         Public ''
        
        Procedure Kleise_Ta_Pedia
            Integer iNoOfLines iRecn
            Get Field_Current_Value Of Particle_DD Field ;
                Particle.Partl_NoOfLines                        To        iNoOfLines
            Set Enabled_State   Of Ptyppar_Ptyppar_Code         To       (iNoOfLines=0)
            Set Item_Option     Of Particle_Partl_Hmnia Item 0  To NoPut (iNoOfLines<>0)
            Set Enabled_State   Of Particle_Pseira_Seira        To       (iNoOfLines=0)
            Set Enabled_State   Of Particle_Partl_No            To       (iNoOfLines=0)
            Set Enabled_State   Of Particle_Partl_Recr          To       (iNoOfLines=0)
            Set Enabled_State   Of Clients_Client_ID            To       (iNoOfLines=0)
            Set Enabled_State   Of Particle_CN_Code             To       (iNoOfLines=0)
            Set Enabled_State   Of Nomisma_Nomisma_Code         To       (iNoOfLines=0)
            Set Enabled_State   Of Particle_Isotimia            To       (iNoOfLines=0)
        End_procedure
        
        Procedure Anoixe_Ta_Pedia
            Integer iEkleise iRecn
            Get Field_Current_Value Of Particle_DD Field ;
                Particle.Partl_Ekleise                          To        iEkleise
            Set Enabled_State   Of Ptyppar_Ptyppar_Code         To       (iEkleise=0)
            Set Item_Option     Of Particle_Partl_Hmnia Item 0  To NoPut (iEkleise<>0)
            Set Enabled_State   Of Particle_Pseira_Seira        To       (iEkleise=0)
            Set Enabled_State   Of Particle_Partl_No            To       (iEkleise=0)
            Set Enabled_State   Of Particle_Partl_Recr          To       (iEkleise=0)
            Set Enabled_State   Of Clients_Client_ID            To       (iEkleise=0)
            Set Enabled_State   Of Particle_CN_Code             To       (iEkleise=0)
            Set Enabled_State   Of Nomisma_Nomisma_Code         To       (iEkleise=0)
            Set Enabled_State   Of Particle_Isotimia            To       (iEkleise=0)
        End_procedure
        
        Procedure Set_The_Euro
            Integer iGridID iAmount iBreak iPmovesID
            String  sCode sOld sCodeApo sCodeEos
            Number  nPoso nPosoEuro nIsotimia
            Date    dHmnia
        
            If (Current_Record(Particle_DD(Particle(Self)))) Begin
                Move SysCurXr.C_Code00                                              to sCodeEos
                Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Nomisma_Code  to sCodeApo
                Get Field_Current_Value Of Nomisma_DD   Field Nomisma.KL_ISOT_EURO  to nIsotimia
                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Hmnia  to dHmnia
                Get Field_Current_Value Of Particle_DD  Field Particle.PARTL_PAYAM  to nPoso
                If ((Trim(sCodeApo)<>'')    And (nIsotimia     <> 0)    And ;
                    (nPoso         <> 0)    And (Trim(sCodeEos)<>'')    And ;
                    (dHmnia        <>'')) Begin
                        Get fngConvertPoso sCodeApo nPoso sCodeEos dHmnia nIsotimia to nPosoEuro
        
                        If (nPosoEuro<>0) Set Value Of frmEuro0 Item 0 to nPosoEuro
                        Clear Nomisma
                        Move sCodeApo to Nomisma.Nomisma_Code
                        Find Eq Nomisma By Index.1
                        Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
                End
                Else Set Value Of frmEuro0 Item 0 to 0
            End
            Else Set Value Of frmEuro0 Item 0 to 0
        End_Procedure
        
        Procedure Enhm_Particle_Amounts
            Number nAMDISCPMS nTotDiscPc nTotAmAd nExtra nGenAm
            Number nDiscAm  nTotambd nExtraVatP nVatAm nTotalVatPoso nGenFpa
            Number nExtraVat nDisc_Vat_Pct nDisc_Vat_Poso
        
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_AMDISCPMS   to nAMDISCPMS
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_TotDiscPc   to nTotDiscPc
            Set Field_Current_Value Of Particle_DD Field Particle.Partl_Discam      to (nAmdiscpms+nTotdiscpc)
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_DiscAm      to nDiscAm
        
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_DiscAm      to nDiscAm
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Totambd     to nTotambd
            Set Field_Current_Value Of Particle_DD Field Particle.Partl_TotAmAd     to (nTotAmBd-nDiscAm)
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_TotAmAd     to nTotAmAd
        
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_TotAmAd     to nTotAmAd
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Extra       to nExtra
            Set Field_Current_Value Of Particle_DD Field Particle.Partl_GenAm       to (nTotAmad+nExtra)
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_GenAm       to nGenAm
        
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_ExtraVatP   to nExtraVatP
            If (nExtraVatP=0) Begin
                Move 18 to nExtraVatP
                Set Field_Current_Value Of Particle_DD Field Particle.Partl_ExtraVatP   to 18
            End
            Set Field_Changed_Value Of Particle_DD Field Particle.Partl_ExtraVat    to (Round(nExtra*nExtraVatP/100))
        
        
            Get Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Pct      to nDisc_Vat_Pct
            If (nDisc_Vat_Pct=0) Begin
                Move 18 to nDisc_Vat_Pct
                Set Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Pct   to 18
            End
            Set Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Poso     to (Round(nTotDiscPC*nDisc_Vat_Pct/100))
        
        
            Get Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Poso     to nDisc_Vat_Poso
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_VatAm       to nVatAm
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_ExtraVat    to nExtraVat
        
            Set Field_Current_Value Of Particle_DD Field Particle.Total_Vat_Poso    to (nVatAm-nDisc_Vat_Poso+nExtraVat)
        
            Get Field_Current_Value Of Particle_DD Field Particle.Total_Vat_Poso    to nTotalVatPoso
        
            Set Field_Current_Value Of Particle_DD Field Particle.Partl_PayAm ;
                to (nGenAm+nTotalVatPoso)
        
            Send Set_The_Euro
        End_Procedure
        
        Object Pseira_DD2 is a Pseira_DataDictionary
            Begin_Constraints
                String sRecr
                Get psPtyppar to sRecr
                Constrain Pseira.Ptyppar_recr eq sRecr
            End_Constraints
        End_Object    // Pseira_DD2
        
        Object CN_DD2 is a CN_DataDictionary
        End_Object    // CN_DD2
        
        Object Psxetika_DD2 is a Psxetika_DataDictionary
        End_Object    // Psxetika_DD2
        
        /////////////////##########################/////////////////
        Object Ctypkin_DDWR is a Ctypkin_DataDictionary
        End_Object    // Ctypkin_DDWR
        
        Object Wtypkin_DDWR is a Wtypkin_DataDictionary
        End_Object    // Wtypkin_DDWR
        
        Object Ptyppar_DDWR is a Ptyppar_DataDictionary
            Set DDO_Server to (Ctypkin_DDWR(self))
            Set DDO_Server to (Wtypkin_DDWR(self))
        End_Object    // Ptyppar_DDWR
        
        Object Pseira_DDWR is a Pseira_DataDictionary
            Set DDO_Server to (Ptyppar_DDWR(self))
        End_Object    // Pseira_DDWR
        
        Object Nomisma_DDWR is a Nomisma_DataDictionary
        End_Object    // Nomisma_DDWR
        
        Object Country_DDWR is a Country_DataDictionary
        End_Object    // Country_DDWR
        
        Object Towns_DDWR is a Towns_DataDictionary
            Set DDO_Server to (Country_DDWR(self))
        End_Object    // Towns_DDWR
        
        Object Cities_DDWR is a Cities_DataDictionary
            Set DDO_Server to (Towns_DDWR(self))
        End_Object    // Cities_DDWR
        
        Object Payresp_DDWR is a Payresp_DataDictionary
            Set piCheckPlaf to 0
        End_Object    // Payresp_DDWR
        
        Object Areas_DDWR is a Areas_DataDictionary
        End_Object    // Areas_DDWR
        
        Object Clients_DDWR is a Clients_DataDictionary
            Set DDO_Server to (Cities_DDWR(self))
            Set DDO_Server to (Payresp_DDWR(self))
            Set DDO_Server to (Areas_DDWR(self))
            Set piCheckPlaf to 0
        End_Object    // Clients_DDWR
        
        Object Particle_DDWR is a Particle_DataDictionary
            Set DDO_Server to (Ptyppar_DDWR(self))
            Set DDO_Server to (Nomisma_DDWR(self))
            Set DDO_Server to (Clients_DDWR(self))
        End_Object    // Particle_DDWR
        
        Object Wapokat_DDWR is a Wapokat_DataDictionary
        End_Object    // Wapokat_DDWR
        
        Object Wapomast_DDWR is a Wapomast_DataDictionary
            Set DDO_Server to (Wapokat_DDWR(self))
        End_Object    // Wapomast_DDWR
        
        Object Wax_DDWR is a Wax_DataDictionary
            Set DDO_Server to (Wapomast_DDWR(self))
        End_Object    // Wax_DDWR
        
        Object Units_DDWR is a Units_DataDictionary
        End_Object    // Units_DDWR
        
        Object Witemkat_DDWR is a Witemkat_DataDictionary
        End_Object    // Witemkat_DDWR
        
        Object Fpa_DDWR is a Fpa_DataDictionary
        End_Object    // Fpa_DDWR
        
        Object Item_DDWR is a Item_DataDictionary
            Set DDO_Server to (Units_DDWR(self))
            Set DDO_Server to (Witemkat_DDWR(self))
            Set DDO_Server to (Fpa_DDWR(self))
        End_Object    // Item_DDWR
        
        Object Witemx_DDWR is a Witemx_DataDictionary
            Set DDO_Server to (Item_DDWR(self))
        End_Object    // Witemx_DDWR
        
        Object Pmoves_DDWR is a Pmoves_DataDictionary
            Set DDO_Server to (Wax_DDWR(self))
            Set DDO_Server to (Witemx_DDWR(self))
            Set DDO_Server to (Particle_DDWR(self))
            Set piCheckZeroFpa to True
        End_Object    // Pmoves_DDWR
        
        Object Psxetika_DDWR is a Psxetika_DataDictionary
            Set DDO_Server to (Particle_DDWR(self))
        End_Object    // Psxetika_DD2
        
        Object PmsSxet_DDWR is a Psxetika_DataDictionary
            Set DDO_Server to (Pmoves_DDWR(self))
        End_Object    // Psxetika_DD2
        /////////////////##########################/////////////////
        
        Property String psModule Public ''
        
        Procedure Epimerise_Genikh_Ekptosh Number anPCT
            If (anPct) Begin
                Send Find to Pmoves_DD First_Record 0
                While (Found)
                    Set Field_Changed_Value Of Pmoves_DD Field Pmoves.Pms_pctdisc to anPct
                    Send Request_Save to Pmoves_DD
                    Send Find to Pmoves_DD Next_Record 0
                Loop
            End
            Send Find to Pmoves_DD First_Record 0
            Send Info_Box 'Ü £ú´ò≠¶®· ß¶©¶©´¶Á ‚°ß´‡©û™\n©´ò úß†£‚®¶¨™ úÂõû ¶¢¶°¢û®Èüû°ú' 'è¢û®¶≠¶®Âò'
        End_procedure
        
        Register_Object oStatusBarSub
        
        //AB-StoreTopEnd

        Set Label to "è‡¢„©ú†™ / Äö¶®‚™"
        Set Size to 292 527
        Set Location to 2 3

        //AB-DDOStart

        Object Ctypkin_DD is a Ctypkin_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Ctypkin_DD

        Object Wtypkin_DD is a Wtypkin_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Wtypkin_DD

        Object Ptyppar_DD is a Ptyppar_DataDictionary
            Set DDO_Server to (Ctypkin_DD(self))
            Set DDO_Server to (Wtypkin_DD(self))

            //AB-StoreStart
                                                                
            Set Foreign_Field_Options  DD_KEYFIELD   To DD_Clear_Field_Options DD_FINDREQ
            //Set Foreign_Field_Options  DD_INDEXFIELD To DD_Clear_Field_Options DD_FINDREQ
            
            Procedure OnConstrain
                Forward Send OnConstrain
                If (psModule(Self)<>'') Begin
                    Constrain Ptyppar.Ptyppar_Module eq (psModule(Self))
                End
            End_Procedure
            
            //AB-StoreEnd

        End_Object    // Ptyppar_DD

        Object Pseira_DD is a Pseira_DataDictionary

            //AB-StoreTopStart
                                                                
            //AB-StoreTopEnd

            Set DDO_Server to (Ptyppar_DD(self))

            //AB-StoreStart
                                                                
            Begin_Constraints
                String sRecr
                Get psPtyppar to sRecr
                If (sRecr<>'') Constrain Pseira.Ptyppar_recr eq sRecr
            End_Constraints
            
            //AB-StoreEnd

        End_Object    // Pseira_DD

        Object Nomisma_DD is a Nomisma_DataDictionary

            //AB-StoreStart
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Nomisma_DD

        Object Country_DD is a Country_DataDictionary

            //AB-StoreStart
                                                                
            //AB-StoreEnd

        End_Object    // Country_DD

        Object Towns_DD is a Towns_DataDictionary
            Set DDO_Server to (Country_DD(self))

            //AB-StoreStart
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Towns_DD

        Object Cities_DD is a Cities_DataDictionary
            Set DDO_Server to (Towns_DD(self))

            //AB-StoreStart
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Cities_DD

        Object Payresp_DD is a Payresp_DataDictionary
        End_Object    // Payresp_DD

        Object Areas_DD is a Areas_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Areas_DD

        Object Clients_DD is a Clients_DataDictionary
            Set DDO_Server to (Cities_DD(self))
            Set DDO_Server to (Payresp_DD(self))
            Set DDO_Server to (Areas_DD(self))

            //AB-StoreStart
                                                                
            Begin_Constraints
                     If (psModule(Self)='01') Constrain Clients.is_Client        Eq '1'
                Else If (psModule(Self)='02') Constrain Clients.is_Promhtheyths  Eq '1'
            End_Constraints
            
            //AB-StoreEnd

        End_Object    // Clients_DD

        Object Particle_DD is a Particle_DataDictionary

            //AB-StoreTopStart
                                                                
            Property Integer piNoChangesAllowed Public 0
            Property Integer piHasMetasx        Public 0
            
            //AB-StoreTopEnd

            Set DDO_Server to (Ptyppar_DD(self))
            Set DDO_Server to (Nomisma_DD(self))
            Set DDO_Server to (Clients_DD(self))

            //AB-StoreStart
                                                                
            Procedure OnConstrain
                Forward Send OnConstrain
                Constrain Particle.Company_Code  eq SysCurXR.Company_Code
                Constrain Particle.Branch_Code   eq SysCurXR.Branch_Code
                Constrain Particle.Year_Year     eq SysCurXR.Year_Year
                If (psModule(Self)<>'') Begin
                    Constrain Particle.Partl_Module eq (psModule(Self))
                End
            End_Procedure
            
            Procedure New_Current_Record  Integer iOldRec  Integer iNewRec
                Forward Send New_Current_Record  iOldRec iNewRec
                Set piHasMetasx to ((Particle.Timol_Ypol=0) And (Particle.Timol_Qty>0))
            End_Procedure   // New_Current_Record
            
            Procedure Request_Save
                Integer iRecnum
                Move Particle.Recnum to iRecnum
                If ((piNoChangesAllowed(Self)<>1) And (piHasMetasx(Self)<>1)) Begin
                    Forward Send Request_Save
                End
                Else Begin
                    If (piHasMetasx(Self)=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                    Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                    If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                End
            End_Procedure
            
            // js 30/08/2002 Allaxe o tropos diaxeirishs ton sxetikon parastatikon
            // tora ta Psxetika ftiaxnontai kai diagrafontai apo thn klash tou PmsSxet
            // h kata thn diadikasia rolarismatos parastatikon (Gia thn diagrafh)
            // Ara h parakato routina einai axrhsth.
            Procedure Request_Delete
                Integer iErr isClosed isPrinted isReadOnly iRecnum
                Move Particle.Recnum to iRecnum
                If (piNoChangesAllowed(Self)<>1) Begin
                    Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ektyposh to isPrinted
                    If (Not(isPrinted)) Begin
                        If (piHasMetasx(Self)=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\nÉú§ úß†´®‚ßú´ò† û õ†òö®ò≠„" "è¢û®¶≠¶®Âò"
                        Else Forward Send Request_Delete to Particle_DD
                    End
                    Else Begin
                        Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† ú°´¨ß‡üúÂ.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                        If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                    End
                End
                Else Begin
                    Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                    If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                End
            End_Procedure
            
            //AB-StoreEnd

        End_Object    // Particle_DD

        Object Wapokat_DD is a Wapokat_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Wapokat_DD

        Object Wapomast_DD is a Wapomast_DataDictionary
            Set DDO_Server to (Wapokat_DD(self))

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Wapomast_DD

        Object Wax_DD is a Wax_DataDictionary

            //AB-StoreTopStart
            Property Integer    piYear          Public  0
            Property String     psCompany       Public ''
            Property String     psBranch        Public ''
            
            Property String     psWapokat       Public ''
            
            //AB-StoreTopEnd

            Set DDO_Server to (Wapomast_DD(self))

            //AB-StoreStart
                                                                
            //Begin_Constraints
            //    Integer iMustConstrain iYear
            //    String  sCompany sBranch sWapokat
            //    Get psWapokat  to  sWapokat
            //    Constrain Wax.Company_Code  eq sCompany
            //    Constrain Wax.Branch_Code   eq sBranch
            //    Constrain Wax.Year_Year     eq iYear
            //    Constrain Wax.Wapokat_Code  eq sWapokat
            //End_Constraints
            
            Begin_Constraints
                Integer iMustConstrain iYear
                String  sCompany sBranch sWapokat
                Get piYear     to  iYear
                Get psCompany  to  sCompany
                Get psBranch   to  sBranch
                Get psWapokat  to  sWapokat
                If (sCompany<>'') Begin
                    Constrain Wax.Company_Code eq sCompany
                    If (sBranch<>'') Begin
                        Constrain Wax.Branch_Code eq sBranch
                        If (iYear<>0) Begin
                            Constrain Wax.Year_Year eq iYear
                            If (sWapokat<>'') Begin
                                Constrain Wax.Wapokat_Code eq sWapokat
                            End
                        End
                    End
                End
            End_Constraints
            
            
            
            
            
            
            
            
            
            //AB-StoreEnd

        End_Object    // Wax_DD

        Object Units_DD is a Units_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Units_DD

        Object Witemkat_DD is a Witemkat_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Witemkat_DD

        Object Fpa_DD is a Fpa_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Fpa_DD

        Object Item_DD is a Item_DataDictionary
            Set DDO_Server to (Units_DD(self))
            Set DDO_Server to (Witemkat_DD(self))
            Set DDO_Server to (Fpa_DD(self))

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Item_DD

        Object Witemx_DD is a Witemx_DataDictionary
            Set DDO_Server to (Item_DD(self))

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Witemx_DD

        Object Pmoves_DD is a Pmoves_DataDictionary

            //AB-StoreTopStart
            Property Integer piNoChangesAllowed Public 0
            //Property number  pnoqty             Public 0 //èò®òööú¢Âú™ G.
            
            //AB-StoreTopEnd

            Set DDO_Server to (Wax_DD(self))
            Set DDO_Server to (Witemx_DD(self))
            Set DDO_Server to (Particle_DD(self))
            Set Constrain_File to Particle.File_Number

            //AB-StoreStart
                                                                
            Set piCheckZeroFpa to True
            
            Procedure Request_Save
                Integer iRecnum ifinish
                number  nqty
                date ddate
                string srecr
                Move Pmoves.Recnum to iRecnum
                If (piNoChangesAllowed(Self)<>1) Begin
                   Forward Send Request_Save
                end
                Else Send Display_UI
            End_Procedure
            
            Procedure Request_Delete
                Integer iErr isClosed isPrinted isReadOnly iRecnum
                number nqty
                Move Pmoves.Recnum to iRecnum
                If (piNoChangesAllowed(Self)<>1) Begin
                    Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ektyposh to isPrinted
                    If (Not(isPrinted)) Begin
                        Forward Send Request_Delete
                    End
                    Else Begin
                        Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† ú°´¨ß‡üúÂ.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                        Send Beginning_Of_Data to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) True
                    End
                End
                Else Begin
                    Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                    Send Beginning_Of_Data to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) True
                End
            
            End_Procedure
            
            Procedure delete_main_file
                 //// èò®òööú¢Âú™ G.
                Integer iErr isClosed isPrinted isReadOnly iRecnum
                number nqty
                Move Pmoves.Recnum to iRecnum
                If (piNoChangesAllowed(Self)<>1) Begin
                   Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ektyposh to isPrinted
                   If (Not(isPrinted)) begin
                      if (pmoves.clorderd_recr <> '') begin //Ä§ Pmoves Éû£†¶¨®ö„üû°ú ÄßÊ èò®òööú¢Âú™
                        move pmoves.clorderd_recr to clorderd.recr
                        find eq clorderd by index.2 // recr
                        if (found =1) begin
                           move (clorderd.ypol_qty + pmoves.pms_qty) to clorderd.ypol_qty
                           move (clorderd.rial_qty - pmoves.pms_qty) to clorderd.rial_qty
                           move ''                         to clorderd.rial_date
                           saverecord clorderd
                           move clorderd.clorder_recr to clorder.recr
                           find eq clorder by index.2 // recr
                           if ((found = 1) and (clorder.finish = 1)) begin
                             move 0   to clorder.finish
                             move ''  to clorder.rial_date
                             saverecord clorder
                           end
                        end
                      end
                      forward send delete_main_file
                   end
                End
            //
            End_Procedure
            
            
            
            //AB-StoreEnd

        End_Object    // Pmoves_DD

        Object Pmsdtl_DD is a Pmsdtl_DataDictionary

            //AB-StoreTopStart
                                                                
            //AB-StoreTopEnd

            Set DDO_Server to (Pmoves_DD(self))
            Set Constrain_File to Pmoves.File_Number

            //AB-StoreStart
                                                                
            Set Auto_Fill_State to true
            
            
            
            //AB-StoreEnd

        End_Object    // Pmsdtl_DD

        Object Baxiokat_DD is a Baxiokat_DataDictionary
        End_Object    // Baxiokat_DD

        Object Syscurxr_DD is a Syscurxr_DataDictionary

            //AB-StoreStart
                                                                
                                                                
                                                                
                                                                
            //AB-StoreEnd

        End_Object    // Syscurxr_DD

        Object Pmssxet_DD is a PmsSxet_DataDictionary
            Set DDO_Server to (Pmoves_DD(self))
            Set Constrain_File to Pmoves.File_Number
        End_Object    // Pmssxet_DD

        Object Salesmen_DD is a Salesmen_DataDictionary
        End_Object    // Salesmen_DD

        Object Constrct_DD is a Constrct_DataDictionary
        End_Object    // Constrct_DD

        Object Cn_DD is a Cn_DataDictionary
            Set DDO_Server to (Clients_DD(self))
            Set DDO_Server to (Salesmen_DD(self))
            Set DDO_Server to (Constrct_DD(self))
            Set Constrain_File to Clients.File_Number

            //AB-StoreStart
                                                                
            Procedure Constrain
                If (psModule(Self)='01')    Set Constrain_File to Clients.File_Number
                Else                        Set Constrain_File to 0
                Forward Send Constrain
            End_Procedure
            
            
            
            
            
            //AB-StoreEnd

        End_Object    // Cn_DD

        Object Psxetika_DD is a Psxetika_DataDictionary
            Set DDO_Server to (Particle_DD(self))
            Set Constrain_File to Particle.File_Number

            //AB-StoreStart
                                                                
            Procedure Request_Save
            End_Procedure
            
            
            
            //AB-StoreEnd

        End_Object    // Psxetika_DD

        Object Tparticl_DD is a Tparticl_DataDictionary
            Set DDO_Server to (Particle_DD(self))
            Set DDO_Server to (Baxiokat_DD(self))
            Set Constrain_File to Particle.File_Number
        End_Object    // Tparticl_DD

        Object Partlfpa_DD is a Partlfpa_DataDictionary
            Set DDO_Server to (Particle_DD(self))
            Set DDO_Server to (Fpa_DD(self))
            Set Constrain_File to Particle.File_Number
        End_Object    // Partlfpa_DD

        Object Pmovesl_DD is a Pmovesl_DataDictionary
            Set DDO_Server to (Wax_DD(self))
            Set DDO_Server to (Witemx_DD(self))
            Set DDO_Server to (Particle_DD(self))
            Set Constrain_File to Particle.File_Number
        End_Object    // Pmovesl_DD

        Set Main_DD to (Particle_DD(self))
        Set Server to (Particle_DD(self))

        //AB-DDOEnd

        Object Ptyppar_Ptyppar_Code is a dbFormSub

            //AB-StoreTopStart
                                                                
                                                                
            //AB-StoreTopEnd

            Entry_Item Ptyppar.Ptyppar_code
            Set Size to 13 66
            Set Location to 2 61
            Set Label_Col_Offset to 4
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOn
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            
            Procedure Prompt
                Set psModule Of (sl012(self)) to (psModule(Self))
                Set Modal_State Of (sl012(Self)) to True
                Forward Send Prompt
                Send Rythmise_Thn_Seira
            End_procedure
            
            Procedure Find_Next
                Forward Send Find_Next
                Send Rythmise_Thn_Seira
            End_procedure
            
            Procedure Find_Previous
                Forward Send Find_Previous
                Send Rythmise_Thn_Seira
            End_procedure
            
            Procedure Find_Ge
                Forward Send Find_Ge
                Send Rythmise_Thn_Seira
            End_procedure
            
            Procedure OnKillFocus
                Forward Send OnKillFocus
                Send Preset_Nomisma
                Send Rythmise_Thn_Seira
            End_Procedure
            
            Procedure Exiting
                String sRecr sCode
                Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Ptyppar_Recr to sRecr
                If (trim(sRecr)='') Begin
                    Get Value Item 0 to sCode
                    If (Trim(sCode)<>'') Begin
                        Clear Ptyppar
                        Move Syscurxr.Company_Code  to Ptyppar.Company_Code
                        Move Syscurxr.Branch_Code   to Ptyppar.Branch_Code
                        Move Syscurxr.Year_Year     to Ptyppar.Year_Year
                        Move (Trim(sCode))          to Ptyppar.Ptyppar_Code
                        Find Eq Ptyppar By Index.1 // Ptyppar:Index.1:Comp+Branch+Year+Code
                        If (Found) Begin
                            Send Request_Find to Ptyppar_DD Eq PtypPar.File_Number 1
                            Forward Send Exiting
                        End
                        Else Begin
                            Send Stop_Box 'Ä§Áßò®°´¶ èò®ò©´ò´†°Ê' 'ë≠·¢£ò'
                        End
                    End
                End
                Else Forward Send Exiting
                Send Preset_Nomisma
                Send Rythmise_Thn_Seira
            End_Procedure
            
            Procedure Entering00
                String sRecr sCode
                If (psFindParticleRecr(Self)='') Send Clear to Ptyppar_DD
                Forward Send Entering
            End_Procedure
            
            
            
            //AB-StoreEnd

        End_Object    // Ptyppar_Ptyppar_Code

        Object Ptyppar_Ptyppar_Descr is a dbFormSub
            Entry_Item Ptyppar.Ptyppar_descr
            Set Size to 13 282
            Set Location to 2 135
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Enabled_State to FALSE
            Set Form_TypeFace Item 0 to "MS Sans Serif"
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE

            //AB-StoreStart
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            //AB-StoreEnd

        End_Object    // Ptyppar_Ptyppar_Descr

        Object Particle_Partl_Hmnia is a dbFormSub

            //AB-StoreTopStart
                        
                        
            //AB-StoreTopEnd

            Entry_Item Particle.Partl_hmnia
            Set Size to 13 66
            Set Location to 18 61
            Set Label_Col_Offset to 4
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOn
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                        
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            Procedure Prompt
                String  sClient sPtypPar
                Date    dHmnia dHm
            
                Set Modal_State Of (sl014(self)) to True
            
                Get Field_Current_Value Of Clients_DD Field Clients.Client_ID       to sClient
                Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Ptyppar_Code    to sPtyppar
                Get Value Item 0                                                    to dHmnia
            
                Set psModule  Of sl014 to (psModule(Self))
            
                Set Value Of (FormSub1    (sl014(Self))) Item 0 to sPtyppar
                Set Value Of (FormSub2    (sl014(Self))) Item 0 to sClient
                Set Value Of (cSyDateForm1(sl014(Self))) Item 0 to dHmnia
            
                Forward Send Prompt
            
                Send Show_CN
                Send Show_Seira
                Send Rythmise_Thn_Seira
                Send Set_The_Decimal_Points
                Send Del_Psxetika
            End_Procedure
            
            Procedure Refresh Integer iMode
                Integer iLockMe iRecn
                String  sRecr sEkleise sSysx sParticleRecr sSeira
                String  sPtypparCode sPtypparWhat sSysxRecr sPtypparRecr
                Integer iRecnm
                Date    dHmnia dHmnia2 dLast
            
                Forward Send Refresh iMode
            
                Clear Branch
                Move Syscurxr.Company_Code  to Branch.Company_Code
                Move Syscurxr.Branch_Code   to Branch.Branch_Code
                Find Eq Branch By Index.1
                Move Branch.Last_Hmnia_Ekt  to dLast
            
                Set psWapokat Of (Wax(Self))    to ''
                Set psWapokat Of Wax_DD         to ''
                Send Rebuild_Constraints        to Wax_DD
            
                Set Enabled_State   Of BtnEktyposh          to True
                Set Enabled_State   Of BtnKleisimo          to True
                Set Enabled_State   Of BtnTP                to True
                Set Enabled_State   Of BtnPreview           to True
                Set Enabled_State   Of BtnMetasxhmatismos   to True
                Set Enabled_State   Of BtnSxetika           to True
            
                Move (Particle.Partl_Ektyposh='1')  to iLockMe
                Move Particle.Recnum                to irecn
            
                Set Enabled_State   Of BtnPreview   to (iRecn>0)
                Set Enabled_State   Of BtnAnalysh   to (iRecn>0)
                Set Enabled_State   Of BtnSxetika   to (iRecn>0)
            
                Set Enabled_State   Of BtnPelath    to ((Particle.Cmoves_Recr<>'') And (Particle.Partl_Ekleise='1'))
            
                Move Pmoves.Recnum             to iRecnm
                Move Pmoves.WCmoves_Recr       to sRecr
                Move Particle.Partl_Ekleise    to sEkleise
            
                Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                    ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))
            
                Move Particle.Partl_Recr to sRecr
                Clear Psxetika
                Move sRecr to Psxetika.Psx_Partl_Recr
                Find GT Psxetika By Index.3 // Psx_Partl_Recr+Partl_Recr
                Set Enabled_State Of (BtnSxetika(Particle(Self))) to ;
                    ((Found=1) And (Psxetika.Psx_Partl_Recr=sRecr))
            
                If (iLockMe) Begin
            
                    Set piNoChangesAllowed Of Particle_DD   to True
                    Set piNoChangesAllowed Of Pmoves_DD     to True
            
                    Set No_Create_State Of (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) to True
                    Set Enabled_State Of BtnMetasxhmatismos to (Particle.Partl_Timol=0)
            
            
                    If (Particle.Partl_Ekleise='1') Begin
                        Set Label   Of BtnKleisimo to 'Ä§¶†ö£ò'
                        Set Bitmap  Of BtnKleisimo to 'Open1.bmp'
                        Set Enabled_State   Of BtnTP        to True
                    End
                    else Begin
                        set label   of btnkleisimo to "â¢úÂ©†£¶"
                        Set Bitmap  Of BtnKleisimo to 'Close1.bmp'
                        Set Enabled_State   Of BtnTP        to False
                    End
            
                    Set Enabled_State   Of BtnEktyposh          to (Particle.No_Print_Module=0)
                    Set Enabled_State                           Of BtnKleisimo to False
                    Set Color                                   Of frmIsClosed to clRed
                End
                Else Begin
                    Set piNoChangesAllowed Of Particle_DD       to ((Particle.Partl_Ekleise='1') Or (Particle.Partl_Timol=1))
                    Set piNoChangesAllowed Of Pmoves_DD         to ((Particle.Partl_Ekleise='1') Or (Particle.Partl_Timol=1))
            
                    Set Enabled_State   Of BtnEktyposh          to ;
                        ((Particle.Partl_Ekleise  ='1')     And ;
                         (Particle.No_Print_Module= 0 )     And ;
                         (Particle.Partl_Hmnia>=dLast))
            
                    Set Enabled_State   Of BtnMetasxhmatismos   to ((Particle.Partl_Ekleise='1') And (Particle.Timol_Ypol>0))
                    // 03/09/2002
                    Set Enabled_State   Of BtnKleisimo          to ((irecn>0) And (Particle.Partl_Timol=0))
            
                    If (Particle.Partl_Ekleise='1') Begin
                        Set Color           Of frmIsClosed to clRed
                        set label           Of btnkleisimo to 'Ä§¶†ö£ò'
                        Set Bitmap          Of BtnKleisimo to 'Open1.bmp'
                        Set Enabled_State   Of BtnTP       to True
                    End
                    Else Begin
                        Set Color           Of frmIsClosed to clLime
                        set label           Of btnkleisimo to "â¢úÂ©†£¶"
                        Set Bitmap          Of BtnKleisimo to 'Close1.bmp'
                        Set Enabled_State   Of BtnTP       to False
                    End
                    Set No_Create_State Of (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) to (Particle.Partl_Ekleise='1')
                End
            
                Send Show_CN
                Send Show_Seira
                Send Set_The_Decimal_Points
            
                Send Kleise_Ta_Pedia
            
            
            ///////////////////////////////////////
            ///////////// 29/01/2003 //////////////  // Refresh Hmnia Parast
            ///////////////////////////////////////
            
                Move Ptyppar.Sysxet_Ptyppar     to sSysx
                Move Particle.Partl_Recr        to sParticleRecr
                Move Particle.Pseira_Seira      to sSeira
                Move Ptyppar.Ptyppar_Code       to sPtypparCode
                Move Ptyppar.Ptyppar_is_what    to sPtypparWhat
                Move Ptyppar.Sysxet_Ptyppar     to sSysx
                Move Ptyppar.Sysx_Ptyp_Recr     to sSysxRecr
                Move Ptyppar.Ptyppar_Recr       to sPtypparRecr
            
            
                If (sPtypparWhat='2') Begin
                    // An einai parastatiko polhshs
            
                    // An einai sysxetismeno
                    If (Trim(sSysx)<>'') Begin
                        Clear Pseira
                        Move SyscurXr.Company_Code  to Pseira.Company_Code
                        Move SyscurXr.Branch_Code   to Pseira.Branch_Code
                        Move sSysx                  to Pseira.Ptyppar_Code
                        Move sSeira                 to Pseira.Pseira_Seira
                        Find Eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+Ptyppar_Code+Pseira_Seira
                        If ((Found) And (Pseira.Pseira_Autonum<>1)) Set Enabled_State Of btnEktyposh to False
                    End
                    Else Begin
                        // An den einai sysxetismeno
                        Clear Pseira
                        Move SyscurXr.Company_Code  to Pseira.Company_Code
                        Move SyscurXr.Branch_Code   to Pseira.Branch_Code
                        Move sPtypparCode           to Pseira.Ptyppar_Code
                        Move sSeira                 to Pseira.Pseira_Seira
                        Find Eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+Ptyppar_Code+Pseira_Seira
                        If ((Found) And (Pseira.Pseira_Autonum<>1)) Set Enabled_State Of btnEktyposh to False
                    End
                End
                Else Begin
                // An einai parastatiko agoras
            
                // Kanonika DEN typonetai ektos an einai sysxetismeno
                // kai to sysxetismeno ektyponetai (einai parastatiko polhshs)
                    If (Trim(sSysx)<>'') Begin
                        Clear Pseira
                        Move SyscurXr.Company_Code  to Pseira.Company_Code
                        Move SyscurXr.Branch_Code   to Pseira.Branch_Code
                        Move sSysx                  to Pseira.Ptyppar_Code
                        Move sSeira                 to Pseira.Pseira_Seira
                        Find Eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+Ptyppar_Code+Pseira_Seira
                        If ((Found) And (Pseira.Pseira_Autonum<>1)) Set Enabled_State Of btnEktyposh to False
                    End
                End
            
                If (Sysfile.Fpa_On_Total=1) Begin
                    If (Particle.Fpa_On_Total<>0) Begin
                        Set Visible_State Of VatAm          to False
                        Set Visible_State Of VatAmOnTotal   to True
                    End
                    Else Begin
                        Set Visible_State Of VatAm          to True
                        Set Visible_State Of VatAmOnTotal   to False
                    End
                End
                Else Begin
                    Set Visible_State Of VatAm          to True
                    Set Visible_State Of VatAmOnTotal   to False
                End
            
            End_Procedure  // Refresh
            
            Procedure Del_Psxetika
                String sRecr
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
                // js 29/08/2002 Gia thn diagrafh Psxetikon me 0 posothta
                If (sRecr<>'') Begin
                    Clear Psxetika
                    Move sRecr to Psxetika.Partl_Recr
                    Find Gt Psxetika by Index.4
                    While ((Found) And (Psxetika.Partl_Recr=sRecr))
                        If (Psxetika.Pms_Sx_Qty=0) Delete Psxetika
                        Find Gt Psxetika by Index.4
                    Loop
                    //Send Beginning_Of_Data to (Psxetika_(dbTabPageSub2(dbTabDialogSub1(Self))))  True
                End
            End_Procedure
            
            Procedure Find_Next
                Forward Send Find_Next
                Send Rythmise_Thn_Seira
                Send Del_Psxetika
            End_Procedure
            
            Procedure Find_Previous
                Forward Send Find_Previous
                Send Rythmise_Thn_Seira
                Send Del_Psxetika
            End_Procedure
            
            Procedure Find_GE
                Forward Send Find_GE
                Send Rythmise_Thn_Seira
                Send Del_Psxetika
            End_Procedure
            
            Procedure Beginning_Of_Data
                Forward Send Beginning_Of_Data
                Send Rythmise_Thn_Seira
                Send Del_Psxetika
            End_Procedure
            
            Procedure End_Of_Data
                Forward Send End_Of_Data
                Send Rythmise_Thn_Seira
                Send Del_Psxetika
            End_Procedure
            
            
            Procedure Exiting Integer WhereTo Returns Integer
                Integer ret_val iAuto
                Date dHmnia dHmniaSeiras
                String sStr sWhat
                Move '' to sStr
                Forward Get Msg_Exiting WhereTo to ret_val
                If Ret_Val Procedure_Return Ret_Val
                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Hmnia      to dHmnia
                Get Field_Current_Value Of PSeira_DD    Field PSeira.Auto_Plus_Last     to dHmniaSeiras
            
                Get Field_Current_Value Of PSeira_DD    Field Pseira.Pseira_Autonum     to iAuto
                Get Field_Current_Value Of Ptyppar_DD   Field Ptyppar.Ptyppar_Is_What   to sWhat
            
                If (dHmnia<>'') Begin
                    If ((dHmnia<Syscurxr.Year_XrhshFrom) Or (dHmnia>Syscurxr.Year_XrhshTo)) Begin
                        append sstr 'é®†ò Æ®„©û™' syscurxr.year_year '   òß¶ ' syscurxr.year_xrhshfrom '    ú¢™ ' syscurxr.year_xrhshto
                        send stop_box "Ü£ú®¶£û§Âò ú°´Ê™ ¶®Â‡§ Æ®„©û™" sstr
                        Function_Return 1
                    End
                End
                Procedure_Return ret_val
            End_procedure
            
            
            
            
            
            
            
            
            //AB-StoreEnd

        End_Object    // Particle_Partl_Hmnia

        Object Ora_Apostolhs is a dbFormSub
            Entry_Item Particle.Ora_apostolhs
            Set Size to 13 35
            Set Location to 18 150
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
        End_Object    // Ora_Apostolhs

        Object Particle_Pseira_Seira is a dbComboFormSub

            //AB-StoreTopStart
                                                                
            //AB-StoreTopEnd

            Entry_Item Particle.Pseira_seira
            Set Size to 13 76
            Set Location to 18 221
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Allow_Blank_State to TRUE

            //AB-StoreStart
                                                                
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            On_Key KCancel Send Next
            
            Procedure Combo_Item_Changed
                String sSeira sAuto sWhat
                Forward Send Combo_Item_Changed
                Get Value Item 0 to sSeira
                Set psSeira to (Trim(sSeira))
                Send Show_Seira
                Get psIsSeiraAutoNum to sAuto
                Move (Trim(sAuto)) to sAuto
                Set Shadow_State Of Particle_Partl_No Item 0 to (sAuto='1')
            End_procedure
            
            Procedure OnCloseUp
                String sSeira sAuto sWhat
                Forward Send OnCloseUp
                Get Value Item 0 to sSeira
                Set psSeira to (Trim(sSeira))
                Send Show_Seira
                Get psIsSeiraAutoNum to sAuto
                Move (Trim(sAuto)) to sAuto
                Set Shadow_State Of Particle_Partl_No Item 0 to (sAuto='1')
            End_Procedure
            
            Procedure Combo_Fill_List
                String sSeira srecr
                Send Combo_Delete_Data
                Send Clear to Pseira_DD2
                Send Rebuild_Constraints to Pseira_DD2
                Send Find to Pseira_DD2 First_Record 1
                While (Found=1)
                    //Get Field_Current_Value Of Pseira_DD2 Field Pseira.Pseira_Seira to sSeira
                    Get Field_Current_Value Of Pseira_DD2 Field Pseira.Pseira_Seira to sSeira
                    Send Combo_Add_Item (Trim(sSeira))
                    Send Find to Pseira_DD2 Next_Record 1
                Loop
            End_Procedure
            
            Procedure Find_Next
            End_Procedure
            Procedure Find_Previous
            End_Procedure
            Procedure Find_Ge
            End_Procedure
            
            
            
            //AB-StoreEnd

        End_Object    // Particle_Pseira_Seira

        Object FormSub1 is a FormSub
            Set Size to 7 9
            Set Location to 21 299
            Set Label_Col_Offset to 2
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            Set Color           to clLime
            
            
            //AB-StoreEnd

        End_Object    // FormSub1

        Object Particle_Partl_No is a dbFormSub
            Entry_Item Particle.Partl_no
            Set Size to 13 56
            Set Location to 18 361
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            //AB-StoreEnd

        End_Object    // Particle_Partl_No

        Object Clients_Client_ID is a dbFormSub
            Entry_Item Clients.Client_id
            Set Size to 13 126
            Set Location to 33 61
            Set Label_Col_Offset to 4
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOn
            Set Form_FontWeight Item 0 to 600
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                
            Set TextColor to clNavy
            
            Procedure Request_Clear
                Send Clear to Clients_DD
                Send Rebuild_Constraints to CN_DD
                Send Show_CN
            End_Procedure
            
            Procedure Request_Clear_All
                Send Clear to Clients_DD
                Send Rebuild_Constraints to CN_DD
                Send Show_CN
            End_Procedure
            
            Procedure Prompt
                String sID
                Get Field_Current_Value Of (Clients_DD(Self)) Field Clients.Client_ID to sID
                Set Value Of Particle_CN_Code to ''
                Set FragmaClient            Of (sl100(Self)) to (Trim(sID))
                Set psModule                Of (sl100(Self)) to (psModule(Self))
                Set Modal_State             Of (sl100(Self)) to True
                Send Clear to CN_DD
                Send Clear to CN_DD2
                Forward Send Prompt
                Send rebuild_Constraints to Cn_DD
                Send Show_CN
            End_procedure
            
            Procedure Find_Next
                Send Clear to CN_DD
                Send Clear to CN_DD2
                Set Value Of Particle_CN_Code to ''
                Forward Send Find_Next
            //                Send Check_OverHead
                Send rebuild_Constraints to Cn_DD
                Send Show_CN
            End_procedure
            
            Procedure Find_Previous
                Send Clear to CN_DD
                Send Clear to CN_DD2
                Set Value Of Particle_CN_Code to ''
                Forward Send Find_Previous
            //                Send Check_OverHead
                Send rebuild_Constraints to Cn_DD
                Send Show_CN
            End_procedure
            
            Procedure Find_Ge
                Send Clear to CN_DD
                Send Clear to CN_DD2
                Set Value Of Particle_CN_Code to ''
                Forward Send Find_GE
            //                Send Check_OverHead
                Send rebuild_Constraints to Cn_DD
                Send Show_CN
            End_procedure
            
            //AB-StoreEnd

        End_Object    // Clients_Client_ID

        Object Clients_Client_Name is a dbFormSub
            Entry_Item Clients.Client_name
            Set Size to 13 299
            Set Location to 33 221
            Set Color to clBtnFace
            Set Label_Col_Offset to 4
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOff
            Set Enabled_State to FALSE
            Set Form_FontWeight Item 0 to 600
            Set Form_TypeFace Item 0 to "MS Sans Serif"
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE

            //AB-StoreStart
            Set TextColor to clNavy
            
            //Procedure Request_Clear
            //    Send Clear to Clients_DD
            //    Send Rebuild_Constraints to CN_DD
            //    Send Show_CN
            //End_Procedure
            
            //Procedure Request_Clear_All
            //    Send Clear to Clients_DD
            //    Send Rebuild_Constraints to CN_DD
            //    Send Show_CN
            //End_Procedure
            
            //Procedure Prompt
            //    Send Clear to CN_DD
            //    Send Clear to CN_DD2
            //    Set Value Of Particle_CN_Code to ''
            //    Set psModule Of (sl100(Self)) to (psModule(Self))
            //    Forward Send Prompt
            //    Send rebuild_Constraints to Cn_DD
            //    Send Show_CN
            //End_procedure
            
            //Procedure Find_Next
            //    Send Clear to CN_DD
            //    Send Clear to CN_DD2
            //    Set Value Of Particle_CN_Code to ''
            //    Forward Send Find_Next
            //    Send rebuild_Constraints to Cn_DD
            //    Send Show_CN
            //End_procedure
            
            //Procedure Find_Previous
            //    Send Clear to CN_DD
            //    Send Clear to CN_DD2
            //    Set Value Of Particle_CN_Code to ''
            //    Forward Send Find_Previous
            //    Send rebuild_Constraints to Cn_DD
            //    Send Show_CN
            //End_procedure
            
            //Procedure Find_Ge
            //    Send Clear to CN_DD
            //    Send Clear to CN_DD2
            //    Set Value Of Particle_CN_Code to ''
            //    Forward Send Find_GE
            //    Send rebuild_Constraints to Cn_DD
            //    Send Show_CN
            //End_procedure
            
            
            //AB-StoreEnd

        End_Object    // Clients_Client_Name

        Object Particle_Cn_Code is a dbFormSub

            //AB-StoreTopStart
                                                                
            //AB-StoreTopEnd

            Entry_Item Particle.Cn_code
            Set Size to 14 126
            Set Location to 48 61
            Set Label_Col_Offset to 4
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOn

            //AB-StoreStart
                                                                
            Procedure Exiting Integer WhereTo Returns Integer
                String sCode sClient
                Integer rVal
                Forward Get Msg_Exiting WhereTo to rVal
                Get Field_Current_Value Of Particle_DD Field Particle.CN_Code to sCode
                Move (Trim(sCode)) to sCode
                If (sCode<>'') Begin
                    Clear CN
                    Move sCode to CN.CN_Code
                    Find Eq CN By Index.5 // CN:Index.1:Cn_Code
                    If (Not(Found)) Begin
                        Send Stop_Box "í¶ ‚®ö¶ úÂ§ò† ò§Áßò®°´¶" "è®¶©¶Æ„"
                        Move 1 to rVal
                    End
                    Else Begin
                        Get Field_Current_Value Of Clients_DD Field Clients.Client_ID to sClient
                        If (psModule(Self)='01') Begin
                            If (Trim(sClient)<>Trim(Cn.Client_ID)) Begin
                                Send Stop_Box "í¶ ‚®ö¶ õú§ ò§¶Â°ú† ©´¶§ úß†¢úö£‚§¶ ≠¶®‚ò" "è®¶©¶Æ„"
                                Move 1 to rVal
                            End
                        End
                    End
                End
                Procedure_Return rVal
            End_Procedure
            
            //Procedure OnKillFocus
            //    Forward Send OnKillFocus
            //End_Procedure
            
            
            
            Procedure Request_Clear
                Send Clear to Cn_DD
                Send Clear to Cn_DD2
            End_Procedure
            
            Procedure Request_Clear_All
                Send Clear to Cn_DD
                Send Clear to Cn_DD2
            End_Procedure
            
            //Procedure Prompt_CallBack Integer hPromptID
            //    String sID
            //    get field_current_value of clients_dd field clients.client_id to sid
            //    Set FragmaClient_ID Of hPromptID to sID
            //End_Procedure
            
            Procedure Prompt
                string sid
                get field_current_value of clients_dd field clients.client_id to sid
                If (psModule(Self)='01') Set FragmaClient_ID Of (sl041(self)) to sID
                Forward Send Prompt
                Send Show_CN
            End_Procedure
            
            Procedure OnChange
                Send Show_CN
            End_procedure
            
            Procedure Find_Next
            End_Procedure
            Procedure Find_Previous
            End_Procedure
            Procedure Find_GE
            End_Procedure
            
            
            
            //AB-StoreEnd

        End_Object    // Particle_Cn_Code

        Object Cn_Cn_Descr is a dbFormSub
            Entry_Item Cn.Cn_descr
            Set Server to (Cn_DD(self))
            Set Size to 13 299
            Set Location to 49 221
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOff
            Set Enabled_State to FALSE
            Set Form_TypeFace Item 0 to "MS Sans Serif"
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE

            //AB-StoreStart
                                                                
            Set Server to (CN_DD2(Self))
            
            //AB-StoreEnd

        End_Object    // Cn_Cn_Descr

        Object Tropos_Diakin is a dbComboFormSub
            Entry_Item Particle.Tropos_diakin
            Set Size to 13 126
            Set Location to 64 61
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Entry_State Item 0 to FALSE
            Set Combo_Sort_State to FALSE

            //AB-StoreStart
                                                                
            Set Entry_State Item 0      to False
            Set Allow_Blank_State       to False
            Set Allow_Undefined_State   to False
            
            //AB-StoreEnd

        End_Object    // Tropos_Diakin

        Object Topos_Apostolhs is a dbFormSub
            Entry_Item Particle.Topos_apostolhs
            Set Size to 13 145
            Set Location to 64 221
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
        End_Object    // Topos_Apostolhs

        Object Skopos_Diakin is a dbComboFormSub
            Entry_Item Particle.Skopos_diakin
            Set Size to 13 123
            Set Location to 64 397
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
        End_Object    // Skopos_Diakin

        Object Oxhma_Code is a dbFormSub
            Entry_Item Particle.Oxhma_code
            Set Size to 13 43
            Set Location to 80 61
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart
                                                                
            Procedure OnChange
                String sCar sCarDescr sDriver sDriverDescr
                Get Field_Current_Value Of Particle_DD Field Particle.Oxhma_Code to sCar
            
                Get fsVresOxhmaDescr    Of Particle_DD sCar     to sCarDescr
                Set Value               Of Particle_Oxhma_Descr to sCarDescr
            
                Get fsVresDriverCode    Of Particle_DD sCar     to sDriver
                //Set Value Of Particle_Odhgos_Code                   to sDriver
            
                get fsVresDriverDescr   Of Particle_DD sDriver  to sDriverDescr
                Set Value               Of Particle_Odhgos_Name to sDriverDescr
            End_Procedure
            
            
            //AB-StoreEnd

        End_Object    // Oxhma_Code

        Object Particle_Oxhma_Descr is a dbFormSub
            Entry_Item Particle.Oxhma_descr
            Set Size to 13 75
            Set Location to 80 109
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Enabled_State to FALSE
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE
        End_Object    // Particle_Oxhma_Descr

        Object Particle_Odhgos_Name is a dbFormSub
            Entry_Item Particle.Odhgos_name
            Set Size to 13 69
            Set Location to 80 221
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Enabled_State to FALSE
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE
        End_Object    // Particle_Odhgos_Name

        Object Particle_Zone_Id is a dbFormSub
            Entry_Item Particle.Zone_id
            Set Size to 13 54
            Set Location to 80 311
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
        End_Object    // Particle_Zone_Id

        Object Antlia_Code is a dbFormSub
            Entry_Item Particle.Antlia_code
            Set Size to 13 55
            Set Location to 80 397
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart
                                                                
            Procedure OnChange
                String sCar sCarDescr
                Get Field_Current_Value Of Particle_DD Field Particle.Antlia_Code   to sCar
                Get fsVresAntliaDescr   Of Particle_DD              sCar            to sCarDescr
                Set Value               Of Particle_Antlia_Descr                    to sCarDescr
            End_Procedure
            
            
            //AB-StoreEnd

        End_Object    // Antlia_Code

        Object Particle_Antlia_Descr is a dbFormSub
            Entry_Item Particle.Antlia_descr
            Set Size to 13 64
            Set Location to 80 456
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Enabled_State to FALSE
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE
        End_Object    // Particle_Antlia_Descr

        Object frmIsClosed is a FormSub
            Set Size to 29 34
            Set Location to 2 426
            Set Label_Col_Offset to 2
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                
            Set Shadow_State to True
            
            
            //AB-StoreEnd

        End_Object    // frmIsClosed

        Object Nomisma_Nomisma_code is a dbFormSub
            Entry_Item Nomisma.Nomisma_code
            Set Size to 13 126
            Set Location to 95 61
            Set Label_Col_Offset to 4
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart
                                                                
            //Procedure Request_Clear
            //    Delegate Send Request_Clear
            //End_procedure
            
            //Procedure Request_Clear_All
            //    Delegate Send Request_Clear_All
            //End_procedure
            
            Procedure Prompt
                Set Modal_State Of (slNomism(Self)) to True
                Forward Send Prompt
                Send Find_The_Rate
            End_Procedure
            
            Procedure Exiting Integer WhereTo Returns Integer
                Integer rVal iInt
                Forward Get Msg_Exiting WhereTo to rVal
                Send Find_The_Rate
                Procedure_Return rVal
            End_Procedure
            
            Procedure OnKillFocus0
                Send Find_The_Rate
            End_Procedure
            
            Procedure Find_Next
                Forward Send Find_Next
                Send Find_The_Rate
            End_Procedure
            
            Procedure Find_Previous
                Forward Send Find_Previous
                Send Find_The_Rate
            End_Procedure
            
            Procedure Find_GE
                Forward Send Find_GE
                Send Find_The_Rate
            End_Procedure
            
            
            //AB-StoreEnd

        End_Object    // Nomisma_Nomisma_code

        Object Particle_Isotimia is a dbFormSub
            Entry_Item Particle.Isotimia
            Set Size to 13 69
            Set Location to 95 221
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right

            //AB-StoreStart
            Set Numeric_Mask Of Particle_Isotimia    Item  0 to 12 Nomisma.Dekadika " ,*"
            
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            
            
            //AB-StoreEnd

        End_Object    // Particle_Isotimia

        Object frmIsotimia is a FormSub
            Set Size to 13 62
            Set Location to 95 304
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Enabled_State to FALSE
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE
        End_Object    // frmIsotimia

        Object frmEURO is a FormSub
            Set Size to 13 55
            Set Location to 95 397
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Enabled_State to FALSE
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE
        End_Object    // frmEURO

        Object dbTabDialogSub1 is a dbTabDialogSub
            Set Size to 105 523
            Set Location to 108 1
            Object dbTabPageSub1 is a dbTabPageSub
                Set Label to "â†§„©ú†™    "
                Object Pmoves_ is a dbGridSub

                    //AB-StoreTopStart
                                                                                                                        
                    Function fiCanUserChangePrice returns Integer
                        Integer rVal
                        String  sLogin
                        Move (fsLoginUserID())  to sLogin
                        Clear Users
                        Move sLogin    to Users.Login_ID
                        Find eq Users by Index.1 // Users:Index.1:Users.Login_ID
                        If (Found=1)    Move (Users.No_Allagh_Timhs<>'1') to rVal
                        Else            Move 0 to rVal
                        Function_Return rVal
                    End_Function
                    
                    //AB-StoreTopEnd

                    Set Main_File to Pmoves.File_Number
                    Set Server to (Pmoves_DD(self))
                    Set Ordering to 3
                    Set Size to 62 519
                    Set Location to 2 0
                    Set Wrap_State to TRUE
                    Set Child_Table_State to FALSE

                    Begin_Row
                        Entry_Item Witemx.Witemx_code
                        Entry_Item Witemx.Witemx_descr
                        Entry_Item Wax.Wax_descr
                        Entry_Item Pmoves.Pms_qty
                        Entry_Item Units.Units_descr
                        Entry_Item Pmoves.Pms_unitprice
                        Entry_Item Pmoves.Pms_amaftdisc
                        Entry_Item Pmoves.Pms_vatpct
                        Entry_Item Pmoves.Pms_vatam
                        Entry_Item Pmoves.Pms_payable
                    End_Row

                    Set Form_Width    item 0 to 48
                    Set Header_Label  item 0 to "â‡õ"
                    
                    Set Form_Width    item 1 to 96
                    Set Header_Label  item 1 to "ÑÂõ¶™"
                    
                    Set Form_Width    item 2 to 73
                    Set Header_Label  item 2 to "Äß¶ü„°û"
                    
                    Set Form_Width    item 3 to 46
                    Set Header_Label  item 3 to "è¶©Ê´û´ò"
                    
                    Set Form_Width    item 4 to 27
                    Set Header_Label  item 4 to "ã/ã"
                    
                    Set Form_Width    item 5 to 45
                    Set Header_Label  item 5 to "í†£„ ã¶§"
                    
                    Set Form_Width    item 6 to 42
                    Set Header_Label  item 6 to "âòüò®·"
                    
                    Set Form_Width    item 7 to 36
                    Set Header_Label  item 7 to "% îèÄ"
                    
                    Set Form_Width    item 8 to 53
                    Set Header_Label  item 8 to "è¶©Ê îèÄ"
                    
                    Set Form_Width    item 9 to 48
                    Set Header_Label  item 9 to "ëÁ§¶¢¶"
                    

                    //AB-StoreStart
                                                                                                                        
                    Set Column_Option       Item  1 to NoEnter  True // èú®†ö®ò≠„ ÑÂõ¶¨™
                    Set Column_Option       Item  4 to NoEnter  True // ã¶§·õò ã‚´®û©û™
                    Set Column_Option       Item  6 to NoEnter  True // åú´ è¶©¶ (Calculated)
                    Set Column_Option       Item  9 to NoEnter  True // ë¨§¶¢¶   (Calculated)GEORG
                    
                    Set Column_Option       Item  5 to NoEnter (fiCanUserChangePrice(Self)=0)
                    
                    Set Child_Table_State To True
                    
                    Set Points Item 3 to 1 // Posothta
                    
                    Procedure Prompt
                        String sCode
                        Integer iCol iBase
                        Get Base_Item to iBase
                        Get Column iBase to iCol
                        If (iCol=0) Begin
                            Get Value Item iBase to sCode
                            Move (Trim(sCode)) to sCode
                            If (sCode<>'') Begin
                                Set Modal_State Of (sl17(Self))                 to True
                                Set Value       Of (oCode(sl17(Self))) item 0   to sCode
                                Set pscode      Of (oCode(sl17(Self)))          to sCode
                                Send Keyaction to (ButtonSub1(sl17(Self)))
                            End
                        End
                        Forward Send Prompt
                        If (iCol=0) Begin
                            If (sCode<>'') Begin
                                Set Value   Of (oCode(sl17(Self))) item 0   to ''
                                Set pscode  Of (oCode(sl17(Self)))          to ''
                            End
                        End
                    End_Procedure
                    
                    Function Child_Exiting returns Integer
                        Integer rVal
                        Forward Get Child_Exiting to rVal
                        //If (Not(rVal)) Send Trap_Error to Error_Info_Object 25 // Energopoioume to Error 25 'Record_Not_Found'
                        Function_Return rVal
                    End_Function
                    
                    Function Child_entering returns Integer
                        Integer rVal iRec iDecs iRecNom isReadOnly iRecnm
                        String  sNomCode sRecr sEkleise
                    
                        //Send Ignore_Error to Error_Info_Object 25 // Apenergopoioume to Error 25 'Record_Not_Found'
                    
                        If ( (Should_Save(Particle_DD(Self)))           And ;
                             (piNoChangesAllowed(Particle_DD(Self))<>1) ) Begin
                                    Send Request_Save to (Particle_DD(Self))
                        End
                    
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                        Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise
                    
                        If (BtnApothikh(Particle(Self))) ;
                            Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                                ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))
                    
                    
                        Get Field_Current_Value Of Nomisma_DD  Field Nomisma.Nomisma_Code to sNomCode
                    
                        Clear Nomisma
                        Move sNomCode to Nomisma.Nomisma_Code
                        Find eq Nomisma By Index.1 // Nomisma:Index.1:Nomisma_Code
                    
                        If (Not(Found)) Begin
                            Send Activate to (Nomisma_Nomisma_Code(Particle(Self)))
                            Function_Return 1
                        End
                        Else Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
                    
                    
                        Set Enabled_State Of (Pms_PctDisc(ExtraContainer(Self))) to (iRecnm)
                        Set Enabled_State Of (Pms_DiscAm (ExtraContainer(Self))) to (iRecnm)
                    
                        Get Field_Current_Value Of Particle_DD Field Particle.Recnum    to iRec
                        Get Field_Current_Value Of Nomisma_DD  Field Nomisma.Recnum     to iRecNom
                        If (Not(iRec)) Begin
                            Send Activate to (Particle_Partl_Hmnia(Particle(Self)))
                            send info_box "Éú§ ¨ß·®Æú† ú§ú®öÊ ßò®ò©´ò´†°Ê" 'è¢û®¶≠¶®Âò'
                            Function_Return 1
                        End
                        Else If (Not(iRecNom)) Begin
                            Send Activate to (Nomisma_Nomisma_Code(Particle(Self)))
                            send info_box "Éú§ úß†¢‚•ò´ú åÊ£†©£ò ©´¶ èò®ò©´ò´†°Ê" 'è¢û®¶≠¶®Âò'
                            Function_Return 1
                        End
                    
                        Forward Get Child_Entering to rVal
                    
                        Function_Return rVal
                    End_Function
                    
                    
                    // 15/10
                    Procedure Item_Change Integer Fromi Integer Toi Returns Integer
                        Integer rVal iBase iColumn iFieldNumber iFileNumber
                        Integer iFromPCT iDecimals iYear iColfrom iColTo iRecnm iWitemxRecnum
                        Number nQty nTimhMon nQtyTimhMon nPctEkpt nPosoEkpt nTmp
                        Number nPosoNet nPctFpa nPosoFpa nPosoSynolo nFpa nInt
                        String sNameFrom sNameTo sRecr sWapokat sCompany sBranch swrecr sEkleise
                    
                        Forward Get Msg_Item_Change Fromi Toi To Rval
                    
                        Get Column FromI    to iColumn
                        Get Column FromI    to iColFrom
                    
                        Get Column ToI      to iColTo
                    
                    
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                        Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise
                    
                        If (Focus(Desktop)=Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) Begin
                            Set Enabled_State Of (Pms_PctDisc(ExtraContainer(Self))) to (iRecnm)
                            Set Enabled_State Of (Pms_DiscAm (ExtraContainer(Self))) to (iRecnm)
                        End
                    
                        If (BtnApothikh(Particle(Self))) ;
                            Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                                ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))
                    
                        If ( ((piNoChangesAllowed(Pmoves_DD  (Self))<>1)    Or  ;
                              (piNoChangesAllowed(Particle_DD(Self))<>1))   And ;
                              (Current_Record    (Particle_DD(Self)))    ) Begin
                    
                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Unitprice to nTmp
                    
                            Get Field_Current_Value Of Witemx_DD Field Witemx.Recnum        to iWitemxRecnum
                    
                            If ((iColTo=2) Or (iColFrom=2)) Begin
                                Get Field_Current_Value Of Witemx_DD Field Witemx.Witemx_recr to swrecr
                                If (trim(swrecr)<>'') Begin
                    
                    
                                    Move SysCurXr.Company_Code   to sCompany
                                    Move SysCurXr.Branch_Code    to sBranch
                                    Move SysCurXr.Year_Year      to iYear
                                    Get Field_Current_Value Of Witemx_DD Field Witemx.ITEM_APOKAT_COD ;
                                        to sWapokat
                    
                                    // Constrain ths Listas
                                    Set piMustConstrain Of (Wax(Self)) To True
                                    Set piYear          Of (Wax(Self)) To iYear
                                    Set psCompany       Of (Wax(Self)) To sCompany
                                    Set psBranch        Of (Wax(Self)) To sBranch
                                    Set psWapokat       Of (Wax(Self)) To sWapokat
                    
                                    Set piYear          Of Wax_DD To iYear
                                    Set psCompany       Of Wax_DD To sCompany
                                    Set psBranch        Of Wax_DD To sBranch
                                    Set psWapokat       Of Wax_DD To sWapokat
                                    Send Rebuild_Constraints to Wax_DD
                    
                                End
                            End
                    
                            Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Dekadika      To iDecimals
                            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_qty        To nQty
                            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_unitprice  To nTimhMon
                    
                            // js 30/08/2002 Gia na trexoun oi ypologismoi Fpa akoma
                            // kai me mhdenikh timh monados (Periptosh DAP p.x.)
                            //If ((nQty<>0) And (nTimhMon<>0)) Begin
                            If (nQty<>0) Begin
                    
                                Move (round_number((nQty*nTimhMon),idecimals)) to nQtyTimhMon
                    
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_pctdisc   To nPctEkpt
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                    
                                Move  (Round_Number((nQtyTimhMon*nPctEkpt/100),iDecimals))      to nPosoEkpt
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                    
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Amaftdisc To (nQtyTimhMon-nPosoEkpt)
                                Move (nQtyTimhMon-nPosoEkpt)                                    To nPosoNet
                    
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatPct    To nPctFpa
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                    
                                Move  (Round_Number((nPosoNet*nPctFpa/100),iDecimals))          to nPosoFpa
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                    
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                                Move (nPosoNet+nPosoFpa) to nPosoSynolo
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Payable   To nPosoSynolo
                            End
                        End
                        Procedure_Return rVal
                    End_Procedure
                    
                    Procedure Request_Delete
                        Forward Send Request_Delete
                        Send Request_Assign to Particle_DD
                    End_Procedure
                    
                    //Procedure Entry_Display Integer iFile Integer iType
                    //    Local integer iClr iItem
                    //    Forward Send Entry_Display iFile iType
                    //    Send DoCenterColumn 4
                    //End_Procedure
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    //AB-StoreEnd

                End_Object    // Pmoves_

                Object ExtraContainer is a dbContainer3dSub
                    Set Border_Style to Border_ClientEdge
                    Set Size to 23 517
                    Set Location to 65 0
                    Set Color to 14671839
                    Object Pms_Pctdisc is a dbFormSub
                        Entry_Item Pmoves.Pms_pctdisc
                        Set Server to (Pmoves_DD(self))
                        Set Size to 13 29
                        Set Location to 4 308
                        Set Label_Col_Offset to 2
                        Set Label_Justification_Mode to jMode_Right
                        Set Form_Mask Item 0 to "###,###,###,###.######"

                        //AB-StoreStart
                                                                                                                                                    
                        Procedure GoBack_to_Grid
                            Integer iRec
                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Recnum to iRec
                            Send Activate to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self))))
                            If (iRec) Send Find_By_Recnum to Pmoves_DD Pmoves.File_Number iRec
                        End_Procedure
                        
                        Procedure Request_Save
                            Send GoBack_to_Grid
                        End_Procedure
                        
                        Procedure Request_Delete
                        End_Procedure
                        
                        Procedure Compute_Again
                            Integer rVal iBase iColumn iFieldNumber iFileNumber
                            Integer iFromPCT iDecimals iYear iColfrom iColTo iRecnm
                            Number nQty nTimhMon nQtyTimhMon nPctEkpt nPosoEkpt
                            Number nPosoNet nPctFpa nPosoFpa nPosoSynolo nFpa
                            String sNameFrom sNameTo sRecr sWapokat sCompany sBranch swrecr sEkleise
                        
                            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                            Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise
                        
                            If (BtnApothikh(Particle(Self))) ;
                                Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                                    ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))
                        
                            If ( ((piNoChangesAllowed(Pmoves_DD  (Self))<>1)    And  ;
                                  (piNoChangesAllowed(Particle_DD(Self))<>1))   And ;
                                  (Current_Record    (Particle_DD(Self)))    ) Begin
                        
                                Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Dekadika      To iDecimals
                                Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_qty        To nQty
                                Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_unitprice  To nTimhMon
                        
                                If ((nQty<>0) And (nTimhMon<>0)) Begin
                        
                                    Move (nQty*nTimhMon) to nQtyTimhMon
                        
                                    Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_pctdisc   To nPctEkpt
                                    Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                                    Move  (Round_Number((nQtyTimhMon*nPctEkpt/100),iDecimals))    to nPosoEkpt
                                    Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam To nPosoEkpt
                        
                                    Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                                    Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Amaftdisc To (nQtyTimhMon-nPosoEkpt)
                                    Move (nQtyTimhMon-nPosoEkpt)                                    To nPosoNet
                        
                                    Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatPct    To nPctFpa
                                    Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                        
                                    Move  (Round_Number((nPosoNet*nPctFpa/100),iDecimals)) to nPosoFpa
                                    Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm To nPosoFpa
                        
                                    Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                                    Move (nPosoNet+nPosoFpa) to nPosoSynolo
                                    Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Payable   To nPosoSynolo
                                End
                            End
                        End_Procedure
                        
                        Procedure OnChange
                            If (Focus(Desktop)=Pms_PctDisc(Self)) Send Compute_Again
                        End_Procedure
                        
                        Procedure OnKillFocus
                            If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
                        End_Procedure
                        
                        Procedure Exiting Integer WhereTo Returns Integer
                            Integer rVal
                            Forward Get Msg_Exiting WhereTo to rVal
                            If rVal Procedure_Return rVal
                            If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
                            Procedure_Return rVal
                        end_procedure
                        
                        
                        //AB-StoreEnd

                    End_Object    // Pms_Pctdisc

                    Object Pms_Discam is a dbFormSub
                        Entry_Item Pmoves.Pms_discam
                        Set Server to (Pmoves_DD(self))
                        Set Size to 13 59
                        Set Location to 4 425
                        Set Label_Col_Offset to 2
                        Set Label_Justification_Mode to jMode_Right
                        Set Form_Mask Item 0 to "###,###,###,###.######"

                        //AB-StoreStart
                        Set Item_Option Item 0 to NoEnter true
                        
                        
                        //AB-StoreEnd

                    End_Object    // Pms_Discam

                    Object TextBoxSub28 is a TextBoxSub
                        Set Label to "%"
                        Set Color to 14671839
                        Set Location to 6 338
                        Set Size to 10 7
                        Set FontWeight to 600
                    End_Object    // TextBoxSub28

                    Object TextBoxSub29 is a TextBoxSub
                        Set Label to "è¶©¶©´Ê Î°ß´‡©û™ ÑÂõ¶¨™"
                        Set Color to 14671839
                        Set Location to 1 226
                        Set Size to 17 67
                        Set FontWeight to 600
                        Set Justification_Mode to jMode_Center
                    End_Object    // TextBoxSub29

                    Object TextBoxSub30 is a TextBoxSub
                        Set Label to "è¶©Ê Î°ß´‡©û™ ÑÂõ¶¨™"
                        Set Color to 14671839
                        Set Location to 1 356
                        Set Size to 17 55
                        Set FontWeight to 600
                        Set Justification_Mode to jMode_Center
                    End_Object    // TextBoxSub30

                    Object Pmoves_Sx_Parast is a dbFormSub
                        Entry_Item Pmoves.Sx_parast
                        Set Server to (Pmoves_DD(self))
                        Set Size to 12 214
                        Set Location to -1 0
                        Set Color to 14671839
                        Set Label_Col_Offset to 2
                        Set Label_Justification_Mode to jMode_Right
                        Set Enabled_State to FALSE
                        Set Item_Shadow_State Item 0 to TRUE
                        Set Shadow_State Item 0 to TRUE
                    End_Object    // Pmoves_Sx_Parast

                    Object Pmoves_Sx_Hmnia is a dbFormSub
                        Entry_Item Pmoves.Sx_hmnia
                        Set Server to (Pmoves_DD(self))
                        Set Size to 10 151
                        Set Location to 11 0
                        Set Color to 14671839
                        Set Label_Col_Offset to 2
                        Set Label_Justification_Mode to jMode_Right
                        Set Enabled_State to FALSE
                        Set Item_Shadow_State Item 0 to TRUE
                        Set Shadow_State Item 0 to TRUE
                    End_Object    // Pmoves_Sx_Hmnia

                    Object Pmoves_Sx_Seira is a dbFormSub
                        Entry_Item Pmoves.Sx_seira
                        Set Server to (Pmoves_DD(self))
                        Set Size to 10 20
                        Set Location to 11 153
                        Set Color to 14671839
                        Set Label_Col_Offset to 2
                        Set Label_Justification_Mode to jMode_Right
                        Set Enabled_State to FALSE
                        Set Item_Shadow_State Item 0 to TRUE
                        Set Shadow_State Item 0 to TRUE
                    End_Object    // Pmoves_Sx_Seira

                    Object Pmoves_Sx_Arithmos is a dbFormSub
                        Entry_Item Pmoves.Sx_arithmos
                        Set Server to (Pmoves_DD(self))
                        Set Size to 10 36
                        Set Location to 10 178
                        Set Color to 14671839
                        Set Label_Col_Offset to 2
                        Set Label_Justification_Mode to jMode_Right
                        Set Enabled_State to FALSE
                        Set Item_Shadow_State Item 0 to TRUE
                        Set Shadow_State Item 0 to TRUE
                    End_Object    // Pmoves_Sx_Arithmos

                End_Object    // ExtraContainer


                //AB-StoreStart
                set label to "Ä§·¢¨©û ßò®ò©´ò´†°¶Á"
                
                //AB-StoreEnd

            End_Object    // dbTabPageSub1

            Object dbTabPageSub3 is a dbTabPageSub
                Set Label to "Ä†´†¶¢¶öÂò èò®¶Æ„™ ìßû®ú©†È§"
                Object Pmsdtl_Line1 is a dbFormSub
                    Entry_Item Pmsdtl.Line1
                    Set Server to (Pmsdtl_DD(self))
                    Set Label to "Ç®ò££„ 1"
                    Set Size to 13 297
                    Set Location to 17 41
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                    On_Key KSave_Record     Send Request_Save
                    On_Key KDelete_Record   Send Request_Delete
                    
                    Procedure Request_Save
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Send Request_Save to PmsDtl_DD
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Request_Delete
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Forward Send Request_Delete
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†©£‚§¶\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            //If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Exiting
                        If (Should_Save(PmsDtl_DD(Self))) Send Request_Save to PmsDtl_DD
                        Forward Send Exiting
                    End_Procedure
                    
                    //AB-StoreEnd

                End_Object    // Pmsdtl_Line1

                Object Pmsdtl_Line2 is a dbFormSub
                    Entry_Item Pmsdtl.Line2
                    Set Server to (Pmsdtl_DD(self))
                    Set Label to "Ç®ò££„ 2"
                    Set Size to 13 297
                    Set Location to 31 41
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                    On_Key KSave_Record     Send Request_Save
                    On_Key KDelete_Record   Send Request_Delete
                    
                    Procedure Request_Save
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Send Request_Save to PmsDtl_DD
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Request_Delete
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Forward Send Request_Delete
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†©£‚§¶\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            //If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Exiting
                        If (Should_Save(PmsDtl_DD(Self))) Send Request_Save to PmsDtl_DD
                        Forward Send Exiting
                    End_Procedure
                    
                    //AB-StoreEnd

                End_Object    // Pmsdtl_Line2

                Object Pmsdtl_Line3 is a dbFormSub
                    Entry_Item Pmsdtl.Line3
                    Set Server to (Pmsdtl_DD(self))
                    Set Label to "Ç®ò££„ 3"
                    Set Size to 13 297
                    Set Location to 45 41
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                    On_Key KSave_Record     Send Request_Save
                    On_Key KDelete_Record   Send Request_Delete
                    
                    Procedure Request_Save
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Send Request_Save to PmsDtl_DD
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Request_Delete
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Forward Send Request_Delete
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†©£‚§¶\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            //If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Exiting
                        If (Should_Save(PmsDtl_DD(Self))) Send Request_Save to PmsDtl_DD
                        Forward Send Exiting
                    End_Procedure
                    
                    //AB-StoreEnd

                End_Object    // Pmsdtl_Line3

                Object Pmsdtl_Line4 is a dbFormSub
                    Entry_Item Pmsdtl.Line4
                    Set Server to (Pmsdtl_DD(self))
                    Set Label to "Ç®ò££„ 4"
                    Set Size to 13 297
                    Set Location to 58 41
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                                                                                                                                                                                                    
                    On_Key KSave_Record     Send Request_Save
                    On_Key KDelete_Record   Send Request_Delete
                    
                    Procedure Request_Save
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Send Request_Save to PmsDtl_DD
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                            If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Request_Delete
                        Integer iRecnum iNoChangesAllowed iHasMetasx
                        Get Field_Current_Value Of PmsDtl_DD Field PmsDtl.Recnum to iRecnum
                        Get piNoChangesAllowed  Of Particle_DD to iNoChangesAllowed
                        Get piHasMetasx         Of Particle_DD to iHasMetasx
                        If ((iNoChangesAllowed<>1) And (iHasMetasx<>1)) Begin
                            Forward Send Request_Delete
                        End
                        Else Begin
                            If (iHasMetasx=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†©£‚§¶\nÉú§ õ†òö®·≠ú´ò†" "è¢û®¶≠¶®Âò"
                            //If (iRecnum) Send Find_By_Recnum to PmsDtl_DD PmsDtl.File_Number iRecnum
                        End
                    End_Procedure
                    
                    Procedure Exiting
                        If (Should_Save(PmsDtl_DD(Self))) Send Request_Save to PmsDtl_DD
                        Forward Send Exiting
                    End_Procedure
                    
                    //AB-StoreEnd

                End_Object    // Pmsdtl_Line4

                Object Witemx_Witemx_Code is a dbFormSub
                    Entry_Item Witemx.Witemx_code
                    Set Server to (Pmoves_DD(self))
                    Set Size to 13 85
                    Set Location to 2 41
                    Set Color to clNavy
                    Set TextColor to clAqua
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right
                    Set Prompt_Button_Mode to pb_PromptOff

                    //AB-StoreStart
                                                                                                                                                                                                    
                    Set Enabled_State   to False
                    Set Color           to clNavy
                    Set textColor       to clAqua
                    
                    //AB-StoreEnd

                End_Object    // Witemx_Witemx_Code

                Object Witemx_Witemx_Descr is a dbFormSub
                    Entry_Item Witemx.Witemx_descr
                    Set Server to (Pmoves_DD(self))
                    Set Size to 13 260
                    Set Location to 2 127
                    Set Color to clNavy
                    Set TextColor to clAqua
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right
                    Set Prompt_Button_Mode to pb_PromptOff

                    //AB-StoreStart
                                                                                                                                                                                                    
                    Set Enabled_State   to False
                    Set Color           to clNavy
                    Set textColor       to clAqua
                    
                    //AB-StoreEnd

                End_Object    // Witemx_Witemx_Descr

                Object Pmoves_Pms_Qty is a dbFormSub
                    Entry_Item Pmoves.Pms_qty
                    Set Server to (Pmoves_DD(self))
                    Set Size to 13 27
                    Set Location to 2 388
                    Set Color to clNavy
                    Set TextColor to clAqua
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                    Set Points Item 0 to 1
                    Set Enabled_State   to False
                    Set Color           to clNavy
                    Set textColor       to clAqua
                    
                    
                    //AB-StoreEnd

                End_Object    // Pmoves_Pms_Qty

                Object Units_Units_Descr is a dbFormSub
                    Entry_Item Units.Units_descr
                    Set Server to (Pmoves_DD(self))
                    Set Size to 13 93
                    Set Location to 2 417
                    Set Color to clNavy
                    Set TextColor to clAqua
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right
                    Set Prompt_Button_Mode to pb_PromptOff

                    //AB-StoreStart
                                                                                                                                                                                                    
                    Set Enabled_State   to False
                    Set Color           to clNavy
                    Set textColor       to clAqua
                    
                    //AB-StoreEnd

                End_Object    // Units_Units_Descr

                Object Particle_Parakrat_Pct is a dbFormSub
                    Entry_Item Particle.Parakrat_pct
                    Set Size to 13 33
                    Set Location to 33 438
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                                                                                                                                                                                                    
                    Set Numeric_Mask Item 0 to 4 2 ' ,*'
                    
                    Procedure OnChange
                        Number nPct nPoso nAxia nTmp
                        If (Focus(Desktop)=Particle_Parakrat_Pct(dbTabPageSub3(dbTabDialogSub1(Self)))) Begin
                            Get Field_Current_Value Of Particle_DD    Field Particle.Partl_TotAmAD  to nAxia
                            Get Field_Current_Value Of Particle_DD    Field Particle.Parakrat_Pct   to nPct
                            Move (Round_Number(((nAxia*nPct)/100),2)) to nTmp
                            Set Field_Current_Value Of Particle_DD    Field Particle.Parakrat_Poso  to nTmp
                        End
                    End_Procedure
                    
                    Procedure Exiting integer whereTo returns integer
                        local integer ret_val
                        forward get msg_exiting whereTo to ret_val
                        if ret_val procedure_return ret_val
                        If (Should_Save(Particle_DD(Self))) Send Request_Save to Particle_DD
                        procedure_return ret_val
                    End_Procedure
                    
                    
                    
                    //AB-StoreEnd

                End_Object    // Particle_Parakrat_Pct

                Object Particle_Parakrat_Poso is a dbFormSub
                    Entry_Item Particle.Parakrat_poso
                    Set Size to 13 68
                    Set Location to 57 438
                    Set Color to clBtnFace
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right
                    Set Enabled_State to FALSE
                    Set Form_FontWeight Item 0 to 600
                    Set Item_Shadow_State Item 0 to TRUE
                    Set Shadow_State Item 0 to TRUE

                    //AB-StoreStart
                                                                                                                                                                                                    
                    Set Numeric_Mask Item 0 to 14 2 ' ,*'
                    Set Enabled_State   to False
                    Set Color           to clBtnFace
                    Set textColor       to clred
                    
                    Procedure OnChange00
                        Number nPct nPoso nAxia nTmp
                        If (Focus(Desktop)=Particle_Parakrat_Poso(dbTabPageSub3(dbTabDialogSub1(Self)))) Begin
                            Get Field_Current_Value Of Particle_DD    Field Particle.Partl_TotAmAD  to nAxia
                            Get Field_Current_Value Of Particle_DD    Field Particle.Parakrat_Poso  to nPoso
                            Move (Round_Number(((nPoso/nAxia)*100),2)) to nTmp
                            Set Field_Changed_Value Of Particle_DD    Field Particle.Parakrat_Pct  to nTmp
                        End
                    End_Procedure
                    
                    Procedure Exiting00 integer whereTo returns integer
                        local integer ret_val
                        forward get msg_exiting whereTo to ret_val
                        if ret_val procedure_return ret_val
                        If (Should_Save(Particle_DD(Self))) Send Request_Save to Particle_DD
                        procedure_return ret_val
                    End_Procedure
                    
                    
                    
                    //AB-StoreEnd

                End_Object    // Particle_Parakrat_Poso

                Object Particle_Partl_totamad is a dbFormSub
                    Entry_Item Particle.Partl_totamad
                    Set Size to 13 68
                    Set Location to 17 438
                    Set Color to clBtnFace
                    Set TextColor to clPurple
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right
                    Set Prompt_Button_Mode to pb_PromptOff
                    Set Enabled_State to FALSE
                    Set Form_FontWeight Item 0 to 600
                    Set Item_Shadow_State Item 0 to TRUE
                    Set Shadow_State Item 0 to TRUE

                    //AB-StoreStart
                    Set Numeric_Mask Item 0 to 14 2 ' ,*'
                    Set Enabled_State   to False
                    Set Color           to clBtnFace
                    Set textColor       to clPurple
                    //AB-StoreEnd

                End_Object    // Particle_Partl_totamad

                Object TextBoxSub37 is a TextBoxSub
                    Set Label to "è¶©¶©´Ê èò®ò°®·´û©û™"
                    Set Location to 34 349
                    Set Size to 10 84
                End_Object    // TextBoxSub37

                Object TextBoxSub38 is a TextBoxSub
                    Set Label to "è¶©Ê èò®ò°®·´û©û™"
                    Set Location to 58 349
                    Set Size to 10 72
                End_Object    // TextBoxSub38

                Object TextBoxSub39 is a TextBoxSub
                    Set Label to "âòüò®„ Ä•Âò í†£¶¢¶öÂ¶¨"
                    Set Location to 17 350
                    Set Size to 10 83
                End_Object    // TextBoxSub39

                Object TextBoxSub40 is a TextBoxSub
                    Set Label to "%"
                    Set Location to 36 472
                    Set Size to 10 7
                End_Object    // TextBoxSub40


                //AB-StoreStart
                                                                                                                                                        
                Set label to "Ä†´†¶¢¶öÂò èò®¶Æ„™ ìßû®ú©†È§"
                
                
                Procedure Exiting
                    If (Should_Save(PmsDtl_DD(Self))) Send Request_Save to PmsDtl_DD
                    Forward Send Exiting
                End_Procedure
                
                
                //AB-StoreEnd

            End_Object    // dbTabPageSub3


            //AB-StoreStart
                                                                                                            
            Procedure Check_Sxetika
                String sRecr
                // js 29/08/2002 Gia thn diagrafh Psxetikon me 0 posothta
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
                If (sRecr<>'') Begin
                    Clear Psxetika
                    Move Particle.Partl_Recr to Psxetika.Partl_Recr
                    Find Gt Psxetika by Index.4
                    While ((Found) And (Psxetika.Partl_Recr=Particle.Partl_Recr))
                        If (Psxetika.Pms_Sx_Qty=0) Delete Psxetika
                        Find Gt Psxetika by Index.4
                    Loop
               //     Send Beginning_Of_Data to (Psxetika_(dbTabPageSub2(dbTabDialogSub1(Self))))  True
                End
            End_Procedure
            
            Function Tab_Change Integer Pagenumber Integer Focus_Mode Returns Integer
                Integer Rval iEinaiParoxh
                String  sRecr sPmsRecr
                Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Einai_Paroxh_Yp  to iEinaiParoxh
            
                If (PageNumber=1) Begin
                    If (Not(iEinaiParoxh)) Function_Return -1
                    Else Begin
                        Send Beginning_Of_Data to ;
                             (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self))))
                        If Not Status Pmoves Function_Return -1
                    End
                End
            //            Else If (PageNumber=3) Begin
            //                Get Field_Current_Value Of Pmoves_DD  Field Pmoves.Pms_Recr to sRecr
            //                If (Trim(sRecr)='') Function_Return -1
            //                Clear PmsSxet
            //                Move sRecr to PmsSxet.Pms_Recr
            //                Find Gt PmsSxet By Index.1
            //                If (NOT((Found) And (PmsSxet.Pms_Recr=sRecr))) Begin
            //                    Send Clear to PmsSxet_DD
            //                    Function_Return -1
            //                End
            //                Else Begin
            //                    Set Changed_State Of PmsSxet_DD to False
            //                    Send Request_Find to PmsSxet_DD Gt PmsSxet.File_Number 1
            //               //     Send Beginning_Of_Data to (Psxetika_(dbTabPageSub2(dbTabDialogSub1(Self)))) True
            //                End
            //            End
            //            Else If (PageNumber=1) Begin
            //                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Recr to sRecr
            //                If (Trim(sRecr)='') Function_Return -1
            //                // Prin Gyrisei sto Tab Page ton Psxetikon (tou Particle)
            //                Send Check_Sxetika
            //                Clear Psxetika
            //                Move sRecr to Psxetika.Partl_Recr
            //                Find Gt Psxetika By Index.4
            //                If (NOT ((Found=1) And (Psxetika.Partl_Recr=sRecr)) ) Begin
            //                    Send Clear to Psxetika_DD
            //                    Function_Return -1
            //                End
            //                Else Send Request_Find to Psxetika_DD Gt Psxetika.File_Number 4
            
            //            End
            
                Forward Get Tab_Change Pagenumber Focus_Mode To Rval
                Function_Return Rval
            End_Function
            
            
            //AB-StoreEnd

        End_Object    // dbTabDialogSub1

        Object btnKleisimo is a ButtonSub
            Set Label to "â¢úÂ©†£¶"
            Set Bitmap to "open1.bmp"
            Set Size to 21 23
            Set Location to 214 2
            Set Focus_Mode to Pointer_Only
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ä§¶†ö£ò / â¢úÂ©†£¶ ßò®ò©´ò´†°¶Á"
            
            Function Ftiaxe_Epimerismous    String  asRecr  ;
                                            Number  anEkpt  ;
                                            Number  anExtra ;
                                            Integer aiLines ;
                                            Number  anSynolo;
                                            Integer aisClosed Returns Integer
            
                Number nYpolExtra nYpolEkpt nPosoGrammhs nPososto nSynolo nPoso
                Integer iNoOfLines iInt rVal
            
                // Ü ú§û£ú®‡©û ´¶¨ Pmoves £ú úß†£ú®†©£¶ ß¶©‡§ öú§†°„™ ú°ß´‡©û™
                // °ò† öú§†°„™ úß†ôò®¨§©û™ òß¶ ´¶ ßò®ò©´ò´†°Ê, ö†§ú´ò† £ú procedural
                // °‡õ†°ò ö†ò 2 ôò©†°¶Á™ ¢Êö¶¨™.
                // 1. ö†ò ¢Êö¶¨™ ´òÆ¨´û´ò™
                // 2. ö†ò´† ´ò ßúõ†ò ò¨´ò ÉÑå ©¨££ú´úÆ¶¨§ ©´ò ©¨§¶¢ò ´¶¨ Pmoves
                // òß¢ò °ò´òö®ò≠¶§´ò† ‡©´ú §ò ©¨§¨ß¶¢¶ö†©´¶¨§ òß¶ ´û§ õ†òõ†°ò©†ò
                // ò§¶†•ú/°¢ú†©ú (business process bpencmvs.dg) ¶´ò§ üò ö†§¶¨§ ¶†
                // úöö®ò≠ú™ ©´û§ òß¶üû°û °ò† ©´¶¨™ ßú¢ò´ú™ °ò† ò¨´ò úò§ ´¶ ß®¶ô¢úß¶¨§
                // ´ò ò§´†©´¶†Æò flags. (ßÆ ©´û§ òß¶üû°û ´¶ õú¢´. òß¶©´¶¢û™)
            
                If (aisClosed=1) Begin
                    // ò§ ú†§ò† °¢ú†©´¶ ¶´ò§ ßò´òú† ´¶ °¶¨£ß† ò§¶†•ú/°¢ú†©ú ´¶´ú
                    // ©û£ò†§ú† ß‡™ ´¶ ßò®ò©´ò´†°Ê ò§¶†öú† ò®ò °òüò®†ù¶¨£ú ´ò ßúõ†ò
                    // úß†£ú®†©£¶¨ ú°ß´‡©û™ °ò† úß†ôò®¨§©û™ ´†£¶¢¶ö†¶¨ ©´ò lines
                    Clear Pmoves
                    Move (Trim(asRecr)) to Pmoves.Partl_Recr
                    Find Gt Pmoves By Index.3
                    While ((Found=1) And (Pmoves.Partl_Recr=(Trim(asRecr))))
                        Reread Pmoves
                        Move 0 to Pmoves.Extra_Epimer
                        Move 0 to Pmoves.Ekpt_Epimer
                        Saverecord Pmoves
                        Unlock
                        Find Gt Pmoves By Index.3
                    Loop
                End
                Else Begin
                    // ò§ ú†§ò† ò§¶†Æ´¶ ¶´ò§ ßò´òú† ´¶ °¶¨£ß† ò§¶†•ú/°¢ú†©ú ´¶´ú
                    // ©û£ò†§ú† ß‡™ ´¶ ßò®ò©´ò´†°Ê °¢ú†§ú† ò®ò ¨ß¶¢¶öÂù¶¨£ú ´ò ßúõ†ò
                    // £ú ´†™ extra ú°ß´‡©ú†™ °ò† úß†ôò®¨§©ú†™ ö†ò °òüú Pmove
            
                    Move anExtra    to nYpolExtra
                    Move anEkpt     to nYpolEkpt
            
            
                    Move 0 to iNoOfLines
                    Clear Pmoves
                    Move (Trim(asRecr)) to Pmoves.Partl_Recr
                    Find Gt Pmoves By Index.3
                    While ((Found=1) And (Pmoves.Partl_Recr=(Trim(asRecr))))
                        Add 1 to iNoOfLines
                        Find Gt Pmoves By Index.3
                    Loop
            
                    If (iNoOfLines<>aiLines) Function_Return 50999
            
                    Move 0 to iNoOfLines
                    Clear Pmoves
                    Lock
                    Move (Trim(asRecr)) to Pmoves.Partl_Recr
                    Find Gt Pmoves By Index.3
                    While ((Found=1) And (Pmoves.Partl_Recr=(Trim(asRecr))))
                        Add 1 to iNoOfLines
                        If (iNoOfLines=aiLines) Begin
                            // Ä§ ú†§ò† û ´ú¢ú¨´ò†ò ö®ò££û ´¶¨ ßò®ò©´ò´†°¶Á
                            // ô·ù¶¨£ú ´¶ ¨ß¶¢¶†ß¶ ´‡§ ß¶©‡§ ö†ò §ò £û§ ¨ß·®•¶¨§
                            // õ†ò≠¶®ú™ ©´¶ ©¨§¶¢¶ ´¶¨ úß†£ú®†©£¶Á
                            Move nYpolExtra to Pmoves.Extra_Epimer
                            Move nYpolEkpt  to Pmoves.Ekpt_Epimer
                        End
                        Else Begin
                            // Å®†©°¶¨£ú ß¶©¶©´¶ ©¨££ú´¶Æû™ ´¶¨ ß¶©¶¨ ´û™ ö®ò££û™
                            // ©´¶ ©¨§¶¢†°¶ ß¶©¶ ´¶¨ ßò®ò©´ò´†°¶Á ‡©´ú §ò ß®¶°ÁØú†
                            // ´¶ ß¶©¶©´¶ ö†ò úß†£ú®†©£Ê ´‡§ ß¶©‡§.
                            Move ((Pmoves.Pms_Ambd/anSynolo)*100) to nPososto
            
                            Move 0 to nPoso
                            If (anExtra<>0) Begin
                                Move (Round(anExtra*nPososto/100)) to nPoso
                                Sub nPoso from nYpolExtra
                                Move nPoso to Pmoves.Extra_Epimer
                            End
                            Else Move 0 to Pmoves.Extra_Epimer
            
                            Move 0 to nPoso
                            If (anEkpt<>0) Begin
                                Move (Round(anEkpt*nPososto/100)) to nPoso
                                Sub nPoso from nYpolEkpt
                                Move nPoso to Pmoves.Ekpt_Epimer
                            End
                            Else Move 0 to Pmoves.Ekpt_Epimer
                        End
                        Saverecord Pmoves
                        Find Gt Pmoves By Index.3
                    Loop
                    Unlock
                End
                Send Beginning_Of_Data to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) True
                Function_Return rVal
            End_Function
            
            Procedure Ftiaxe_Tropous_Plhromhs String asPartlRecr Integer aisClosed Integer aiPartlRecnum
            
                String  sClient sErgo sPresp sBranch sWhere sWhat
                Integer iFoundOne iFromWhere isClosed
            
                // Hard Coded ¨ß¶¢¶ö†©£Ê™ ´®Êß‡§ ß¢û®‡£„™ £ú ´û§ ú•„™ ëìÇâÑâêàãÑåÜ ©ú†®·
                // 1. Ñ®ö¶  -  2. èú¢·´û™ -  3. ìß. è¢û®‡£„™ - 4. ìß¶°ò´·©´û£ò
            
                // É†òö®ò≠û ´‡§ ´®¶ß‡§ ß¢û®‡£û™ ©´¶ ßò®ò©´ò´†°Ê ò§ úÂ§ò† ò§¶†Æ´Ê
                If (Not(aisClosed)) Begin
                    Send Find to TParticl_DD First_Record 1
                    While ((Found=1) And (TPArticl.Partl_Recr=asPartlRecr))
                        Send Request_Delete to TParticl_DD
                        Send Find to TParticl_DD Next_Record 1
                    Loop
                    Procedure_Return
                End
            
                Clear Branch
                Move SysCurXr.Company_Code  to Branch.Company_Code
                Move SysCurXr.Branch_Code   to Branch.Branch_Code
                Find Eq Branch By Index.1 // Company_Code+Branch_Code
            
                Move Branch.Branch_Recr                                                 to sBranch
                Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Ptyppar_Is_What    to sWhat
                Get Field_Current_Value Of Particle_DD Field Particle.Client_ID         to sClient
                Get Field_Current_Value Of Particle_DD Field Particle.Presp_ID          to sPresp
                Get Field_Current_Value Of Particle_DD Field Particle.CN_Code           to sErgo
            
                Move 0 to iFoundOne
            
                Move 0 to iFromWhere
            
                Move '' to sWhere
            
                Clear TPErga
                Move sErgo to TPErga.CN_Code
                Find Gt TPErga By Index.1 // CN_Code+...
                If ((Found=1) And (TPErga.CN_Code=sErgo)) Move 1 to iFoundOne
                If (iFoundOne) Begin
                    Move 1 to iFromWhere
                    Clear TPErga
                    Move sErgo to TPErga.CN_Code
                    Find Gt TPErga By Index.1 // CN_Code+...
                    While ((Found=1) And (TPErga.CN_Code=sErgo))
                        Send Clear to TPArticl_DD
                        Send Clear to Baxiokat_DD
                        Move TPErga.Baxiokat_Code       to Baxiokat.Baxiokat_Code
                        Send Find to Baxiokat_DD Eq 1
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPErga.Pct_Epi_Synolou
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPErga.Paralabh_Meres
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPErga.Xarhtos_Meres
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPErga.Plhroteo_Meres
                        Send Calc_All_The_Fields to TPArticl_DD
                        Send Request_Save to Tparticl_DD
                        Find Gt TPErga By Index.1 // CN_Code+...
                    Loop
                End
                Else Begin
                    Move 0 to iFoundOne
                    Clear TPClient
                    Move sClient to TPClient.Client_ID
                    Find Gt TPClient By Index.1 // TPClient_ID+...
                    If ((Found=1) And (TPClient.Client_ID=sClient)) Move 1 to iFoundOne
                    If (iFoundOne) Begin
                        Move 2 to iFromWhere
                        Clear TPClient
                        Move sClient to TPClient.Client_ID
                        Find Gt TPClient By Index.1 // Client_ID+...
                        While ((Found=1) And (TPClient.Client_ID=sClient))
                            Send Clear to TPArticl_DD
                            Send Clear to Baxiokat_DD
                            Move TPClient.Baxiokat_Code to Baxiokat.Baxiokat_Code
                            Send Find to Baxiokat_DD Eq 1
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPClient.Pct_Epi_Synolou
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPClient.Paralabh_Meres
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPClient.Xarhtos_Meres
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPClient.Plhroteo_Meres
                            Send Calc_All_The_Fields to TPArticl_DD
                            Send Request_Save to Tparticl_DD
                            Find Gt TPClient By Index.1 // Client_ID+...
                        Loop
                    End
                    Else Begin
                        Move 0 to iFoundOne
                        Clear TPPresp
                        Move sPresp to TPPresp.PayResp_ID
                        Find Gt TPPresp By Index.1 // Presp_ID+...
                        If ((Found=1) And (TPPresp.PAYRESP_ID=sPresp)) Move 1 to iFoundOne
                        If (iFoundOne) Begin
                            Move 3 to iFromWhere
                            Clear TPPresp
                            Move sPresp to TPPresp.PayResp_ID
                            Find Gt TPPresp By Index.1 // Presp_ID+...
                            While ((Found=1) And (TPPresp.PAYRESP_ID=sPresp))
            
                                Send Clear to TPArticl_DD
                                Send Clear to Baxiokat_DD
                                Move TPPresp.Baxiokat_Code to Baxiokat.Baxiokat_Code
                                Send Find to Baxiokat_DD Eq 1
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPPresp.Pct_Epi_Synolou
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPPresp.Paralabh_Meres
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPPresp.Xarhtos_Meres
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPPresp.Plhroteo_Meres
                                Send Calc_All_The_Fields to TPArticl_DD
                                Send Request_Save to Tparticl_DD
                                Find Gt TPPresp By Index.1 // Presp_ID+...
                            Loop
                        End
                        Else Begin
                            Move 0 to iFoundOne
                            Clear TPBranch
                            Move sBranch to TPBranch.Branch_Recr
                            Find Gt TPBranch By Index.1 // Branch_Recr+...
                            If ((Found=1) And (TPBranch.Branch_Recr=sBranch)) Move 1 to iFoundOne
                            If (iFoundOne) Begin
                                Move 4 to iFromWhere
                                Clear TPBranch
                                Move sBranch to TPBranch.Branch_Recr
                                Find Gt TPBranch By Index.1 // Branch_Recr+...
                                While ((Found=1) And (TPBranch.Branch_Recr=sBranch))
                                    Send Clear to TPArticl_DD
                                    Send Clear to Baxiokat_DD
                                    Move TPBranch.Baxiokat_Code to Baxiokat.Baxiokat_Code
                                    Send Find to Baxiokat_DD Eq 1
                                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPBranch.Pct_Epi_Synolou
                                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPBranch.Paralabh_Meres
                                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPBranch.Xarhtos_Meres
                                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPBranch.Plhroteo_Meres
                                    Send Calc_All_The_Fields to TPArticl_DD
                                    Send Request_Save to Tparticl_DD
                                    Find Gt TPBranch By Index.1 // Branch_ID+...
                                Loop
                            End
                        End
                    End
                End
            End_Procedure
            
            Procedure OnClick
                String  sRecr sStr sActualLabel sNewLabel sFtiaxneiTpay spartl_akyr_recr
                String  sCompany sBranch sWapokat sLocked sPRCode sMessage
                Number  nExtra nEkpt nSynolo nPososto nOver nPlafon nGSynolo
                Integer isClosed iErr iRecnum iStatuspanel iLines iYear iYes iCheck iError_Object_ID
                Date    dHmnia dHmnia2
            
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr    to sRecr
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Hmnia   to dHmnia
                Get Field_Current_Value Of Particle_DD Field Particle.Recnum        to iRecnum
                Get Field_Current_Value Of Particle_DD Field ;
                        Particle.partl_akyr_recr                                    to spartl_akyr_recr
                Move (Trim(sRecr)) to sRecr
                Move (Trim(spartl_akyr_recr)) to spartl_akyr_recr
            
                If (sRecr<>'') Begin
            
                    Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ekleise to isClosed
            
                    Send Rebuild_Constraints to Wax_DD
                    Send Rebuild_Constraints to Witemx_DD
                    Send Rebuild_Constraints to Ptyppar_DD
                    Send Rebuild_Constraints to Pmoves_DD
            
                    Send Beginning_Of_Data   to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Particle(Self))))) True
            
                    If Status Pmoves Begin
                        Begin_Transaction
                            move Error_Object_ID to iError_Object_ID
                            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Totambd     to nSynolo
                            Get Field_Current_Value Of Particle_DD Field Particle.Partl_NoOfLines   to iLines
                            Get Field_Current_Value Of Particle_DD Field Particle.Partl_totdiscpc   to nEkpt
                            Get Field_Current_Value Of Particle_DD Field Particle.Partl_extra       to nExtra
                            Get Field_Current_Value Of Particle_DD Field Particle.Partl_payam       to nGSynolo
                            Get Field_Current_Value Of Ctypkin_DD  Field Ctypkin.Check_Overhead     to iCheck
            
                            If (Not(isClosed)) Begin
            
            //                                Get Field_Current_Value Of Clients_DD Field Clients.Client_Locked to sLocked
            //                                If (sLocked='1') error 9001 "é ≠¶®‚ò™ úÂ§ò† °¢ú†õ‡£‚§¶™ É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
            
                                // Ä§ úÂ§ò† °¢ú†©´Ê ´¶§ ò≠û§¶¨£ú §ò ´¶ ò§¶Â•ú† õ†¶´†
                                // ò¨´¶ ú¢ú¨üú®È§ú† ßÂ©´‡©û.
                                // Ä§ úÂ§ò† ò§¶†Æ´Ê °ò† ß·ú† §ò °¢úÂ©ú† ´¶´ú ú¢úöÆ¶¨£ú
                                // ´û ß†©´‡¢ûß´†°„ †°ò§Ê´û´ò ´¶¨ ≠¶®‚ò °ò† ´¶¨ ¨ß. ß¢û®‡£È§
                                If (iCheck) Begin
                                    Get Field_Current_Value Of Clients_DD Field Clients.Overhead    to nOver
                                    Get Field_Current_Value Of Clients_DD Field Clients.Plafon      to nPlafon
                                    If ((nPlafon<>0) And (nOver<1)) Begin
                                        Get YesNo_Box 'é ßú¢·´û™ ‚Æú† ¨ß‚®ôò©û ß¢ò≠Ê§\nåò ©¨§úÆÂ©‡ ;' 'Ñß†ôúôòÂ‡©û 2000 Particle' to iYes
                                        If (iYes=MBR_NO) error 9002
                                    End
                                    Else If ((nPlafon<>0) And (nOver<nGSynolo)) Begin
                                        If (Sysfile.Over_OverHead<>'1') Begin
                                            Get YesNo_Box 'é ßú¢·´û™ ‚Æú† ¨ß‚®ôò©û ß¢ò≠Ê§\nåò ©¨§úÆÂ©‡ ;' 'Ñß†ôúôòÂ‡©û 2001 Particle' to iYes
                                            If (iYes=MBR_NO) error 9003
                                        End
                                        Else Begin
                                            Move '' to sMessage
                                            Append sMessage "Éú§ úßò®°úÂ û õ†òü‚©†£û ßÂ©´‡©û ´¶¨ ≠¶®‚ò"
                                            Append sMessage "\ní¶ ©Á©´û£ò úß†´®‚ßú† ´û§ ßò®·°ò£Øû ©´û§ ú§û£‚®‡©û."
                                            Append sMessage "\nÜ õ†ò≠¶®· ò§‚®Æú´ò† ©ú " (String(nGSynolo-nOver)) " Ñ¨®È"
                                            Append sMessage "\nåò ß®¶Æ‡®„©‡ £ú ´û§ ú§û£‚®‡©û ?"
                                            Get YesNo_Box sMessage "Ñ®È´û©û" 0 to iYes
                                            If (iYes=MBR_No);
                                                error 9004 "Äß¶≠ò©Â©ò´ú §ò ãÜå öÂ§ú† û ú§û£‚®‡©û. É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                                        End
                                    End
            
                                    Get Field_Current_Value Of Payresp_DD Field Payresp.Overhead to nOver
                                    Get Field_Current_Value Of Payresp_DD Field Payresp.Plafon   to nPlafon
                                    Get Field_Current_Value Of Payresp_DD Field Payresp.Presp_ID to sPRCode
                                    If ((nPlafon<>0) And (nOver<1)) Begin
                                        Get YesNo_Box 'é ¨ß.ß¢û®‡£È§ ‚Æú† ¨ß‚®ôò©û ß¢ò≠Ê§\nåò ©¨§úÆÂ©‡ ;'  'Ñß†ôúôòÂ‡©û 2002 Particle' to iYes
                                        If (iYes=MBR_NO) error 9005
                                    End
                                    Else If ((nPlafon<>0) And (nOver<nGSynolo)) Begin
                                        If (Sysfile.Over_OverHead<>'1') Begin
                                            Get YesNo_Box 'é ¨ß.ß¢û®‡£È§ ‚Æú† ¨ß‚®ôò©û ßÂ©´‡©û™\nåò ©¨§úÆÂ©‡ ;'  'Ñß†ôúôòÂ‡©û 2003 Particle' to iYes
                                            If (iYes=MBR_NO) error 9006
                                        End
                                        Else Begin
                                            Move '' to sMessage
                                            Append sMessage "Éú§ úßò®°úÂ û õ†òü‚©†£û ßÂ©´‡©û ´¶¨ ìß. ë¨§ò¢¢òöÈ§"
                                            Append sMessage "\ní¶ ©Á©´û£ò úß†´®‚ßú† ´û§ ßò®·°ò£Øû ©´û§ ú§û£‚®‡©û."
                                            Append sMessage "\nÜ õ†ò≠¶®· ò§‚®Æú´ò† ©ú " (String(nGSynolo-nOver)) " É®Æ"
                                            Append sMessage "\nåò ß®¶Æ‡®„©‡ £ú ´û§ ú§û£‚®‡©û ?"
                                            Get YesNo_Box sMessage "Ñ®È´û©û" 0 to iYes
                                            If (iYes=MBR_No);
                                                error 9004 "Äß¶≠ò©Â©ò´ú §ò ãÜå öÂ§ú† û ú§û£‚®‡©û. É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                                        End
                                    End
                                End
            
                                // js 01/04/2003
                                // Prosthiki gia online enhmerosh GL (ENHMEROSH)
                                If (Sysfile.OnLine_Logist=1) Begin
                                    Set pddate      Of Doenhgl  to dHmnia
                                    Set pirecnum    Of Doenhgl  to iRecnum
                                    Send DoProcess              to Doenhgl
                                    Set pdDate      Of DoEnhmgl to dHmnia
                                    Send DoProcess              to Doenhmgl
                                End
                                // js 01/04/2003
            
            
                            End // If (Not(isClosed))
                            Else Begin
                                // If is closed
            
                                // js 11/04/2003
                                // Elegxoume prota an exei logistikopoihthei
                                If (spartl_akyr_recr<>'') Begin
                                    Move '' to sMessage
                                    Append sMessage "í¶ ßò®ò©´ò´†°Ê ‚Æú† ¢¶ö†©´†°¶ß¶†ûüúÂ"
                                    Append sMessage "\nÄ°¨®È©´ú ß®È´ò ´¶ ·®ü®¶ ©´û§ Çä °ò† £ú´·"
                                    Append sMessage "\nòß¶ ´†™ ö‚≠¨®ú™, •ú£ò®°·®ú´ú ´¶ ßò®ò©´ò´†°Ê."
                                    Error 7000 sMessage
                                End
            
                                // js 01/04/2003
                                // Prosthiki gia online enhmerosh GL (AKYROSH)
                                If (Sysfile.OnLine_Logist=1) Begin
                                    Clear Gbridgeh
                                    Move Particle.partl_akyr_recr to Gbridgeh.Gbridgeh_Recr
                                    Find Eq Gbridgeh By Index.2
                                    If (Found) Begin
                                        Set pirecnum    Of DoAkyr   to Gbridgeh.Recnum
                                        Send DoProcess              to DoAkyr
                                    End
                                    Else Begin
                                        // ?????????
                                    End
                                End
                                // js 01/04/2003
                            End
                            Set piLathos            Of (bpEnCmvs(Self)) to 0
                            Set psParticleRecr      Of (bpEnCmvs(Self)) to sRecr
                            Set piParticleID        Of (bpEnCmvs(Self)) to (Particle(Self))
                            Set psModule            Of (bpEnCmvs(Self)) to (psModule(Self))
                            Send DoProcess                              to (bpEnCmvs(Self))
                        End_Transaction
            
                        move iError_Object_ID to Error_Object_ID
                    End
                    Else Send info_box "Éú§ ¢ú†´¶¨®öúÂ û õ†òõ†°ò©Âò ò¨´„.\nÉú§ ¨ß·®Æú† °ò££Âò ö®ò££„ ©´¶ ßò®ò©´ò´†°Ê"
            
                    If (piTxtID(bpEnCmvs(Self))<>0) Send Deactivate to (piTxtID(bpEnCmvs(Self)))
            
                    Send Reset_All_Files_Except_System
            
                    Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
            
                    If (Not(iErr)) Begin
                        Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to isClosed
                        Get Field_Current_Value Of Ptyppar_DD   Field Ptyppar.Ftiaxnei_Tpay     to sFtiaxneiTpay
                        If (Trim(sFtiaxneiTpay)='1') Send Ftiaxe_Tropous_Plhromhs sRecr isClosed iRecnum
                        Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                    End
            
                    Set No_Create_State Of (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) to (isClosed=1)
            
                    If (piSfalma(Self)) Begin
                             If (piSfalma(Self)= 9001) Send Stop_Box "é ≠¶®‚ò™ úÂ§ò† °¢ú†õ‡£‚§¶™" "É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                        Else If (piSfalma(Self)= 9002) Send Stop_Box "é ≠¶®‚ò™ õú§ ‚Æú† õ†òü‚©†£û ßÂ©´‡©û\nÇ†ò §ò ¶¢¶°¢û®‡üúÂ û ©¨ö°ú°®†£‚§û ©¨§ò¢¢òö„" "É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                        Else If (piSfalma(Self)= 9003) Send Stop_Box "Éú§ úßò®°úÂ û õ†òü‚©†£û ßÂ©´‡©û ´¶¨ ≠¶®‚ò\nö†ò §ò ¶¢¶°¢û®‡üúÂ û ©¨ö°ú°®†£‚§û ©¨§ò¢¢òö„\ní¶ ©Á©´û£ò ‚Æú† ®¨ü£†©´úÂ §ò £û§ úß†´®‚Øú† ´û§ ú§û£‚®‡©û" "É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                        Else If (piSfalma(Self)= 9004) Send Info_Box "Äß¶≠ò©Â©ò´ú §ò ãÜå öÂ§ú† û ú§û£‚®‡©û" "É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                        Else If (piSfalma(Self)= 9005) Send Stop_Box
                        Else If (piSfalma(Self)= 9006) Send Stop_Box "Éú§ úßò®°úÂ û õ†òü‚©†£û ßÂ©´‡©û ´¶¨ ìß. ë¨§ò¢¢òöÈ§\nö†ò §ò ¶¢¶°¢û®‡üúÂ û ©¨ö°ú°®†£‚§û ©¨§ò¢¢òö„\ní¶ ©Á©´û£ò ‚Æú† ®¨ü£†©´úÂ §ò £û§ úß†´®‚Øú† ´û§ ú§û£‚®‡©û" "É†ò°¶ß„ õ†òõ†°ò©Âò™ °¢ú†©Â£ò´¶™"
                        Else If (piSfalma(Self)=44444) Send Stop_Box "Éú§ ô®‚üû°ú Cmoves ö†ò §ò õ†òö®ò≠úÂ\n°ò´ò ´¶ ·§¶†ö£ò ´¶¨ ßò®ò©´ò´†°¶Á" "É†ò°¶ß„ õ†òõ†°ò©Âò™ ò§¶Âö£ò´¶™"
                        Else If (piSfalma(Self)=44445) Send Stop_Box "Éú§ ô®‚üû°ú Cmoves ßò®ò°®·´û©û™ ö†ò §ò õ†òö®ò≠úÂ\n°ò´ò ´¶ ·§¶†ö£ò ´¶¨ ßò®ò©´ò´†°¶Á" "É†ò°¶ß„ õ†òõ†°ò©Âò™ ò§¶Âö£ò´¶™"
                        Else If (piSfalma(Self)=50000) Send Stop_Box "No Initial Particle recr is passed"                         "Error 50000"
                        Else If (piSfalma(Self)=50001) Send Stop_Box "Initially Passed Particle Recr Not Found"                   "Error 50001"
                        Else If (piSfalma(Self)=50002) Send Stop_Box "Error While attempting to Delete Cmoves"                    "Error 50002"
                        Else If (piSfalma(Self)=50003) Send Stop_Box "Could not find Cmoves with Particle_Cmoves_Recr"            "Error 50003"
                        Else If (piSfalma(Self)=50004) Send Stop_Box "Error While Saving Particle after deletion Cmoves+WcMoves"  "Error 50004"
                        Else If (piSfalma(Self)=50005) Send Stop_Box "Client record not found"                                    "Error 50005"
                        Else If (piSfalma(Self)=50006) Send Stop_Box "Ctypkin record not found"                                   "Error 50006"
                        Else If (piSfalma(Self)=50007) Send Stop_Box "Error While Saving Cmoves"                                  "Error 50007"
                        Else If (piSfalma(Self)=50008) Send Stop_Box "Saved Cmoves but dont have Recr"                            "Error 50008"
                        Else If (piSfalma(Self)=50009) Send Stop_Box "Error While Saving Particle after Saving Cmoves+Wmoves"     "Error 50009"
                        Else If (piSfalma(Self)=50010) Send Stop_Box "Nomisma record not found"                                   "Error 50010"
                        Else If (piSfalma(Self)=50011) Send Stop_Box "Client record not found for saving flags"                   "Error 50011"
                        Else If (piSfalma(Self)=50012) Send Stop_Box "No Flags found in Cflagkin to process"                      "Error 50012"
                        Else If (piSfalma(Self)=50013) Send Stop_Box "Client record not found for saving flags parakrat"          "Error 50013"
                        Else If (piSfalma(Self)=50014) Send Stop_Box "Error While Saving Cmoves Parakrat"                         "Error 50014"
                        Else If (piSfalma(Self)=50015) Send Stop_Box "Saved Cmoves Parakrat but dont have Recr"                   "Error 50015"
                        Else If (piSfalma(Self)=50016) Send Stop_Box "Client record not found"                                    "Error 50016"
                        Else If (piSfalma(Self)=50017) Send Stop_Box "Error While Saving Cmoves Parakrat"                         "Error 50017"
                        Else If (piSfalma(Self)=50018) Send Stop_Box "Ctypkin record not found After Parakrat"                    "Error 50018"
                        Else If (piSfalma(Self)=50019) Send Stop_Box "Error While Saving Cmoves After Parakrat"                   "Error 50019"
                        Else If (piSfalma(Self)=50111) Send Stop_Box "Could Not Delete Cmoves to Open Particle"                   "Error 50111"
                        Else If (piSfalma(Self)=51000) Send Stop_Box "Found Cmoves Record on Open Particle"                       "Error 51000"
                        Else If (piSfalma(Self)=51001) Send Stop_Box "Found Cmoves Parakrat Record on Open Particle"              "Error 51001"
                        Else If (piSfalma(Self)=56009) Send Stop_Box "Error While Saving Particle after Saving Cmoves+Wmoves"     "Error 50009"
                        Else If (piSfalma(Self)=59999) Send Stop_Box "Business Process Called without setting psModule property"  "Error 59999"
                        Else If (piSfalma(Self)=60002) Send Stop_Box "Error While attempting to Delete WCmoves"                   "Error 60002"
                        Else If (piSfalma(Self)=60003) Send Stop_Box "Could not find WCmoves with Particle_WCmoves_Recr"          "Error 60003"
                        Else If (piSfalma(Self)=60006) Send Stop_Box "Wtypkin record not found"                                   "Error 60006"
                        Else If (piSfalma(Self)=60007) Send Stop_Box "Error While Saving WCmoves"                                 "Error 60007"
                        Else If (piSfalma(Self)=60008) Send Stop_Box "Saved WCmoves but dont have Recr"                           "Error 60008"
                        Else If (piSfalma(Self)=60012) Send Stop_Box "No Flags found in Wflagkin to process"                      "Error 60012"
                        Else If (piSfalma(Self)=60111) Send Stop_Box "Could Not Delete WCmoves to Open Particle"                  "Error 60111"
                        Else If (piSfalma(Self)=60106) Send Stop_Box "Witemx Record Not Found"                                    "Error 60106"
                        Else If (piSfalma(Self)=60206) Send Stop_Box "Wax Record Not Found"                                       "Error 60206"
                        Else If (piSfalma(Self)=60500) Send Stop_Box "Could Not Update Pmoves with Wcmoves Recr"                  "Error 60500"
                        Else If (piSfalma(Self)=61000) Send Stop_Box "Found WCmoves Record on Open Particle"                      "Error 61000"
                        Else If (piSfalma(Self)=55555) Send Stop_Box "Error Saving Clients after updating Ypoloipa"               "Error 55555"
                        Else If (piSfalma(Self)=55556) Send Stop_Box "Error Saving Clients after updating Hmnies"                 "Error 55556"
                        Else If (piSfalma(Self)=55560) Send info_box "Éú§ ¢ú†´¶¨®öúÂ û õ†òõ†°ò©Âò ò¨´„.\nÉú§ ¨ß·®Æú† °ò££Âò ö®ò££„ ©´¶ ßò®ò©´ò´†°Ê" "Error 55560"
                        Else If (piSfalma(Self)=50013) Send info_box "é ≠¶®‚ò™ õú§ ‚Æú† õ†òü‚©†£û ßÂ©´‡©û"                        "Error 50013"
                        Else If (piSfalma(Self)=50014) Send info_box "é ≠¶®‚ò™ úÂ§ò† °¢ú†õ‡£‚§¶™"                                 "Error 50014"
                        Else If (piSfalma(Self)=50015) Send info_box "é ìß. è¢û®‡£È§ õú§ ‚Æú† õ†òü‚©†£û ßÂ©´‡©û"                  "Error 50015"
                        Else If (piSfalma(Self)=77777) Send info_box "ë≠·¢£ò ©´û§ §úò BP"                                         "Error 77777"
                        Else If (piSfalma(Self)=77755) Send info_box "í¶ ßò®ò©´ò´†°Ê ß®‚ßú† §ò ‚Æú† ß¶©Ê\nô·©û ´‡§ °†§„©ú‡§ ß¶¨ ß®‚ßú† §ò °·§ú†" "Error 77755"
                        Else If (piSfalma(Self)<>0)    Send Info_Box 'ãû °ò´òÆ‡®û£‚§¶ ¢·ü¶™' (String(iErr))
                    End
                    Else Begin
                        If (isClosed) send info_box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†©´Ê.\nÉú§ úß†´®‚ßú´ò† û ´®¶ß¶ß¶Âû©û ´¶¨" 'è¢û®¶≠¶®Âò'
                        Else          send info_box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† ò§¶†Æ´Ê.\nÑß†´®‚ßú´ò† û ´®¶ß¶ß¶Âû©û ´¶¨" 'è¢û®¶≠¶®Âò'
                    End
                End
                else send info_box "Éú§ ¨ß·®Æú† ´®‚Æ¶§ ßò®ò©´ò´†°Ê. âò££Âò ò¢¢òö„ õú§ ‚ö†§ú" 'è¢û®¶≠¶®Âò'
            
                Send Activate                       to Particle_Partl_Hmnia
            End_Procedure // OnClick
            
            
            //AB-StoreEnd

        End_Object    // btnKleisimo

        Object btnEktyposh is a ButtonSub
            Set Label to "Ñ°´Á&ß‡©û"
            Set Bitmap to "Print17.bmp"
            Set Size to 21 23
            Set Location to 235 2
            Set Focus_Mode to Pointer_Only
            Set Form_FontHeight Item 0 to 12
            Set Form_FontWeight Item 0 to 600
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ñ°´Áß‡©û ßò®ò©´ò´†°¶Á"
            
            Procedure OnClick
                String  Wrecr sCmovesRecr sCmovesPar sPtypparCode sSysx sPseiraRecr sPtypparRecr
                String  sWcmovesRecr sWcmovesPar sMessage sSeira sPtypparWhat sSysxRecr sParticleRecr sSxetiko
                Integer iNextNo iRecnum iMsg iCurNo iErr iLathos iYes isOK isClosed iID
                Date    dHmnia dHmnia2 dLast
            
                Indicate Err False
            
                If (Particle.Recnum) Begin
            
                    Get Field_Current_Value Of Particle_DD Field Particle.Partl_Hmnia   to dHmnia
                    Move '26/03/2002' to dHmnia2
                    If (dHmnia<dHmnia2) Begin
                        Send Stop_Box 'í¶ ßò®ò©´ò´†°Ê ò¨´Ê ÉÑå ú°´¨ßÈ§ú´ò†' 'ë≠·¢£ò 777778'
                        Procedure_Return
                    End
            
                    Clear Branch
                    Move Syscurxr.Company_Code  to Branch.Company_Code
                    Move Syscurxr.Branch_Code   to Branch.Branch_Code
                    Find Eq Branch By Index.1
                    Move Branch.Last_Hmnia_Ekt  to dLast
            //                    Reread Sysfile
            //                    Unlock
                    If (dHmnia<dLast) Begin
                        Send Stop_Box 'ÑÆú† ´¨ß‡üúÂ ßò®ò©´ò´†°Ê £ú £ú´òöú§‚©´ú®û û£/§Âò' 'ë≠·¢£ò 777779'
                        Procedure_Return
                    End
            
                    Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr        to sParticleRecr
                    Get Field_Current_Value Of Particle_DD Field Particle.Pseira_Seira      to sSeira
                    Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Ptyppar_Code       to sPtypparCode
                    Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Ptyppar_is_what    to sPtypparWhat
                    Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Sysxet_Ptyppar     to sSysx
                    Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Sysx_Ptyp_Recr     to sSysxRecr
                    Get Field_Current_Value Of Ptyppar_DD  Field Ptyppar.Ptyppar_Recr       to sPtypparRecr
            
                    Move (Trim(sSysx)) to sSysx
            
                    // An einai sysxetismeno parastatiko
                    If (sSysx<>'') Begin
                        Clear Pseira
                        Move SyscurXr.Company_Code  to Pseira.Company_Code
                        Move SyscurXr.Branch_Code   to Pseira.Branch_Code
                        Move sSysx                  to Pseira.Ptyppar_Code
                        Move sSeira                 to Pseira.Pseira_Seira
                        Find Eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+Ptyppar_Code+Pseira_Seira
                        If ((Found) And (Pseira.Pseira_Autonum<>1)) Begin
                            Send Stop_Box 'Ü ©ú†®· ´¶¨ ßò®ò©´/°¶Á úÂ§ò† Æú†®Êö®ò≠û\n°ò† ‡™ ú° ´¶Á´¶¨ ÉÑå £ß¶®úÂ §ò ´¨ß‡üúÂ' 'ë≠·¢£ò 77710'
                            Procedure_Return
                        End
                        Else Begin
                            If (Not(Found)) Begin
                                Send Stop_Box 'Ü ©ú†®· ´¶¨ ßò®ò©´/°¶Á úÂ§ò† ò§Áßò®°´û' 'ë≠·¢£ò 77711'
                                Procedure_Return
                            End
                        End
                    End
                    Else Begin
                        // An Den einai sysxetismeno parastatiko
                        Clear Pseira
                        Move SyscurXr.Company_Code  to Pseira.Company_Code
                        Move SyscurXr.Branch_Code   to Pseira.Branch_Code
                        Move sPtypparCode           to Pseira.Ptyppar_Code
                        Move sSeira                 to Pseira.Pseira_Seira
                        Find Eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+Ptyppar_Code+Pseira_Seira
                        If ((Found) And (Pseira.Pseira_Autonum<>1)) Begin
                            Send Stop_Box 'Ü ©ú†®· ´¶¨ ßò®ò©´/°¶Á úÂ§ò† Æú†®Êö®ò≠û\n°ò† ‡™ ú° ´¶Á´¶¨ ÉÑå £ß¶®úÂ §ò ´¨ß‡üúÂ' 'ë≠·¢£ò 77712'
                            Procedure_Return
                        End
                        Else Begin
                            If (Not(Found)) Begin
                                Send Stop_Box 'Ü ©ú†®· ´¶¨ ßò®ò©´/°¶Á úÂ§ò† ò§Áßò®°´û' 'ë≠·¢£ò 77713'
                                Procedure_Return
                            End
                        End
                    End
            
                    Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ekleise   to isClosed
                    If (NOT(isClosed)) Begin
                        Send Stop_Box 'í¶ ßò®ò©´ò´†°Ê úÂ§ò† ò§¶†Æ´Ê\n°ò† ÉÑå £ß¶®úÂ §ò ´¨ß‡üúÂ' 'ë≠·¢£ò 77775'
                        Procedure_Return
                    End
            
                    If (Particle.No_Print_Module=0) Begin
            
                        Move Particle.Recnum to iRecnum
            
                        If (Particle.Partl_No<0) Begin
            
                            Move 0 to isOk
                                 If (Trim(Clients.Client_ID)     = '') Move -1 to isOK
                            Else If (Trim(Clients.Client_Name)   = '') Move -2 to isOK
                            Else If (Trim(Clients.Client_Job)    = '') Move -3 to isOK
                            Else If (Trim(Clients.Client_Address)= '') Move -4 to isOK
                            Else If (Trim(Cities.City_Descr)     = '') Move -5 to isOK
                            Else If (Trim(Clients.Client_Afm)    = '') Move -6 to isOK
                            Else If (Trim(Clients.Client_DOY)    = '') Move -7 to isOK
                            Else If (Trim(Particle.Ora_Apostolhs)= '') Move -8 to isOK
            
                            If (isOK<>0) Begin
                                     If (isOK=-1) Send Stop_Box 'Éú§ ¨ß·®Æú† °‡õ†°Ê™ èú¢·´û' 'ë≠·¢£ò'
                                Else If (isOK=-2) Send Stop_Box 'Éú§ ¨ß·®Æú† úß‡§¨£Âò èú¢·´û' 'ë≠·¢£ò'
                                Else If (isOK=-3) Send Stop_Box 'Éú§ ¨ß·®Æú† úß·ööú¢£ò èú¢·´û' 'ë≠·¢£ò'
                                Else If (isOK=-4) Send Stop_Box 'Éú§ ¨ß·®Æú† õ†úÁü¨§©û èú¢·´û' 'ë≠·¢£ò'
                                Else If (isOK=-5) Send Stop_Box 'Éú§ ¨ß·®Æú† ßÊ¢û èú¢·´û' 'ë≠·¢£ò'
                                Else If (isOK=-6) Send Stop_Box 'Éú§ ¨ß·®Æú† Äîã èú¢·´û' 'ë≠·¢£ò'
                                Else If (isOK=-7) Send Stop_Box 'Éú§ ¨ß·®Æú† Ééì èú¢·´û' 'ë≠·¢£ò'
                                If (isOK<>-8) Procedure_Return
                                Get YesNo_Box 'Éú§ úÂ§ò† ©¨£ß¢û®‡£‚§û û È®ò\nåò ©¨§úÆÂ©‡ £ú ´û§ ú°´Áß‡©û;' "Ñ®È´û©û" 0 to iYes
                                If (iYes=MBR_NO) Procedure_Return
                            End
                            Move 0 to isOK
            
                            If (Ptyppar.Ti_Typonei_Pms     <>'2') Begin
                                     If (Trim(Particle.Skopos_Diakin);
                                                                 = '') Move -9 to isOK
                                Else If (Trim(Particle.Topos_Apostolhs);
                                                                 = '') Move -10 to isOK
                                Else If (Trim(Particle.Tropos_Diakin);
                                                                 = '') Move -11 to isOK
                                If (isOK<>0) Begin
                                         If (isOK=-9)  Send Stop_Box 'Éú§ ¨ß·®Æú† ©°¶ßÊ™ õ†ò°Â§û©û™' 'ë≠·¢£ò'
                                    Else If (isOK=-10) Send Stop_Box 'Éú§ ¨ß·®Æú† ´Êß¶™ òß¶©´¶¢„™' 'ë≠·¢£ò'
                                    Else If (isOK=-11) Send Stop_Box 'Éú§ ¨ß·®Æú† ´®Êß¶™ õ†ò°Â§û©û™' 'ë≠·¢£ò'
                                    Procedure_Return
                                End
                            End
            
                            If (sSysx<>'') Begin
                                // Ç†ò ¢¶ö¶¨™ ò©≠ò¢ú†ò™ úßú†õû üò ò¢¢ò•¶¨£ú
                                // ´ò current records °ò† üò ß®úßú† §ò úßò§ú¢ü¶¨£ú ©'ò¨´·
                                If (Trim(sPtypparRecr)='') Begin
                                    Send Stop_Box 'ÑÆò©ò ´¶ ´®‚Æ¶§ Ptyppar' 'ë≠·¢£ò 65000'
                                    Procedure_Return
                                End
            
                                Clear Ptyppar
                                Move SyscurXr.Company_Code  to Ptyppar.Company_Code
                                Move SyscurXr.Branch_Code   to Ptyppar.Branch_Code
                                Move (Trim(sSysx))          to Ptyppar.Ptyppar_Code
                                Find Eq Ptyppar By Index.1
                                If (Not(Found)) Begin
                                    Send Stop_Box 'Éú§ ô®Â©°‡ Ptyppar ©¨©Æ‚´†©û™' 'ë≠·¢£ò 65001'
                                    Procedure_Return
                                End
                            End
            
            //                            Send ChangeAllFileModes DF_Filemode_ReadOnly
            //                            Set_Attribute DF_File_Mode Of Pseira.File_Number    to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Sysfile.File_Number   to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Particle.File_Number  to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Psxetika.File_Number  to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of PmsSxet.File_Number   to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Cmoves.File_Number    to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Wcmoves.File_Number   to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Pmoves.File_Number    to DF_Filemode_Default
            //                            Set_Attribute DF_File_Mode Of Particle.File_Number  to DF_Filemode_Default
            
                            BEGIN_TRANSACTION
                                Reread
                                Move Error_Object_ID to iID
            
                                Set piSfalma    to 0
            
                                Clear Pseira
                                Move SysCurXr.Company_Code          to Pseira.Company_Code
                                Move SysCurXr.Branch_Code           to Pseira.Branch_Code
                                Move Ptyppar.Ptyppar_Code           to Pseira.Ptyppar_Code
                                Move Particle.Pseira_Seira          to Pseira.Pseira_Seira
                                Move Particle.Partl_No              to iCurNo
                                Move (Trim(Particle.Cmoves_Recr))   to sCmovesRecr
                                Find eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+;
                                                        //                Ctypkin_Code+Wtypkin_Code+Ptyppar_Code+Seira_Seira
                                If (Found=1) Begin
                                    // js 25/04/2002
                                    // Ä§ û ©ú†®ò ú†§ò† autonum
                                    If (((Ptyppar.Ptyppar_Is_What='2') Or ((Ptyppar.Ptyppar_Is_What='1') And (sSysx<>''))) And (Pseira.Pseira_Autonum=1)) Begin
                                        If (Particle.Partl_Hmnia<dLast) Begin
                                            Error 9007 'í¶ ßò®ò©´ò´†°Ê ‚Æú† û£ú®¶£û§Âò ß®¶öú§‚©´ú®û ´û™ ©û£ú®†§„™'
                                        End
                                        Move (Pseira.Autonum_Plus+1) to iNextNo
                                        Move (Pseira.Autonum_Plus+1) to Pseira.Autonum_Plus
                                        Move Particle.Partl_Hmnia    to Pseira.Auto_Plus_Last
                                        Saverecord Pseira
            
                                        Reread Branch
                                        If (Particle.Partl_Hmnia>dLast) Begin
                                            Move Particle.Partl_Hmnia to Branch.Last_Hmnia_Ekt
                                            Saverecord Branch
                                        End
                                        Unlock
                                        If (sSysx<>'') Begin
                                            Clear Ptyppar
                                            Move (Trim(sPtypparRecr)) to Ptyppar.Ptyppar_Recr
                                            Find Eq Ptyppar By Index.2
                                            If (Not(Found)) error 2090 "Éú§ ô®Â©°‡ ´¶§ °‡õ†°Ê ´¶¨ ßò®ò©´ò´†°¶Á"
                                        End
                                        Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
            
                                        Move iNextNo to Particle.Partl_No
                                        Saverecord Particle
                                        Move (Err) to iErr
                                        If (iErr) error 9001 'ë≠·¢£ò °ò´ò ´û§ ò¢¢òö„ ò®†ü£¶Á'
            
                                        Set Button_State    of (Wait(Self)) to False
                                        Set BarVisibleState of (Wait(Self)) to '' False
                                        Send Popup          to (Wait(Self))
            
                                        // 20/09/2002 Enhmerosh Psxetika me thetiko arithmo
                                        Clear Psxetika
                                        Move sParticleRecr to Psxetika.Partl_Recr
                                        Find Gt Psxetika by index.4
                                        While ((Found=1) And (Psxetika.Partl_Recr=sParticleRecr))
                                            Move Psxetika.Psx_Partl_Recr            to sSxetiko
                                            Clear Psxetika
                                            Move sSxetiko                           to Psxetika.Partl_Recr
                                            Move sParticleRecr                      to Psxetika.Psx_Partl_Recr
                                            Find Eq Psxetika by index.4
                                            If (Found) Begin
                                                Move Psxetika.Sx_Partl_No           to sCmovesPar
                                                Move (Replace(String(iCurNo),;
                                                       sCmovesPar,String(iNextNo))) to sCmovesPar
                                                Move sCmovesPar                     to Psxetika.Sx_Partl_No
                                                Saverecord Psxetika
                                            End
                                            Clear Psxetika
                                            Move sParticleRecr  to Psxetika.Partl_Recr
                                            Move sSxetiko       to Psxetika.Psx_Partl_Recr
                                            Find Eq Psxetika by index.4
                                            Find Gt Psxetika by index.4
                                        Loop
            
            
                                        // 20/09/2002 Enhmerosh Psxetika me thetiko arithmo
                                        Integer iPmsRecn
                                        Clear PmsSxet
                                        Move sParticleRecr to PmsSxet.Arx_Partl_Recr
                                        Find Gt PmsSxet By Index.2 // Arx_Partl_Recr+Recnum
                                        While ((Found=1) And (PmsSxet.Arx_Partl_Recr=sParticleRecr))
                                            Move PmsSxet.Recnum                                         to iPmsRecn
                                            Move PmsSxet.Sx_Arithmos                                    to sCmovesPar
                                            Move (Replace(String(iCurNo),sCmovesPar,String(iNextNo)))   to sCmovesPar
                                            Move sCmovesPar                                             to PmsSxet.Sx_Arithmos
                                            Saverecord PmsSxet
                                            Clear PmsSxet
                                            Move sParticleRecr  to PmsSxet.Arx_Partl_Recr
                                            Move iPmsRecn       to PmsSxet.Recnum
                                            Find Eq PmsSxet by index.2
                                            Find Gt PmsSxet By Index.2 // Arx_Partl_Recr+Recnum
                                        Loop
            
            
                                        // Epanatopothethsh
                                        Clear Particle
                                        Move sParticleRecr to Particle.Partl_Recr
                                        Find Eq Particle by index.2
                                        Send Find to Particle_DD Eq 2
            
                                        // 18/09/2001 Allagh gia na enhmeronei kai tyxon
                                        // Cmoves kai Wcmoves me ton thetiko arithmo **START**
                                        If (sCmovesRecr<>'') Begin
                                            Send Clear          to Cmoves_DD2
                                            Move sCmovesRecr    to Cmoves.Cmoves_Recr
                                            Send Find to Cmoves_DD2 Eq 2
                                            If (Found) Begin
                                                Get Field_Current_Value Of Cmoves_DD2 Field Cmoves.Cmoves_Par   to sCmovesPar
                                                Move (Replace(String(iCurNo),sCmovesPar,String(iNextNo)))       to sCmovesPar
                                                Set Field_Changed_Value Of Cmoves_DD2 Field Cmoves.Cmoves_Par   to sCmovesPar
                                                Send Request_Save to Cmoves_DD2
                                                Send UpdateWait to (Wait(Self))  ('Ñ§û£‚®‡©û Cmoves  '-Cmoves.Cmoves_Recr)
                                            End
                                            Else error 9003 'Éú§ ô®‚üû°ú û °Â§û©û ©´¶ Cmoves'
            
                                            Send Find to Pmoves_DD First_Record 3
                                            While (Found)
                                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.WCmoves_Recr to sWcmovesRecr
                                                If (Trim(sWcmovesRecr)<>'') Begin
                                                    Send Clear to Wcmoves_DD2
                                                    Move (Trim(sWcmovesRecr)) to Wcmoves.Wcmove_Recr
                                                    Send Find to Wcmoves_DD2 Eq 2
                                                    If (Found) Begin
                                                        Get Field_Current_Value Of WCmoves_DD2 Field WCmoves.WCmove_Par to sWCmovesPar
                                                        Move (Replace(String(iCurNo),sWCmovesPar,String(iNextNo)))      to sWCmovesPar
                                                        Set Field_Changed_Value Of WCmoves_DD2 Field WCmoves.WCmove_Par to sWCmovesPar
                                                        Send Request_Save to WCmoves_DD2
                                                        Send UpdateWait to (Wait(Self))  ('Ñ§û£‚®‡©û WCmoves '-WCmoves.WCmove_Recr)
                                                    End
                                                    Else error 9005 'Éú§ ô®‚üû°ú û °Â§û©û ©´¶ WCmoves'
                                                End
                                                Set Field_Changed_Value Of Pmoves_DD Field Pmoves.Partl_No to iNextNo
                                                Send Request_Save to Pmoves_DD
            
                                                Send Find to Pmoves_DD Next_Record 3
                                            Loop
                                        End
                                        Send Deactivate to (Wait(Self))
                                        // 18/09/2001 Allagh gia na enhmeronei kai tyxon
                                        // Cmoves kai Wcmoves me ton thetiko arithmo **END**
                                        Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                                    End
                                End
                                Else error 9008 'Éú§ ô®‚üû°ú û ©¨©Æú´†©£‚§û ©ú†®·'
            
                                Move '1' to Particle.Partl_Ektyposh
                                Move '1' to Particle.Partl_Ekleise
                                Saverecord Particle
            
                            END_TRANSACTION
                            Code_Continue4:
                            Move iID to Error_Object_ID
                            UnLock
            //                            Send ChangeAllFileModes DF_Filemode_Default
            
                            Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                            Get Field_Current_Value Of (Particle_DD(Self)) Field Particle.Partl_Recr to Wrecr
                            Set psRecr Of (Timologio_BasicReport(RmhtRTITAN(Self))) to Wrecr
                            Send StartReport to RmhtrTITAN
                            //******
            
                            If (Wait(Self)) Send Deactivate to (Wait(Self))
            
                        End
                        Else Begin
                            if (particle.partl_no=0) send info_box "Éú§ £ß¶®úÂ §ò ´¨ß‡üúÂ ßò®ò©´ò´†°Ê £ú ò®†ü£Ê 0" 'è¢û®¶≠¶®Âò'
                            Else If (Particle.Partl_No>0) Begin
                                get message_box "í¶ ßò®ò©´ò´†°Ê ‚Æú† „õû ú°´¨ß‡üúÂ.\ná‚¢ú´ú §ò °·§ú´ú úßò§ú°´Áß‡©û ?" 'Ñß†ôúôòÂ‡©û' ;
                                    MB_OKCANCEL (MB_ICONQUESTION IOR MB_DEFBUTTON2) to iMsg  // 1=ok 2=cancel
                                If (iMsg=1) Begin
                                    Get Field_Current_Value Of (Particle_DD(Self)) Field Particle.Partl_Recr to Wrecr
                                    Set psRecr Of (Timologio_BasicReport(RmhtrTITAN(Self))) to Wrecr
                                    Send StartReport to RmhtrTITAN
                                End
                            End
                        End
                    End
                    Else send Stop_box "í¶ ßò®ò©´ò´†°Ê õú§ £ß¶®ú† §ò ú°´¨ß‡üúÂ.\nÄ≠¶®· ©´¶†ÆúÂò ´¨ß‡£‚§ò òß¶ ò¢¢¶ °Á°¢‡£ò\nû ©´¶†ÆúÂò £û ú°´¨ßÈ©†£ò ß.Æ í†£. è®¶£ûüú¨´„" "ë≠·¢£ò 75000"
                End
                else send info_box "Éú§ ¨ß·®Æú† ßò®ò©´ò´†°Ê ö†ò ú°´Áß‡©û" 'è¢û®¶≠¶®Âò'
            
                Send Rebuild_Constraints to Pmoves_DD
                Send Beginning_Of_Data to (Pmoves_  (dbTabPageSub1(dbTabDialogSub1(Self))))  True
            End_Procedure // OnClick
            
            //AB-StoreEnd

        End_Object    // btnEktyposh

        Object AmdiscPms is a dbFormSub
            Entry_Item Particle.Partl_amdiscpms
            Set Size to 13 98
            Set Location to 217 273
            Set Color to clNavy
            Set TextColor to clLtGray
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_FontWeight Item 0 to 600
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
                                                                                                            
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            Set Color           to clNavy
            Set TextColor       to clLtGray
            
            //AB-StoreEnd

        End_Object    // AmdiscPms

        Object totamad is a dbFormSub
            Entry_Item Particle.Partl_totamad
            Set Size to 13 71
            Set Location to 217 430
            Set Color to clNavy
            Set TextColor to clAqua
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_FontWeight Item 0 to 600
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            // 05/09/2002
            Procedure OnChange00
                //If (Focus(Desktop)=totamad(Self)) Begin
                    Send Enhm_Particle_Amounts
                //End
            End_Procedure
            
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            Set Color           to clNavy
            Set TextColor       to clAqua
            
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            //AB-StoreEnd

        End_Object    // totamad

        Object Vatam is a dbFormSub
            Entry_Item Particle.Partl_vatam
            Set Size to 13 71
            Set Location to 233 430
            Set Color to clNavy
            Set TextColor to clAqua
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_FontWeight Item 0 to 600
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            // 05/09/2002
            Procedure OnChange00
                If (Focus(Desktop)=Extra(Self)) Begin
                    Send Enhm_Particle_Amounts
                End
            End_Procedure
            
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            Set Color           to clNavy
            Set TextColor       to clAqua
            
            
            
            //AB-StoreEnd

        End_Object    // Vatam

        Object VatamOnTotal is a dbFormSub
            Entry_Item Particle.Fpa_on_total
            Set Size to 13 71
            Set Location to 233 430
            Set Color to clBtnFace
            Set TextColor to clAqua
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Enabled_State to FALSE
            Set Entry_State Item 0 to FALSE
            Set Form_FontWeight Item 0 to 600
            Set Form_Mask Item 0 to "###,###,###,###.######"
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE

            //AB-StoreStart
                        
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            Set Color           to clNavy
            Set TextColor       to clAqua
            
            
            //AB-StoreEnd

        End_Object    // VatamOnTotal

        Object Payam is a dbFormSub
            Entry_Item Particle.Partl_payam
            Set Size to 13 71
            Set Location to 249 430
            Set Color to clNavy
            Set TextColor to clAqua
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_FontWeight Item 0 to 600
            Set Form_TypeFace Item 0 to "MS Sans Serif"
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
                                                                                                            
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            Set Color           to clNavy
            Set TextColor       to clAqua
            
            //AB-StoreEnd

        End_Object    // Payam

        Object TextBoxSub1 is a TextBoxSub
            Set Label to "âòüò®„ ò•Âò"
            Set Location to 217 375
            Set Size to 10 43
            Set FontWeight to 600
        End_Object    // TextBoxSub1

        Object TextBoxSub3 is a TextBoxSub
            Set Label to "Ñ°ß´È©ú†™"
            Set Location to 217 232
            Set Size to 10 37
        End_Object    // TextBoxSub3

        Object TextBoxSub6 is a TextBoxSub
            Set Label to "è¢û®‡´‚¶"
            Set Location to 251 385
            Set Size to 10 34
            Set FontWeight to 600
            Set Justification_Mode to jMode_Left
        End_Object    // TextBoxSub6

        Object BtnAnalysh is a ButtonSub

            //AB-StoreTopStart
                                                                                                            
                                                                                                            
            //AB-StoreTopEnd

            Set Label to "Ä§·¢¨©û îèÄ"
            Set Bitmap to "AnalFpa2.bmp"
            Set Size to 18 21
            Set Location to 229 383
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ä§·¢¨©û îèÄ ´¶¨ ßò®©´ò´†°¶Á ò§ò ©¨§´ú¢ú©´„"
            
            Procedure OnClick
                Send Activate_PartlFpa
            End_Procedure // OnClick
            
            
            
            //AB-StoreEnd

        End_Object    // BtnAnalysh

        Object Textbox1 is a Textbox
            Set Label to "èò®ò©´ò´†°Ê"
            Set Location to 2 8
            Set Size to 10 48
        End_Object    // Textbox1

        Object Textbox3 is a Textbox
            Set Label to "Ü£-§Âò"
            Set Location to 17 8
            Set Size to 10 25
        End_Object    // Textbox3

        Object Textbox4 is a Textbox
            Set Label to "ë¨§ò¢/§¶™"
            Set Location to 33 8
            Set Size to 10 41
        End_Object    // Textbox4

        Object Textbox5 is a Textbox
            Set Label to "Î®ö¶/ìß¶°ò´"
            Set Location to 48 8
            Set Size to 10 51
        End_Object    // Textbox5

        Object Textbox6 is a Textbox
            Set Label to "åÊ£†©£ò"
            Set Location to 95 8
            Set Size to 10 32
        End_Object    // Textbox6

        Object TextBoxSub8 is a TextBoxSub
            Set Label to "ëú†®·"
            Set Location to 18 191
            Set Size to 10 21
        End_Object    // TextBoxSub8

        Object TextBoxSub11 is a TextBoxSub
            Set Label to "Ä®†ü£Ê™"
            Set Location to 19 329
            Set Size to 10 29
        End_Object    // TextBoxSub11

        Object BtnMetasxhmatismos is a ButtonSub
            Set Label to "ãú´ò©Æû£ò´†©£Ê™"
            Set Bitmap to "Auto.bmp"
            Set Size to 21 23
            Set Location to 214 55
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "ãú´ò©Æû£ò´†©£Ê™ ´¶¨ ´®‚Æ¶§´¶™ ßò®ò©´ò´†°¶Á ©ú ·¢¢¶"
            
            Procedure OnClick
                String sRecr sID sparast scn sPtyppar smodule isSelected snomisma
                Date    dHmnia dHmnia2
                Integer iReadOnly iRecnum iChangedTheFlag
                Number  nsTimol
                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Recr   to sRecr
                Get Field_Current_Value Of Particle_DD  Field Particle.nomisma_code to snomisma
                Get Field_Current_Value of Clients_DD   Field Clients.Client_ID     to sID
                Get Field_Current_Value of Ptyppar_DD   Field Ptyppar.ptyppar_code  to sPtyppar
                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Selected to isSelected
                Send Beginning_Of_Data to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) True
                If Status Pmoves Begin
            
                    If ((sRecr<>'') And (sID<>'')) Begin
            
                        Get Field_Current_Value Of Particle_DD  Field Particle.Timol_Ypol  to nsTimol
                        Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Hmnia to dHmnia
            
                        If (nsTimol=0) Begin
                            Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† ûõû £ú´ò©Æû£ò´†©´úÂ \nÉú§ úß†´®‚ßú´ò† §‚¶™ £ú´ò©Æû£ò´†©£Ê™ ´¶¨" "è¢û®¶≠¶®Âò"
                            Procedure_Return
                        End
            
                        Move 0 to iChangedTheFlag
            
                        If (piNoChangesAllowed(Particle_DD(Self))=1) Begin
                            Move 1 to iChangedTheFlag
                            Set piNoChangesAllowed Of (Particle_DD(Self)) to 0
                        End
            
                        Set Field_Changed_Value Of Particle_DD  Field Particle.Partl_Selected to '1'
                        Set piFromMetasx Of Particle_DD to 1
                        Send Request_Save to Particle_DD
                        If (iChangedTheFlag=1) Set piNoChangesAllowed Of (Particle_DD(Self)) to 1
                        move (psmodule(self))                                   to smodule
                        Get Value               Of (Particle_CN_Code(Self))     to scn
                        Get Value               Of (ptyppar_ptyppar_code(self)) to sparast
                        Set piMustNOTConstrain  Of v014                         to 1
                        Set psClientID          Of v014                         to sID
                        Set psParticleRecr      Of v014                         to sRecr
                        Set psDateFrom          Of v014                         to dHmnia
                        Set psDateTo            Of v014                         to dHmnia
                        set psparast            of v014                         to sparast
                        Set psPar               Of v014                         to sPtyppar
                        set pscn                of v014                         to scn
                        Set psclient            Of v014                         to sID
                        Set psModule            Of v014                         to sModule
                        Set psnomismacode       Of v014                         to snomisma
                        Send activate_v014
                    End
                End
                Else Send Info_Box "Éú§ ¨ß·®Æú† úöö®ò≠„ ©´û§ ö®ò££„ ´¶¨ ßò®ò©´ò´†°¶Á" "è¢û®¶≠¶®Âò"
            End_Procedure // OnClick
            
            
            
            
            //AB-StoreEnd

        End_Object    // BtnMetasxhmatismos

        Object Textbox7 is a Textbox
            Set Label to "Textbox7"
            Set Location to 416 -5844
            Set Size to 10 31
        End_Object    // Textbox7

        Object txtEuro is a TextBoxSub
            Set Label to "Euro"
            Set Location to 95 373
            Set Size to 10 16
        End_Object    // txtEuro

        Object btnTP is a ButtonSub
            Set Label to "ButtonSub2"
            Set Bitmap to "VisaCard.bmp"
            Set Size to 21 23
            Set Location to 214 29
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "É†òÆúÂ®†©û ´®Êß‡§ ß¢û®‡£„™ ßò®ò©´ò´†°¶Á"
            
            Procedure OnClick
                String sRecr scode
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
                Get Field_Current_Value Of Particle_DD Field Particle.nomisma_code to scode
                Set psParticleRecr Of (TParticl(self)) to sRecr
                Set psnomismacode Of (TParticl(self)) to scode
                If (Trim(sRecr)<>'') Send Activate_TPArticl
            End_Procedure // OnClick
            
            //AB-StoreEnd

        End_Object    // btnTP

        Object btnPreview is a ButtonSub

            //AB-StoreTopStart
                                                                                                            
            //AB-StoreTopEnd

            Set Label to "Ñ°´Á&ß‡©û"
            Set Bitmap to "Monitor1.bmp"
            Set Size to 21 23
            Set Location to 235 28
            Set Focus_Mode to Pointer_Only
            Set Form_FontHeight Item 0 to 12
            Set Form_FontWeight Item 0 to 600
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "è®¶úß†©°Êß†©û ßò®ò©´ò´†°¶Á"
            
            Procedure OnClick
                Integer iRecnum
                String wRecr
                Get Field_Current_Value Of Particle_DD Field Particle.Recnum        to iRecnum
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr    to Wrecr
                If (iRecnum) Begin
                    Set psRecr Of (Timologio_BasicReport(RmhtrTITAN(Self))) to Wrecr
                    Set Output_Device_Mode Of (Timologio_BasicReport(RmhtrTITAN(Self))) to Print_To_Window
                    Send StartReport to RmhtrTITAN
                    Set Output_Device_Mode Of (Timologio_BasicReport(RmhtrTITAN(Self))) to Print_To_Printer
                End
            End_Procedure // OnClick
            
            //AB-StoreEnd

        End_Object    // btnPreview

        Object TextBoxSub15 is a TextBoxSub
            Set Label to "Euro"
            Set Color to clTeal
            Set TextColor to clYellow
            Set Location to 266 502
            Set Size to 9 16
            Set FontWeight to 600
            Set Justification_Mode to jMode_Left
        End_Object    // TextBoxSub15

        Object frmEuro0 is a FormSub
            Set Size to 13 71
            Set Location to 264 430
            Set Color to clTeal
            Set TextColor to clWhite
            Set Label_Col_Offset to 2
            Set Form_FontWeight Item 0 to 600
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
                                                                                                            
            Set Numeric_Mask Item 0 to 14 2 ' ,*'
            
            Set Shadow_State    to True
            Set Enabled_State   to False
            Set Color           to clTeal
            Set TextColor       to clWhite
            
            //AB-StoreEnd

        End_Object    // frmEuro0

        Object TextBoxSub17 is a TextBoxSub
            Set Label to "®ò"
            Set Location to 18 130
            Set Size to 10 18
        End_Object    // TextBoxSub17

        Object TextBoxSub18 is a TextBoxSub
            Set Label to "à©¶´†£Âò"
            Set Location to 97 192
            Set Size to 10 28
        End_Object    // TextBoxSub18

        Object TextBoxSub19 is a TextBoxSub
            Set Label to "í®Êß¶™ Äß¶©´."
            Set Location to 64 8
            Set Size to 10 50
        End_Object    // TextBoxSub19

        Object TextBoxSub20 is a TextBoxSub
            Set Label to "ë°¶ßÊ™"
            Set Location to 64 371
            Set Size to 10 25
        End_Object    // TextBoxSub20

        Object TextBoxSub21 is a TextBoxSub
            Set Label to "íÊß¶™"
            Set Location to 66 191
            Set Size to 10 21
        End_Object    // TextBoxSub21

        Object FormSub2 is a FormSub
            Set Size to 7 9
            Set Location to 51 191
            Set Label_Col_Offset to 2
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            Set Color           to clLime
            
            
            //AB-StoreEnd

        End_Object    // FormSub2

        Object TextBoxSub22 is a TextBoxSub
            Set Label to "ÓÆû£ò"
            Set Location to 81 11
            Set Size to 10 30
        End_Object    // TextBoxSub22

        Object TextBoxSub23 is a TextBoxSub
            Set Label to "éõûöÊ™"
            Set Location to 81 192
            Set Size to 10 26
        End_Object    // TextBoxSub23

        Object TextBoxSub24 is a TextBoxSub
            Set Label to "Ä§´¢Âò"
            Set Location to 81 372
            Set Size to 10 24
        End_Object    // TextBoxSub24

        Object TextBoxSub27 is a TextBoxSub
            Set Label to "îèÄ"
            Set Location to 233 406
            Set Size to 10 17
            Set FontWeight to 600
        End_Object    // TextBoxSub27

        Object btnPelath is a ButtonSub
            Set Label to "ButtonSub1"
            Set Bitmap to "CardFile.bmp"
            Set Size to 21 23
            Set Location to 256 55
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ñ£≠·§†©û âÂ§û©û™ èú¢·´û / è®¶£ûüú¨´„"
            
            Procedure OnClick
                String  sMovesRecr sClientRecr
                Integer iEkleise
            
                Get Field_Current_Value Of Particle_DD  Field Particle.Cmoves_Recr  to sMovesRecr
                Get Field_Current_Value Of Clients_DD   Field Clients.Client_Recr   to sClientRecr
                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise  to iEkleise
            
                Move (Trim(sMovesRecr))     to sMovesRecr
                Move (Trim(sClientRecr))    to sClientRecr
            
                If ((sMovesRecr<>'') And (sClientRecr<>'')) Begin
                    If (Not(iEkleise)) Begin
                        Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† ò§¶†Æ´Ê.\nÉú§ ¨ß·®Æú† °Â§û©û ©´¶Á™ ßú¢·´ú™" "è¢û®¶≠¶®Âò"
                        Procedure_Return
                    End
                    Set psFindMovesRecr     Of (vwCmoves(Self)) to sMovesRecr
                    Set psFindClientRecr    Of (vwCmoves(Self)) to sClientRecr
                    Set piFromParticl       Of (vwCmoves(Self)) to True
                    Send Activate_vwCmoves
                End
                Else Begin
                    If (sMovesRecr<>'') Begin
                        Send Info_Box "í¶ ßò®ò©´ò´†°Ê ÉÑå ‚Æú† °·§ú† úöö®ò≠„\n©´¶ °Á°¢‡£ò ßú¢ò´È§" "è¢û®¶≠¶®Âò"
                    End
                    Else Begin
                        If (sClientRecr<>'') Begin
                            Send Info_Box "Éú§ ¨ß·®Æú† ©‡©´Ê™ °‡õ†°Ê™ ßú¢·´û" "è¢û®¶≠¶®Âò"
                        End
                    End
                End
            End_Procedure // OnClick
            
            
            //AB-StoreEnd

        End_Object    // btnPelath

        Object btnApothikh is a ButtonSub
            Set Label to "ButtonSub1"
            Set Bitmap to "Apothik.bmp"
            Set Size to 21 23
            Set Location to 256 29
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ñ£≠·§†©û âÂ§û©û™ Äß¶ü„°û™"
            
            Procedure OnClick
                String  sMovesRecr sItemRecr
                Integer iEkleise
            
            
                Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Wcmoves_Recr   to sMovesRecr
                Get Field_Current_Value Of Witemx_DD    Field Witemx.Witemx_Recr    to sItemRecr
                Move (Trim(sMovesRecr)) to sMovesRecr
                Move (Trim(sItemRecr))  to sItemRecr
            
                Send Beginning_Of_Data to (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) True
            
                If ((sMovesRecr<>'') And (sItemRecr<>'')) Begin
                    Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise  to iEkleise
                    If (Not(iEkleise)) Begin
                        Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† ò§¶†Æ´Ê.\nÉú§ ¨ß·®Æú† °Â§û©û ©´û§ òß¶ü„°û" "è¢û®¶≠¶®Âò"
                        Procedure_Return
                    End
                    Set psFindMovesRecr     Of (KinApoth(Self)) to sMovesRecr
                    Set psFindItemRecr      Of (KinApoth(Self)) to sItemRecr
                    Set piFromParticl       Of (KinApoth(Self)) to True
                    Send Activate_KinApoth
                End
                Else Begin
                    If (sMovesRecr<>'') Begin
                        Send Info_Box "Ü °Â§û©û ò¨´„ ÉÑå ‚Æú† °·§ú† úöö®ò≠„\n©´¶ °Á°¢‡£ò ´û™ òß¶ü„°û™" "è¢û®¶≠¶®Âò"
                    End
                    Else Begin
                        If (sItemRecr<>'') Begin
                            Send Info_Box "Éú§ ¨ß·®Æú† ´¶ úÂõ¶™ ©´û§ °Â§û©û ò¨´„" "è¢û®¶≠¶®Âò"
                        End
                    End
                End
            End_Procedure // OnClick
            
            //AB-StoreEnd

        End_Object    // btnApothikh

        Object Particle_Tropos_Plhromhs is a dbComboFormSub
            Entry_Item Particle.Tropos_plhromhs
            Set Label to "í®Êß¶™ è¢û®‡£„™"
            Set Size to 13 98
            Set Location to 233 273
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Combo_Sort_State to FALSE

            //AB-StoreStart
                                                                                                            
            Set Entry_State Item 0      to False
            Set Allow_Blank_State       to False
            Set Allow_Undefined_State   to False
            
            
            
            
            //AB-StoreEnd

        End_Object    // Particle_Tropos_Plhromhs

        Object btnSxetika is a ButtonSub
            Set Label to "ButtonSub1"
            Set Bitmap to "Sxetika.bmp"
            Set Size to 21 23
            Set Location to 235 55
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ñ£≠·§†©û ©´¶†ÆúÂ‡§ ©Æú´†°¶Á ßò®ò©´ò´†°¶Á ß¶¨ õû£†¶¨®ö„üû°ú òß¶ ò¨´Ê"
            
            Procedure OnClick
                String sRecr
                If (piNoChangesAllowed(Particle_DD(Self))<>1) Begin
                    If (Should_Save(Particle_DD(Self))) Send Request_Save to Particle_DD
                End
                If (piNoChangesAllowed(Pmoves_DD(Self))<>1) Begin
                    If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
                End
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
                Move (Trim(sRecr)) to sRecr
                If (sRecr<>'') Begin
                    Send Clear to Psxetika_DD2
                    Move sRecr to Psxetika.Psx_Partl_Recr
                    Send Find to Psxetika_DD2 Gt 3 // Psx_Partl_Recr+Partl_Recr
                    If ((Found=1) And (Psxetika.Psx_Partl_Recr=sRecr)) Begin
                        Get Field_Current_value Of Psxetika_DD2 Field Psxetika.Partl_Recr to sRecr
                        Set psArticleRecr Of (ShowSx(Self)) to sRecr
                        Send Activate_ShowSx
                    End
                    Else Send Info_Box "Éú§ ¨ß·®Æú† ©Æú´†°Ê ßò®ò©´ò´†°Ê\nß¶¨ §ò õû£†¶¨®ö„üû°ú òß¶ ´¶ ´®‚Æ¶§" "è¢û®¶≠¶®Âò"
                End
            End_Procedure // OnClick
            
            
            //AB-StoreEnd

        End_Object    // btnSxetika

        Object frmRed is a FormSub
            Set Size to 7 9
            Set Location to 5 471
            Set Color to clRed
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            Set Color           to clRED
            
            //AB-StoreEnd

        End_Object    // frmRed

        Object frmGreen is a FormSub
            Set Size to 7 9
            Set Location to 19 471
            Set Color to clLime
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            Set Color           to clLime
            
            
            //AB-StoreEnd

        End_Object    // frmGreen

        Object TextBoxSub31 is a TextBoxSub
            Set Label to "Ä§¶†Æ´Ê"
            Set Location to 17 484
            Set Size to 10 31
        End_Object    // TextBoxSub31

        Object TextBoxSub32 is a TextBoxSub
            Set Label to "â¢ú†©´Ê"
            Set Location to 4 484
            Set Size to 10 31
        End_Object    // TextBoxSub32

        Object txtNomisma is a TextBoxSub
            Set Label to "É®Æ"
            Set Color to clNavy
            Set TextColor to clAqua
            Set Location to 251 502
            Set Size to 9 16
            Set FontWeight to 600
            Set Justification_Mode to jMode_Left
        End_Object    // txtNomisma

        Object TextBoxSub33 is a TextBoxSub
            Set Label to "å‚¶ ìßÊ¢¶†ß¶"
            Set Color to 7960953
            Set TextColor to clWhite
            Set Location to 254 294
            Set Size to 10 77
        End_Object    // TextBoxSub33

        Object TextBoxSub34 is a TextBoxSub
            Set Label to "è®¶ûö.ìßÊ¢¶†ß¶"
            Set Color to 7960953
            Set TextColor to clWhite
            Set Location to 254 207
            Set Size to 10 74
        End_Object    // TextBoxSub34

        Object Particle_Prohg_ypol is a dbFormSub
            Entry_Item Particle.Prohg_ypol
            Set Size to 13 74
            Set Location to 264 207
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            Set TextColor       to 7960953
            
            //AB-StoreEnd

        End_Object    // Particle_Prohg_ypol

        Object Particle_Trex_ypol is a dbFormSub

            //AB-StoreTopStart
                                                                                                            
            //AB-StoreTopEnd

            Entry_Item Particle.Trex_ypol
            Set Size to 13 77
            Set Location to 264 294
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Form_Mask Item 0 to "###,###,###,###.######"

            //AB-StoreStart
                                                                                                            
            Set Shadow_State    to True
            Set Enabled_State   to False
            
            Set TextColor       to 7960953
            
            Set Numeric_mask Item 0 to 14 2 ' ,*'
            
            
            //AB-StoreEnd

        End_Object    // Particle_Trex_ypol

        Object Particle_Aitiol is a dbEditSub
            Entry_Item Particle.Aitiol
            Set Size to 47 118
            Set Location to 229 84

            //AB-StoreStart
                                                                                                            
            Procedure End_Construct_Object
                Local Integer iFieldNumber iFileNumber iFields iInt iMaxLength
                Local String  sFieldName
                Forward Send End_Construct_Object
                Move 0                                                      to iMaxLength
                Move Particle.File_Number                                   to iFileNumber
                Get_Attribute DF_File_Number_Fields     Of iFileNumber      to iFields
                For iInt From 1 to iFields
                    Get_Attribute DF_Field_Name         Of iFileNumber iInt to sFieldName
                    If (sFieldName='AITIOL') Begin
                        Get_Attribute DF_Field_Length   Of iFileNumber iInt to iMaxLength
                    End
                Loop
                If (iMaxLength) Set Text_Limit to iMaxLength
                Else            Set Text_Limit to 160
            End_Procedure
            
            //AB-StoreEnd

        End_Object    // Particle_Aitiol

        Object Particle_Partl_Recr is a dbFormSub
            Entry_Item Particle.Partl_recr
            Set Size to 13 39
            Set Location to 95 481
            Set Label_Col_Offset to 2
            Set Label_Justification_Mode to jMode_Right
            Set Prompt_Button_Mode to pb_PromptOff
            Set Form_TypeFace Item 0 to "MS Sans Serif"

            //AB-StoreStart
                                                                                                            
            Procedure Request_Clear
                Delegate Send Request_Clear
            End_procedure
            
            Procedure Request_Clear_All
                Delegate Send Request_Clear_All
            End_procedure
            
            // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
            Set Visible_State To False
            Set Enabled_State to False
            
            
            //AB-StoreEnd

        End_Object    // Particle_Partl_Recr

        Object txtRecr is a TextBoxSub
            Set Label to "Recr"
            Set TextColor to clGreen
            Set Location to 97 460
            Set Size to 10 17
            Set FontWeight to 600

            //AB-StoreStart
                                                                                                            
            // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
            Set Visible_State To False
            
            
            
            //AB-StoreEnd

        End_Object    // txtRecr

        Object fPctDisc is a FormSub
            Set Size to 13 31
            Set Location to 214 85
            Set Label_Col_Offset to 2
            Set Form_Datatype Item 0 to Mask_Numeric_Window

            //AB-StoreStart
                                                                                                            
            Procedure OnChange
                Number nSynolo nPct nPoso
                If (Focus(Desktop)=fPCTDisc(Self)) Begin
                    Get Field_Current_value Of Particle_DD Field Particle.Partl_TotAMAD to nSynolo
                    If (nSynolo) Begin
                        Get Value Item 0 to nPct
                        Move (Round_Number((nSynolo*nPct/100),2)) to nPoso
                        Set Value Of fPosoDisc to nPoso
                    End
                End
            End_Procedure
            
            
            
            //AB-StoreEnd

        End_Object    // fPctDisc

        Object fPosoDisc is a FormSub

            //AB-StoreTopStart
                                                                                                            
                                                                                                            
            //AB-StoreTopEnd

            Set Size to 13 55
            Set Location to 214 124
            Set Color to clBtnFace
            Set Label_Col_Offset to 2
            Set Form_Datatype Item 0 to Mask_Numeric_Window
            Set Enabled_State to FALSE
            Set Item_Shadow_State Item 0 to TRUE
            Set Shadow_State Item 0 to TRUE

            //AB-StoreStart
                                                                                                            
            Procedure OnChange
                Number nSynolo nPct nPoso
                If (Focus(Desktop)=fPosoDisc(Self)) Begin
                    Get Field_Current_value Of Particle_DD Field Particle.Partl_TotAMAD to nSynolo
                    If (nSynolo) Begin
                        Get Value Item 0 to nPoso
                        Move (Round_Number(((nPoso/nSynolo)*100),2)) to nPct
                        Set Value Of fPctDisc to nPct
                    End
                End
            End_Procedure
            
            
            
            
            //AB-StoreEnd

        End_Object    // fPosoDisc

        Object ButtonSub1 is a ButtonSub
            Set Label to "ButtonSub1"
            Set Bitmap to "epimer.bmp"
            Set Size to 16 21
            Set Location to 213 180

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "ãú´ò≠¶®· ´¶¨ ß¶©¶©´¶Á ‚°ß´‡©û™ ©ú ¶¢ò ´ò úÂõû"
            
            Procedure OnClick
                Integer iyes
                Number nPct
                String sStr
                Set Enabled_State to False
                Get Value Of fPctDisc Item 0 to nPct
                If (nPct) Begin
                    Move '' to sStr
                    Append sStr 'á‚¢ú´ú §ò £ú´ò≠‚®‡ ©ú ¶¢ò ´ò úÂõû\nß¶©¶©´Ê ‚°ß´‡©û™ ' (Round_Number(nPct,2)) '%'
                    Get YesNo_Box sStr "Ñß†ôúôòÂ‡©û" 0 to iYes
                    If (iYes=MBR_No) Procedure_Return
                    Send Epimerise_Genikh_Ekptosh nPct
                    Set Value Of fPctDisc   Item 0 to ''
                    Set Value Of fPosoDisc  Item 0 to ''
                End
                Set Enabled_State to True
            End_Procedure // OnClick
            
            //AB-StoreEnd

        End_Object    // ButtonSub1

        Object TextBoxSub36 is a TextBoxSub
            Set Label to "%"
            Set Location to 216 117
            Set Size to 10 7
        End_Object    // TextBoxSub36

        Object TextBoxSub41 is a TextBoxSub
            Set Label to "ÖÈ§û"
            Set Location to 81 292
            Set Size to 10 19
        End_Object    // TextBoxSub41

        Object Btnpsxetika is a ButtonSub
            Set Label to "ButtonSub4"
            Set Bitmap to "AssForm.bmp"
            Set Size to 21 24
            Set Location to 257 1
            Set Focus_Mode to Pointer_Only

            //AB-StoreStart
                                                                                                            
            Set TooltipValue to "Ñ£≠·§†©û ëÆú´†°È§ èò®ò©´ò´†°È§"
            
            Procedure OnClick
                string  srecr
                Get Field_Current_Value Of particle_dd Field particle.partl_recr to srecr
                If (srecr<>'') begin
                    Set psArticleRecr of (psxetv(self)) to srecr
                    Send activate_psxetv
                end
            End_Procedure // OnClick
            
            
            //AB-StoreEnd

        End_Object    // Btnpsxetika


        //AB-StoreStart
        
        On_Key Key_Alt+Key_r    Send Show_Recr
        On_Key KCancel          Send Next
        
        Procedure Show_Recr
            Integer iState
            Get Visible_State Of Particle_Partl_Recr to iState
            Set Visible_State Of Particle_Partl_Recr to (1-iState)
            Set Enabled_State Of Particle_Partl_Recr to (1-iState)
            Set Visible_State Of TxtRecr             to (1-iState)
        End_procedure
        
        Procedure Request_Clear
            Forward Send Request_Clear
            Send Delete_Data to Particle_Pseira_Seira
            Send Clear to Clients_DD //////CN_DD
            Set value Of fPctDisc  Item 0 to ''
            Set value Of fPosoDisc Item 0 to ''
        End_procedure
        
        Procedure Request_Clear_All
            Forward Send Request_Clear_All
            Send Delete_Data to Particle_Pseira_Seira
            Send Clear to Clients_DD ////CN_DD
            Set value Of fPctDisc  Item 0 to ''
            Set value Of fPosoDisc Item 0 to ''
        End_procedure
        
        Procedure Activate_View Returns Integer
            String  sStr sModule sDescr sRecr
            Integer rVal iRecnum
        
            Move '' to sStr
            move (append(sstr, 'í†£¶¢Êöû©û  '                  +'        ' +;
                               (Trim(SyscurXr.Company_Name))   +' - '      +;
                               (Trim(SyscurXr.Branch_Name))    +' - '      +;
                               (Trim(SyscurXr.Year_Descr)))) to sStr
        
            Set Label Of Particle to sStr
        
            Get psMenuModule  Of Main_Menu                  to sModule
            If (psFindParticleRecr(Self)='') Set psModule   to sModule
        
            Get gsfCode_Mast "MODULE" sModule   to sDescr
            Move (Trim(sDescr))                 to sDescr
        
            If (psFindParticleRecr(Self)<>'') Begin
                Get psFindParticleRecr  to sRecr
                Move (Trim(sRecr))      to sRecr
                If (sRecr<>'') Begin
                    Send Clear to Particle_DD
                    Move sRecr to Particle.Partl_Recr
                    Send Find to Particle_DD eq 2   // Particle:Index.2:Partl_Recr
                    Send Rebuild_Constraints to Pmoves_DD
                    Send Find to Pmoves_DD First_Record 3 //Pmoves:Index.3:Particle_Recr+Pmoves_Recr
                End
            End
            Else Send Clear to Particle_DD
        
                 If (psModule(Self)='01') set label of particle to "èò®ò©´ò´†°· èÈ¢û©û™ "
            Else If (psModule(Self)='02') set label of particle to "èò®ò©´ò´†°· Äö¶®·™ "
        
        
            Set psCompany Of Wax_DD to  Syscurxr.Company_Code
            Set psBranch  Of Wax_DD to  Syscurxr.Branch_Code
            Set piYear    Of Wax_DD to  Syscurxr.Year_Year
            Set psWapokat Of Wax_DD to  ''
        
            Send Rebuild_Constraints to Ptyppar_DD
            Send Rebuild_Constraints to Particle_DD
            Send Rebuild_Constraints to Wax_DD
            Send Rebuild_Constraints to Witemx_DD
            Send Rebuild_Constraints to Pmoves_DD
        
        
            Forward Get Msg_Activate_View to rVal
            Send Find_The_Rate
            Send Kleise_Ta_Pedia
        
            Procedure_Return rVal
        End_Procedure
        
        Procedure Activate
            String sLabel
            Forward Send Activate
            Reread Sysfile
            Unlock
            If (psModule(Self)='01') set label of particle to ("èò®ò©´ò´†°· èÈ¢û©û™      "+;
                Trim(Syscurxr.Company_Name)+'  '+Trim(Syscurxr.Branch_Name)+'  '+Trim(Syscurxr.Year_Descr))
            Else If (psModule(Self)='02') set label of particle to ("èò®ò©´ò´†°· Äö¶®·™      "+;
                Trim(Syscurxr.Company_Name)+'  '+Trim(Syscurxr.Branch_Name)+'  '+Trim(Syscurxr.Year_Descr))
        End_Procedure
        
        
        Procedure Close_Panel
            String sRecr
            Set psFindParticleRecr to ''
            // js 29/08/2002 Gia thn diagrafh Psxetikon me 0 posothta
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
            If (sRecr<>'') Begin
                Clear Psxetika
                Move Particle.Partl_Recr to Psxetika.Partl_Recr
                Find Gt Psxetika by Index.4
                While ((Found) And (Psxetika.Partl_Recr=Particle.Partl_Recr))
                    If (Psxetika.Pms_Sx_Qty=0) Delete Psxetika
                    Find Gt Psxetika by Index.4
                Loop
            End
            Forward Send Close_Panel
        End_Procedure
        
        Procedure Find_The_Rate
            String  sCode sWhat
            Integer iRateID
            Number nEuro nIsot nRate
            Date dHmnia
            Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Nomisma_Code to sCode
            If (sCode='') Begin
                move syscurxr.c_code0 to scode
                Clear Nomisma
                Move sCode to Nomisma.Nomisma_Code
                Find Eq Nomisma By Index.1
                Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
            End
            Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Hmnia to dHmnia
            Get Field_Current_Value Of Particle_DD  Field Particle.Isotimia    to nIsot
            If (nIsot=0) Begin
                If (dHmnia='') Sysdate dHmnia
                Move (Trim(sCode)) to sCode
                Clear Isotimia
                Move sCode      to Isotimia.Nomisma_Code
                Move (dHmnia+1) to Isotimia.Isotimia_Hmnia
                Find lt Isotimia by Index.1 // Isotimia:Index.1:Nomisma_Code+Isotimia_Hmnia
        
                Clear Nomisma
                Move sCode to Nomisma.Nomisma_Code
                Find eq Nomisma By Index.1 // Nomisma:Index.1:Nomisma_Code
                Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
        
        
                If (Nomisma.Einai_Drx) Begin
                    Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                    Set Value Of frmIsotimia    to 1
                    Set Value Of frmEuro        to Isotimia.Isotimia_Euro
                End
                Else Begin
                    If (Nomisma.Einai_Drx) Begin
                        Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                        Set Value Of frmIsotimia    to 1
                        Set Value Of frmEuro        to Isotimia.Isotimia_Euro
                    End
                    Case Begin
                        case (isotimia.poia_metatrepei='Ä') // agora ellhniko
                            Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Agora
                            Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Agora
                            Case Break
                        case (isotimia.poia_metatrepei='è') // polhsh ellhniko
                            Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Polhsh
                            Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Polhsh
                            Case Break
                        Case (Isotimia.Poia_Metatrepei='F') // Fixing Ellhniko
                            Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Fixing
                            Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Fixing
                            Case Break
                        Case (Isotimia.Poia_Metatrepei='P') // Private Ellhniko
                            Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Privat
                            Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Privat
                            Case Break
                    Case End
                    Set Value Of frmEuro        to Isotimia.Isotimia_Euro
                End
            End
            Else Begin
                If (dHmnia='') Sysdate dHmnia
                Move (Trim(sCode)) to sCode
                If (Nomisma.Einai_Drx) Begin
                    Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                    Set Value Of frmIsotimia    to 1
                    Set Value Of frmEuro        to Isotimia.Isotimia_Euro
                End
            End
            Set Shadow_State Of Particle_ISotimia to (Nomisma.Einai_DRX='1')
            Send Set_The_Decimal_Points
        End_Procedure
        
        Procedure Set_The_Decimal_Points
            Integer iGridID iAmount iBreak iPmovesID
            String  sCode sOld sCodeApo sCodeEos sRecr sNomCode
            Number  nPoso nPosoEuro nIsotimia
            Date    dHmnia
        
            Move Nomisma.Nomisma_Code   to sCodeApo
            Move Nomisma.KL_ISOT_EURO   to nIsotimia
            Move Particle.PARTL_PAYAM   to nPoso
            Move SysCurXr.Euro_Code     to sCodeEos
            Move Particle.Partl_Hmnia   to dHmnia
            Move Particle.Partl_Recr    to sRecr
            Set  psPartlRecr            to sRecr
        
        
            Send Set_The_Euro
        
            Get Field_Current_Value Of Nomisma_DD Field Nomisma.Nomisma_Code to sCode
            Get Field_Current_Value Of Nomisma_DD Field Nomisma.Nomisma_Code to sNomCode
            Get psOldNomismaCode to sOld
            Move (Trim(sCode))  to sCode
            Move (Trim(sOld))   to sOld
        
            If (sCode<>sOld) Begin
                Set Label Of txtNomisma  to Nomisma.Nomisma_Code
                Set psOldNomismaCode to sCode
                Move (Pmoves_(dbTabPageSub1(dbTabDialogSub1(Self)))) to iGridID
                Clear Nomisma
                Move sCode to Nomisma.Nomisma_Code
                Find eq Nomisma by Index.1
                Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
                Set Dynamic_Update_State Of iGridID to False
                Set Visible_State Of iGridID to False
        
                // ëú´ò®†©£ò õú°òõ†°È§ ö†ò ´¶ Grid Pmoves
                Set Points          Of iGridID          Item  3 to 1                       // è¶©Ê´û´ò
                Set Points          Of iGridID          Item  5 to 4     //Nomisma.Dekadika        // í†£„ £¶§·õ¶™
                Set Numeric_Mask    Of iGridID          Item  5 to 14 4  //Nomisma.Dekadika " ,*"
                Set Points          Of iGridID          Item  6 to Nomisma.Dekadika        // åú´ è¶©Ê (ß®¶ îßò)
                Set Numeric_Mask    Of iGridID          Item  6 to 14   Nomisma.Dekadika " ,*"
                Set Points          Of iGridID          Item  7 to 2                       // è¶©¶©´Ê îèÄ
                Set Points          Of iGridID          Item  8 to Nomisma.Dekadika        // è¶©Ê îèÄ
                Set Numeric_Mask    Of iGridID          Item  8 to 14   Nomisma.Dekadika " ,*"
                Set Points          Of iGridID          Item  9 to Nomisma.Dekadika        // è¢û®‡´‚¶
                Set Numeric_Mask    Of iGridID          Item  9 to 14   Nomisma.Dekadika " ,*"
        
                // ëú´ò®†©£ò õú°òõ†°È§ ö†ò ´ò ©Á§¶¢ò ´¶¨ ´†£¶¢¶öÂ¶¨
                Set Points Of AmDiscPms                 Item  0 to Nomisma.Dekadika
                Set Points Of TotamAD                   Item  0 to Nomisma.Dekadika
                Set Points Of Vatam                     Item  0 to Nomisma.Dekadika
                Set Points Of Payam                     Item  0 to Nomisma.Dekadika
                Set Points Of Particle_Isotimia         Item  0 to Nomisma.Dekadika
        
                Set Points       Of (Pms_PctDisc(ExtraContainer(dbTabPageSub1(dbTabDialogSub1(Self))))) Item 0 to 2
                Set Points       Of (Pms_DiscAm (ExtraContainer(dbTabPageSub1(dbTabDialogSub1(Self))))) Item 0 to Nomisma.Dekadika
                Set Numeric_Mask Of (Pms_PctDisc(ExtraContainer(dbTabPageSub1(dbTabDialogSub1(Self))))) Item 0 to  4 2
                Set Numeric_Mask Of (Pms_DiscAm (ExtraContainer(dbTabPageSub1(dbTabDialogSub1(Self))))) Item 0 to 12 Nomisma.Dekadika " ,*"
        
                Set Numeric_Mask Of AmDiscPms            Item  0 to 12 Nomisma.Dekadika " ,*"
                Set Numeric_Mask Of TotamAD              Item  0 to 12 Nomisma.Dekadika " ,*"
                Set Numeric_Mask Of Vatam                Item  0 to 12 Nomisma.Dekadika " ,*"
                Set Numeric_Mask Of Payam                Item  0 to 12 Nomisma.Dekadika " ,*"
                Set Numeric_Mask Of Particle_Isotimia    Item  0 to 12 Nomisma.Dekadika " ,*"
                Set Numeric_Mask Of Particle_Prohg_Ypol  Item  0 to 12 Nomisma.Dekadika " ,*"
                Set Numeric_Mask Of Particle_Trex_Ypol   Item  0 to 12 Nomisma.Dekadika " ,*"
        
                Set Numeric_Mask Of fPctDisc             Item  0 to  4 2
                Set Numeric_Mask Of fPosoDisc            Item  0 to  8 Nomisma.Dekadika " ,*"
        
                Set Visible_State         Of iGridID to True
                Set Dynamic_Update_State  Of iGridID to True
            End
        
            Move SysCurXr.C_Code00 to sCode
            Clear Nomisma
            Move sCode to Nomisma.Nomisma_Code
            Find eq Nomisma by Index.1
            Set Numeric_Mask Of frmEuro0 Item  0 to 12 Nomisma.Dekadika " ,*"
            Set label of textboxsub15   to (Trim(sCode))
        
            // js 11/01/2002 ToDo:
            // Thelei epanafora sto nomisma xrhshs giati paramenei
            // setarismeno me to c_code00 dhladh DRS gia to 2002
            Clear Nomisma
            Move sNomCode to Nomisma.Nomisma_Code
            Find Eq Nomisma By Index.1
            If (Found) Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
            Send Set_The_Euro
        
            Set Value Of fPctDisc   Item 0 to 0
            Set Value Of fPosoDisc  Item 0 to 0
        End_procedure
        
        Procedure Show_Seira
            String  sSeira sCompany sBranch sCtypkin sWtypkin sPtyppar sWhat sSysx
            Integer iYear ret_val
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Company_Code      to sCompany
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Branch_Code       to sBranch
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Year_Year         to iYear
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Ctypkin_Code      to sCtypkin
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Wtypkin_Code      to sWtypkin
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Ptyppar_Code      to sPtyppar
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Sysxet_Ptyppar    to sSysx
            Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Ptyppar_Is_What   to sWhat
            Get Field_Current_Value Of Particle_DD  Field Particle.Pseira_Seira     to sSeira
        
            Clear Pseira
            Move (Trim(sCompany))       to Pseira.Company_Code
            Move (Trim(sBranch))        to Pseira.Branch_Code
        
            If (Trim(sSysx)<>'') ;
                 Move (Trim(sSysx))     to Pseira.Ptyppar_Code
            Else Move (Trim(sPtyppar))  to Pseira.Ptyppar_Code
        
            Move (Trim(sSeira))         to Pseira.Pseira_Seira
        
            Find eq Pseira By Index.1
            If (Found)  Begin
                Set Color Of FormSub1 to clLime
                If (Pseira.Pseira_Autonum=1) Set psIsSeiraAutoNum to '1'
                Else                         Set psIsSeiraAutoNum to ''
                Clear Pseira
                Move (Trim(sCompany))  to Pseira.Company_Code
                Move (Trim(sBranch))   to Pseira.Branch_Code
                Move (Trim(sPtyppar))  to Pseira.Ptyppar_Code
                Move (Trim(sSeira))    to Pseira.Pseira_Seira
                Find eq Pseira By Index.1
                Send Request_Find to Pseira_DD Eq Pseira.File_Number 1
            End
            Else Begin
                Set Color Of FormSub1 to clRed
                Set psIsSeiraAutoNum to ''
            End
        
        End_procedure
        
        Procedure Preset_Nomisma
            String  sNom
            Integer iRec
            Number  nIsot
            Get Field_Current_Value Of Particle_DD Field Particle.recnum to iRec
            If (NOT(iRec)) Begin
                Get Field_Current_Value Of Nomisma_DD Field Nomisma.Nomisma_Code to sNom
                If (trim(sNom)='') Begin
                    Send Clear to Nomisma_DD
                    Move SysCurXr.C_Code0 to Nomisma.Nomisma_Code
                    Send Find to Nomisma_DD eq 1 // Nomisma:Index.1:Nomisma_Code
                    Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to Nomisma.KL_Isot_Euro
                End
            End
        End_procedure
        
        Procedure Rythmise_Thn_Seira
            String  sRecr sWhat sNom sRecr2 sSysxPtyppar sSeira
            Integer iRec
        
            Send Combo_delete_Data to Particle_Pseira_Seira
            Set psPtyppar to ''
            Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Ptyppar_Recr to sRecr
            If (trim(sRecr)<>'') Begin
                Move '' to sSysxPtyppar
                Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Ptyppar_Is_What to sWhat
                Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Sysx_Ptyp_Recr  to sSysxPtyppar
                Get Field_Current_Value Of Particle_DD Field Particle.Pseira_Seira  to sSeira
                Move (Trim(sSysxPtyppar)) to sSysxPtyppar
        
                If (Trim(sWhat)='2') Begin // Ä§ ú†§ò† ß‡¢û©û
                    If (Trim(sSysxPtyppar)<>'') Begin
                        Set psPtyppar to sSysxPtyppar
                        Send Rebuild_Constraints to Pseira_DD
                        Send Rebuild_Constraints to Pseira_DD2
                        Send Combo_Fill_List to Particle_Pseira_Seira
                    End
                    Else Begin
                        Set psPtyppar to sRecr
                        Send Rebuild_Constraints to Pseira_DD
                        Send Rebuild_Constraints to Pseira_DD2
                        Send Combo_Fill_List to Particle_Pseira_Seira
                    End
                End
                Else Begin
                    // An einai agora
                    // js 25/04/2002 prosthikh gia ypostirixh ektyposhs
                    // parastatikon polhshs (px D.Apostolhs) se promhtheytes
                    If (Trim(sSysxPtyppar)<>'') Begin
                        Set psPtyppar to sSysxPtyppar
                        Send Rebuild_Constraints to Pseira_DD
                        Send Rebuild_Constraints to Pseira_DD2
                        Send Combo_Fill_List to Particle_Pseira_Seira
                    End
                    Else Begin
                        Set Shadow_State Of Particle_Partl_No Item 0 to False
                        Set psPtyppar to ''
                        Send Rebuild_Constraints to Pseira_DD
                        Send Rebuild_Constraints to Pseira_DD2
                    End
                End
        
                Set Value Of Particle_Pseira_Seira Item 0 to sSeira
        
            End
            Else Begin
                Set Shadow_State Of Particle_Partl_No Item 0 to False
                Set psPtyppar to ''
            End
        
            Send Preset_Nomisma
        
        End_Procedure
        
        Procedure Show_CN
            String  sCode sCompany sBranch sCustprom sCN_Recr
            String sClient_ID sClient_Recr sCN sCNd sCN_Code
            Integer iYear ret_val
        
            Get Field_Current_Value Of Particle_DD Field Particle.CN_Code to sCode
        
            Clear Cn
            Move sCode to CN.CN_Code
            Find Eq CN By Index.5
            If (Not(Found))  Begin
                Send Clear to Cn_DD2
                Set Color Of FormSub2 to clRed
                Set Value Of CN_CN_Descr Item 0 to ''
            End
            Else Begin
                Send Find_By_recnum To CN_DD2 CN.File_Number CN.Recnum
                Set Color Of FormSub2 to clLime
                Set Value Of CN_CN_Descr Item 0 to CN.CN_Descr
            End
        End_procedure
        
        
        
        
        
        //AB-StoreEnd

    End_Object    // Particle


    //AB-StoreStart
                    
                    
                    
                    
                    
                    
    //AB-StoreEnd

//AB/     End_Object    // prj
