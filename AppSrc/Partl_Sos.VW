//AB/ Project Particle
//AB/     Object prj is a View_Project
//AB/         Set ProjectName to "Particle"
//AB/         Set ProjectFileName to "Particle.VW"
//AB/         Set GenerateFileName to "NONAME"

// Project Object Structure
//   Particle is a dbViewSubS
//     Pseira_DD2 is a Pseira_DataDictionary
//     CN_DD2 is a CN_DataDictionary
//     Psxetika_DD2 is a Psxetika_DataDictionary
//     Ctypkin_DD is a DataDictionary
//     Wtypkin_DD is a DataDictionary
//     Ptyppar_DD is a DataDictionary
//     Pseira_DD is a DataDictionary
//     Nomisma_DD is a DataDictionary
//     Country_DD is a DataDictionary
//     Towns_DD is a DataDictionary
//     Cities_DD is a DataDictionary
//     Payresp_DD is a DataDictionary
//     Areas_DD is a DataDictionary
//     Clients_DD is a DataDictionary
//     Particle_DD is a DataDictionary
//     Wapokat_DD is a DataDictionary
//     Wapomast_DD is a DataDictionary
//     Wax_DD is a DataDictionary
//     Units_DD is a DataDictionary
//     Witemkat_DD is a DataDictionary
//     Fpa_DD is a DataDictionary
//     Item_DD is a DataDictionary
//     Witemx_DD is a DataDictionary
//     Pmoves_DD is a DataDictionary
//     Baxiokat_DD is a DataDictionary
//     Syscurxr_DD is a DataDictionary
//     Salesmen_DD is a DataDictionary
//     Constrct_DD is a DataDictionary
//     Cn_DD is a DataDictionary
//     Psxetika_DD is a DataDictionary
//     Tparticl_DD is a DataDictionary
//     Partlfpa_DD is a DataDictionary
//     Ptyppar_Ptyppar_Code is a dbFormSub
//     Ptyppar_Ptyppar_Descr is a dbFormSub
//     Particle_Partl_Hmnia is a dbFormSub
//     Ora_Apostolhs is a dbFormSub
//     Particle_Pseira_Seira is a dbComboFormSub
//     FormSub1 is a FormSub
//     Particle_Partl_No is a dbFormSub
//     Particle_Partl_Recr is a dbFormSub
//     Clients_Client_ID is a dbFormSub
//     Clients_Client_Name is a dbFormSub
//     Particle_Cn_Code is a dbFormSub
//     Cn_Cn_Descr is a dbFormSub
//     Tropos_Diakin is a dbComboFormSub
//     Topos_Apostolhs is a dbFormSub
//     Skopos_Diakin is a dbFormSub
//     Oxhma_Code is a dbFormSub
//     Particle_Oxhma_Descr is a dbFormSub
//     Particle_Odhgos_Name is a dbFormSub
//     Antlia_Code is a dbFormSub
//     Particle_Antlia_Descr is a dbFormSub
//     frmIsClosed is a FormSub
//     Nomisma_Nomisma_code is a dbFormSub
//     Particle_Isotimia is a dbFormSub
//     frmIsotimia is a FormSub
//     frmEURO is a FormSub
//     dbTabDialogSubS1 is a dbTabDialogSubS
//       dbTabPageSubS1 is a dbTabPageSubS
//         Pmoves_ is a dbGridSub
//         ExtraContainer is a dbContainer3dSub
//           Pms_Pctdisc is a dbFormSub
//           Pms_Discam is a dbFormSub
//           TextBoxSub28 is a TextBoxSub
//           TextBoxSub29 is a TextBoxSub
//           TextBoxSub30 is a TextBoxSub
//       dbTabPageSubS2 is a dbTabPageSubS
//         Psxetika_ is a dbGridSub
//     btnKleisimo is a ButtonSub
//     btnEktyposh is a ButtonSub
//     Payam is a dbFormSub
//     Totambd is a dbFormSub
//     Totdiscpc is a dbFormSub
//     GenFpa is a dbFormSub
//     TextBoxSub1 is a TextBoxSub
//     TextBoxSub3 is a TextBoxSub
//     TextBoxSub6 is a TextBoxSub
//     BtnAnalysh is a ButtonSub
//     btnExodos is a ButtonSub
//     Textbox1 is a Textbox
//     Textbox3 is a Textbox
//     Textbox4 is a Textbox
//     Textbox5 is a Textbox
//     Textbox6 is a Textbox
//     TextBoxSub8 is a TextBoxSub
//     TextBoxSub11 is a TextBoxSub
//     txtRecr is a TextBoxSub
//     BtnMetasxhmatismos is a ButtonSub
//     Textbox7 is a Textbox
//     TextBoxSub13 is a TextBoxSub
//     btnTP is a ButtonSub
//     TextBoxSub14 is a TextBoxSub
//     ProFPA is a dbFormSub
//     btnPreview is a ButtonSub
//     TextBoxSub15 is a TextBoxSub
//     TextBoxSub16 is a TextBoxSub
//     frmEuro0 is a FormSub
//     TextBoxSub17 is a TextBoxSub
//     TextBoxSub18 is a TextBoxSub
//     TextBoxSub19 is a TextBoxSub
//     TextBoxSub20 is a TextBoxSub
//     TextBoxSub21 is a TextBoxSub
//     FormSub2 is a FormSub
//     TextBoxSub22 is a TextBoxSub
//     TextBoxSub23 is a TextBoxSub
//     TextBoxSub24 is a TextBoxSub
//     TextBoxSub27 is a TextBoxSub
//     btnPelath is a ButtonSub
//     btnApothikh is a ButtonSub
//     Particle_Tropos_Plhromhs is a dbComboFormSub
//     btnSxetika is a ButtonSub

// Register all objects
Register_Object Antlia_Code
Register_Object Areas_DD
Register_Object Baxiokat_DD
Register_Object BtnAnalysh
Register_Object BtnMetasxhmatismos
Register_Object btnApothikh
Register_Object btnEktyposh
Register_Object btnExodos
Register_Object btnKleisimo
Register_Object btnPelath
Register_Object btnPreview
Register_Object btnSxetika
Register_Object btnTP
Register_Object Cities_DD
Register_Object Clients_Client_ID
Register_Object Clients_Client_Name
Register_Object Clients_DD
Register_Object CN_DD2
Register_Object Cn_Cn_Descr
Register_Object Cn_DD
Register_Object Constrct_DD
Register_Object Country_DD
Register_Object Ctypkin_DD
Register_Object dbTabDialogSubS1
Register_Object dbTabPageSubS1
Register_Object dbTabPageSubS2
Register_Object ExtraContainer
Register_Object FormSub1
Register_Object FormSub2
Register_Object Fpa_DD
Register_Object frmEURO
Register_Object frmEuro0
Register_Object frmIsClosed
Register_Object frmIsotimia
Register_Object GenFpa
Register_Object Item_DD
Register_Object Nomisma_DD
Register_Object Nomisma_Nomisma_code
Register_Object Ora_Apostolhs
Register_Object Oxhma_Code
Register_Object Particle_Antlia_Descr
Register_Object Particle_Cn_Code
Register_Object Particle_DD
Register_Object Particle_Isotimia
Register_Object Particle_Odhgos_Name
Register_Object Particle_Oxhma_Descr
Register_Object Particle_Partl_Hmnia
Register_Object Particle_Partl_No
Register_Object Particle_Partl_Recr
Register_Object Particle_Pseira_Seira
Register_Object Particle_Tropos_Plhromhs
Register_Object Particle
Register_Object Partlfpa_DD
Register_Object Payam
Register_Object Payresp_DD
Register_Object Pmoves_
Register_Object Pmoves_DD
Register_Object Pms_Discam
Register_Object Pms_Pctdisc
Register_Object ProFPA
Register_Object Pseira_DD
Register_Object Pseira_DD2
Register_Object Psxetika_
Register_Object Psxetika_DD
Register_Object Psxetika_DD2
Register_Object Ptyppar_DD
Register_Object Ptyppar_Ptyppar_Code
Register_Object Ptyppar_Ptyppar_Descr
Register_Object Salesmen_DD
Register_Object Skopos_Diakin
Register_Object Syscurxr_DD
Register_Object TextBoxSub1
Register_Object TextBoxSub11
Register_Object TextBoxSub13
Register_Object TextBoxSub14
Register_Object TextBoxSub15
Register_Object TextBoxSub16
Register_Object TextBoxSub17
Register_Object TextBoxSub18
Register_Object TextBoxSub19
Register_Object TextBoxSub20
Register_Object TextBoxSub21
Register_Object TextBoxSub22
Register_Object TextBoxSub23
Register_Object TextBoxSub24
Register_Object TextBoxSub27
Register_Object TextBoxSub28
Register_Object TextBoxSub29
Register_Object TextBoxSub3
Register_Object TextBoxSub30
Register_Object TextBoxSub6
Register_Object TextBoxSub8
Register_Object Textbox1
Register_Object Textbox3
Register_Object Textbox4
Register_Object Textbox5
Register_Object Textbox6
Register_Object Textbox7
Register_Object Topos_Apostolhs
Register_Object Totambd
Register_Object Totdiscpc
Register_Object Towns_DD
Register_Object Tparticl_DD
Register_Object Tropos_Diakin
Register_Object txtRecr
Register_Object Units_DD
Register_Object Wapokat_DD
Register_Object Wapomast_DD
Register_Object Wax_DD
Register_Object Witemkat_DD
Register_Object Witemx_DD
Register_Object Wtypkin_DD


//AB/ AppBuild VIEW


//AB-StoreTopStart

Use bpEnCmvs.dg     // Business process to update Cmoves and Wcmoves
Use Rmhtrb.rv       // Report Ñ°´Áß‡©û™ ´†£¶¢¶öÂ¶¨
Use PartlFpa.vw
Open Sysfile
Use V014.vw
Use TPArticl.vw
Use KinApoth.vw
Use vwCmoves.vw
Use ShowSx.vw



//AB-StoreTopEnd

//AB-IgnoreStart

Use dbView.Sub
Use DFAllEnt.pkg
Use dbForm.Sub
Use dbCmbfrm.Sub
Use Form.Sub
Use dbTabDlgS.Sub
Use dbGrid.Sub
Use dbCont3.Sub
Use Txtbox.Sub
Use Button.Sub

Use CTYPKIN.DD
Use WTYPKIN.DD
Use PTYPPAR.DD
Use PSEIRA.DD
Use NOMISMA.DD
Use COUNTRY.DD
Use TOWNS.DD
Use CITIES.DD
Use PAYRESP.DD
Use AREAS.DD
Use CLIENTS.DD
Use PARTICLE.DD
Use WAPOKAT.DD
Use WAPOMAST.DD
Use WAX.DD
Use UNITS.DD
Use WITEMKAT.DD
Use FPA.DD
Use ITEM.DD
Use WITEMX.DD
Use PMOVES.DD
Use BAXIOKAT.DD
Use SYSCURXR.DD
Use SALESMEN.DD
Use CONSTRCT.DD
Use CN.DD
Use PSXETIKA.DD
Use TPARTICL.DD
Use PARTLFPA.DD

//AB-IgnoreEnd

ACTIVATE_VIEW Activate_Particle FOR Particle

Object Particle is a dbViewSubS

    //AB-StoreTopStart

    Set Verify_Data_Loss_Msg TO Get_No_Confirmation
    Set Verify_Delete_Msg    TO Get_No_Confirmation
    Set Verify_Save_Msg      TO Get_No_Confirmation
    Set Verify_Exit_Msg      TO Get_No_confirmation

    Property String     psNom0              Public ''
    Property String     psNom00             Public ''
    Property String     psNomR              Public ''
    Property String     psOldNomismaCode    Public ''
    Property String     psPtyppar           Public ''
    Property String     psSeira             Public ''
    Property String     psIsSeiraAutoNum    Public ''
    Property String     psClientRecr        Public ''
    Property String     psCNDescr           Public ''
    Property String     psClientID          Public ''
    Property String     psFindParticleRecr  Public ''
    Property Integer    piFromTparticl      Public  0
    Property String     psPartlRecr         Public ''

    Procedure Frontise_Ta_Ekkremh Integer aiEkleise Integer aiDeleteParast
        String sRecr sStr sSxetika_Recr
        Integer isClosed iErr iRecnum
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
        If (sRecr<>'') Begin
            Clear Psxetika
            Move sRecr to Psxetika.Partl_recr
            Find Gt Psxetika By Index.4 //Psxetika:Index.4:Partl_recr+Psx_Partl_Recr
            While ((Found=1) And (sRecr=Psxetika.Partl_recr))
                Move Psxetika.Psxetika_Recr to sSxetika_Recr

                Clear Particle
                Move Psxetika.Psx_Partl_Recr to Particle.Partl_Recr
                Find Eq Particle By Index.2
                If (Found=1) Begin
                    Reread Particle
                    If (aiEkleise)      Move sRecr  to Particle.Partl_Ekl_Recr
                    Else                Move ''     to Particle.Partl_Ekl_Recr
                    If (aiDeleteParast) Move 0      to Particle.Partl_Timol
                    Saverecord Particle
                    Unlock
                End

                Clear Psxetika
                Move sSxetika_Recr to Psxetika.Psxetika_Recr
                Find Eq Psxetika By Index.2
                Find Gt Psxetika By Index.4 //Psxetika:Index.4:Partl_recr+Psx_Partl_Recr
            Loop
        End
    End_Procedure

    Procedure Kleise_Ta_Pedia
        Integer iNoOfLines iRecn
        Get Field_Current_Value Of Particle_DD Field ;
            Particle.Partl_NoOfLines                        To        iNoOfLines
        Set Enabled_State   Of Ptyppar_Ptyppar_Code         To       (iNoOfLines=0)
        Set Item_Option     Of Particle_Partl_Hmnia Item 0  To NoPut (iNoOfLines<>0)
        Set Enabled_State   Of Particle_Pseira_Seira        To       (iNoOfLines=0)
        Set Enabled_State   Of Particle_Pseira_Seira        To       (iNoOfLines=0)
        Set Enabled_State   Of Particle_Partl_No            To       (iNoOfLines=0)
        Set Enabled_State   Of Particle_Partl_Recr          To       (iNoOfLines=0)
        Set Enabled_State   Of Clients_Client_ID            To       (iNoOfLines=0)
        Set Enabled_State   Of Particle_CN_Code             To       (iNoOfLines=0)
        Set Enabled_State   Of Nomisma_Nomisma_Code         To       (iNoOfLines=0)
        Set Enabled_State   Of Particle_Isotimia            To       (iNoOfLines=0)

    //    Set Enabled_State   Of Oxhma_Code                   To       (iNoOfLines=0)
    //    Set Enabled_State   Of Tropos_Diakin                To       (iNoOfLines=0)
    //    Set Enabled_State   Of Topos_Apostolhs              To       (iNoOfLines=0)
    //    Set Enabled_State   Of Antlia_Code                  To       (iNoOfLines=0)
    //    Set Enabled_State   Of Skopos_Diakin                To       (iNoOfLines=0)
    //    Set Enabled_State   Of Ora_Apostolhs                To       (iNoOfLines=0)

    //    Get Field_Current_Value Of Particle_DD Field ;
    //        Particle.Recnum                                 To        iRecn
    //    Send Find_By_Recnum to Particle_DD Particle.File_Number iRecn
    End_procedure

    Procedure Set_The_Euro
        Integer iGridID iAmount iBreak iPmovesID
        String  sCode sOld sCodeApo sCodeEos
        Number  nPoso nPosoEuro nIsotimia
        Date    dHmnia

        If (Current_Record(Particle_DD(Particle(Self)))) Begin
            Move SysCurXr.Euro_Code                                             to sCodeEos
            Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Nomisma_Code  to sCodeApo
            Get Field_Current_Value Of Nomisma_DD   Field Nomisma.KL_ISOT_EURO  to nIsotimia
            Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Hmnia  to dHmnia
            Get Field_Current_Value Of Particle_DD  Field Particle.PARTL_PAYAM  to nPoso
            If ((Trim(sCodeApo)<>'')    And (nIsotimia     <> 0)    And ;
                (nPoso         <> 0)    And (Trim(sCodeEos)<>'')    And ;
                (dHmnia        <>'')) Begin
                    Get fngConvertPoso sCodeApo nPoso sCodeEos dHmnia nIsotimia to nPosoEuro
                    If (nPosoEuro<>0) Set Value Of frmEuro0 Item 0 to nPosoEuro
                    Clear Nomisma
                    Move sCodeApo to Nomisma.Nomisma_Code
                    Find Eq Nomisma By Index.1
                    Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
            End
            Else Set Value Of frmEuro0 Item 0 to 0
        End
        Else Set Value Of frmEuro0 Item 0 to 0
    End_Procedure

    Procedure Enhm_Particle_Amounts
        Number nAMDISCPMS nTotDiscPc nTotAmAd nExtra nGenAm
        Number nDiscAm  nTotambd nExtraVatP nVatAm nTotalVatPoso nGenFpa
        Number nExtraVat nDisc_Vat_Pct nDisc_Vat_Poso

        Get Field_Current_Value Of Particle_DD Field Particle.Partl_AMDISCPMS   to nAMDISCPMS
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_TotDiscPc   to nTotDiscPc
        Set Field_Current_Value Of Particle_DD Field Particle.Partl_Discam      to (nAmdiscpms+nTotdiscpc)
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_DiscAm      to nDiscAm

        Get Field_Current_Value Of Particle_DD Field Particle.Partl_DiscAm      to nDiscAm
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_Totambd     to nTotambd
        Set Field_Current_Value Of Particle_DD Field Particle.Partl_TotAmAd     to (nTotAmBd-nDiscAm)
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_TotAmAd     to nTotAmAd

        Get Field_Current_Value Of Particle_DD Field Particle.Partl_TotAmAd     to nTotAmAd
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_Extra       to nExtra
        Set Field_Current_Value Of Particle_DD Field Particle.Partl_GenAm       to (nTotAmad+nExtra)
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_GenAm       to nGenAm

        Get Field_Current_Value Of Particle_DD Field Particle.Partl_ExtraVatP   to nExtraVatP
        If (nExtraVatP=0) Begin
            Move 18 to nExtraVatP
            Set Field_Current_Value Of Particle_DD Field Particle.Partl_ExtraVatP   to 18
        End
        Set Field_Changed_Value Of Particle_DD Field Particle.Partl_ExtraVat    to (Round(nExtra*nExtraVatP/100))


        Get Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Pct      to nDisc_Vat_Pct
        If (nDisc_Vat_Pct=0) Begin
            Move 18 to nDisc_Vat_Pct
            Set Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Pct   to 18
        End
        Set Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Poso     to (Round(nTotDiscPC*nDisc_Vat_Pct/100))


        Get Field_Current_Value Of Particle_DD Field Particle.Disc_Vat_Poso     to nDisc_Vat_Poso
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_VatAm       to nVatAm
        Get Field_Current_Value Of Particle_DD Field Particle.Partl_ExtraVat    to nExtraVat

        Set Field_Current_Value Of Particle_DD Field Particle.Total_Vat_Poso    to (nVatAm-nDisc_Vat_Poso+nExtraVat)

        Get Field_Current_Value Of Particle_DD Field Particle.Total_Vat_Poso    to nTotalVatPoso

        Set Field_Current_Value Of Particle_DD Field Particle.Partl_PayAm ;
            to (nGenAm+nTotalVatPoso)

        Send Set_The_Euro
    End_Procedure

    Object Pseira_DD2 is a Pseira_DataDictionary
        Begin_Constraints
            String sRecr
            Get psPtyppar to sRecr
            If (sRecr<>'') Constrain Pseira.Ptyppar_recr eq sRecr
        End_Constraints
    End_Object    // Pseira_DD2


    Object CN_DD2 is a CN_DataDictionary
    End_Object    // CN_DD2

    Object Psxetika_DD2 is a Psxetika_DataDictionary
    End_Object    // Psxetika_DD2

    Property String psModule Public ''

    //AB-StoreTopEnd

    Set Label to "è‡¢„©ú†™ / Äö¶®‚™"
    Set Size to 292 527
    Set Location to 2 3

    //AB-DDOStart

    Object Ctypkin_DD is a Ctypkin_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True


        //AB-StoreEnd

    End_Object    // Ctypkin_DD

    Object Wtypkin_DD is a Wtypkin_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Wtypkin_DD

    Object Ptyppar_DD is a Ptyppar_DataDictionary
        Set DDO_Server to (Ctypkin_DD(self))
        Set DDO_Server to (Wtypkin_DD(self))

        //AB-StoreStart

        Set Read_Only_State to True

        Procedure OnConstrain
            If (psModule(Self)<>'') Begin
                Constrain Ptyppar.Ptyppar_Module eq (psModule(Self))
            End
        End_Procedure





        //AB-StoreEnd

    End_Object    // Ptyppar_DD

    Object Pseira_DD is a Pseira_DataDictionary

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Set DDO_Server to (Ptyppar_DD(self))

        //AB-StoreStart

        Set Read_Only_State to True

        Begin_Constraints
            String sRecr
            Get psPtyppar to sRecr
            If (sRecr<>'') Constrain Pseira.Ptyppar_recr eq sRecr
        End_Constraints









        //AB-StoreEnd

    End_Object    // Pseira_DD

    Object Nomisma_DD is a Nomisma_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True



        //AB-StoreEnd

    End_Object    // Nomisma_DD

    Object Country_DD is a Country_DataDictionary

        //AB-StoreStart
        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Country_DD

    Object Towns_DD is a Towns_DataDictionary
        Set DDO_Server to (Country_DD(self))

        //AB-StoreStart
        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Towns_DD

    Object Cities_DD is a Cities_DataDictionary
        Set DDO_Server to (Towns_DD(self))

        //AB-StoreStart
        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Cities_DD

    Object Payresp_DD is a Payresp_DataDictionary
    End_Object    // Payresp_DD

    Object Areas_DD is a Areas_DataDictionary

        //AB-StoreStart
        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Areas_DD

    Object Clients_DD is a Clients_DataDictionary
        Set DDO_Server to (Cities_DD(self))
        Set DDO_Server to (Payresp_DD(self))
        Set DDO_Server to (Areas_DD(self))

        //AB-StoreStart
        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Clients_DD

    Object Particle_DD is a Particle_DataDictionary

        //AB-StoreTopStart
        Property Integer piNoChangesAllowed Public 0
        Property Integer piHasMetasx        Public 0

        //AB-StoreTopEnd

        Set DDO_Server to (Ptyppar_DD(self))
        Set DDO_Server to (Nomisma_DD(self))
        Set DDO_Server to (Clients_DD(self))

        //AB-StoreStart

        Procedure OnConstrain
            Constrain Particle.Company_Code  eq SysCurXR.Company_Code
            Constrain Particle.Branch_Code   eq SysCurXR.Branch_Code
            Constrain Particle.Year_Year     eq SysCurXR.Year_Year
            If (psModule(Self)<>'') Begin
                Constrain Particle.Partl_Module eq (psModule(Self))
            End
        End_Procedure

        Procedure New_Current_Record  Integer iOldRec  Integer iNewRec
            Forward Send New_Current_Record  iOldRec iNewRec
            Set piHasMetasx to (Particle.Partl_Timol<>0)
        End_Procedure   // New_Current_Record

        Procedure Request_Save
            Integer iRecnum
            Move Particle.Recnum to iRecnum
            If ((piNoChangesAllowed(Self)<>1) Or (piHasMetasx(Self)=1)) Begin
                Forward Send Request_Save
            End
            Else Begin
                If (piHasMetasx(Self)=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                Else Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\né† ò¢¢òö‚™ ÉÑå òß¶üû°úÁ´†°ò§" "è¢û®¶≠¶®Âò"
                If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
            End
        End_Procedure

        Procedure Request_Delete
            Integer iErr isClosed isPrinted isReadOnly iRecnum
            Move Particle.Recnum to iRecnum
            If (piNoChangesAllowed(Self)<>1) Begin
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ektyposh to isPrinted
                If (Not(isPrinted)) Begin
                    If (piHasMetasx(Self)=1) Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† £ú´ò©Æû£ò´†©´úÂ.\nÉú§ úß†´®‚ßú´ò† û õ†òö®ò≠„" "è¢û®¶≠¶®Âò"
                    Else Begin
                        Begin_Transaction
                            Send Frontise_Ta_Ekkremh (isClosed) 1
                            Forward Send Request_Delete to Particle_DD
                        End_Transaction
                    End
                End
                Else Begin
                    Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† ú°´¨ß‡üúÂ.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                    If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                End
            End
            Else Begin
                Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
            End
        End_Procedure

        //Object oValidateSeira is a FileValidationTable
        //    set table_title         to "Ñß†¢¶ö„ ëú†®·™ èò®ò©´ò´†°¶Á"
        //    Set Main_File           to Pseira.File_Number
        //    Set Code_Field          to   8 //Pseira.Pseira_Seira
        //    Set Description_Field   to  11 //Pseira.Pseira_Printer
        //    Set Ordering            to   1
        //    Set Static_State to False
        //End_Object

        //Set Field_Value_Table Field Particle.Pseira_Seira ;
        //    To (oValidateSeira(Self))

        //Set Validate_State Of oValidateSeira  to true //false








        //AB-StoreEnd

    End_Object    // Particle_DD

    Object Wapokat_DD is a Wapokat_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Wapokat_DD

    Object Wapomast_DD is a Wapomast_DataDictionary
        Set DDO_Server to (Wapokat_DD(self))

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Wapomast_DD

    Object Wax_DD is a Wax_DataDictionary

        //AB-StoreTopStart
        Property Integer    piYear          Public  0
        Property String     psCompany       Public ''
        Property String     psBranch        Public ''
        Property String     psWapokat       Public ''

        //AB-StoreTopEnd

        Set DDO_Server to (Wapomast_DD(self))

        //AB-StoreStart

        Set Read_Only_State to True

        Begin_Constraints
            Integer iMustConstrain iYear
            String  sCompany sBranch sWapokat
            Get piYear     to  iYear
            Get psCompany  to  sCompany
            Get psBranch   to  sBranch
            Get psWapokat  to  sWapokat
            If (sCompany<>'') Begin
                Constrain Wax.Company_Code eq sCompany
                If (sBranch<>'') Begin
                    Constrain Wax.Branch_Code eq sBranch
                    If (iYear<>0) Begin
                        Constrain Wax.Year_Year eq iYear
                        If (sWapokat<>'') Begin
                            Constrain Wax.Wapokat_Code eq sWapokat
                        End
                    End
                End
            End
        End_Constraints



        //AB-StoreEnd

    End_Object    // Wax_DD

    Object Units_DD is a Units_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Units_DD

    Object Witemkat_DD is a Witemkat_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Witemkat_DD

    Object Fpa_DD is a Fpa_DataDictionary

        //AB-StoreStart
        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Fpa_DD

    Object Item_DD is a Item_DataDictionary
        Set DDO_Server to (Units_DD(self))
        Set DDO_Server to (Witemkat_DD(self))
        Set DDO_Server to (Fpa_DD(self))

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Item_DD

    Object Witemx_DD is a Witemx_DataDictionary
        Set DDO_Server to (Item_DD(self))

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Witemx_DD

    Object Pmoves_DD is a Pmoves_DataDictionary

        //AB-StoreTopStart
        Property Integer piNoChangesAllowed Public 0

        //AB-StoreTopEnd

        Set DDO_Server to (Wax_DD(self))
        Set DDO_Server to (Witemx_DD(self))
        Set DDO_Server to (Particle_DD(self))
        Set Constrain_File to Particle.File_Number

        //AB-StoreStart

        Procedure Request_Save
            Integer iRecnum
            Move Pmoves.Recnum to iRecnum
            If (piNoChangesAllowed(Self)<>1) Begin
                Forward Send Request_Save
            End
            Else Send Display_UI
        End_Procedure

        Procedure Request_Delete
            Integer iErr isClosed isPrinted isReadOnly iRecnum
            Move Pmoves.Recnum to iRecnum
            If (piNoChangesAllowed(Self)<>1) Begin
                Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ektyposh to isPrinted
                If (Not(isPrinted)) Forward Send Request_Delete
            End
            Else Begin
                Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† °¢ú†õ‡£‚§¶.\nÜ õ†òö®ò≠„ ÉÑå ‚ö†§ú" "è¢û®¶≠¶®Âò"
                Send Beginning_Of_Data to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self)))) True
            End
        End_Procedure







        //AB-StoreEnd

    End_Object    // Pmoves_DD

    Object Baxiokat_DD is a Baxiokat_DataDictionary
    End_Object    // Baxiokat_DD

    Object Syscurxr_DD is a Syscurxr_DataDictionary

        //AB-StoreStart

        Set Read_Only_State to True

        //AB-StoreEnd

    End_Object    // Syscurxr_DD

    Object Salesmen_DD is a Salesmen_DataDictionary
    End_Object    // Salesmen_DD

    Object Constrct_DD is a Constrct_DataDictionary
    End_Object    // Constrct_DD

    Object Cn_DD is a Cn_DataDictionary
        Set DDO_Server to (Clients_DD(self))
        Set DDO_Server to (Salesmen_DD(self))
        Set DDO_Server to (Constrct_DD(self))
        Set Constrain_File to Clients.File_Number

        //AB-StoreStart
        Set Read_Only_State to True

        //Begin_Constraints
        //    String sRecr
        //    Get psClientRecr to sRecr
        //    Constrain CN.Client_recr eq sRecr
        //End_Constraints



        //AB-StoreEnd

    End_Object    // Cn_DD

    Object Psxetika_DD is a Psxetika_DataDictionary
        Set DDO_Server to (Particle_DD(self))
        Set Constrain_File to Particle.File_Number

        //AB-StoreStart

        Procedure Request_Save
        End_Procedure

        Procedure Request_Delete
        End_Procedure



        //AB-StoreEnd

    End_Object    // Psxetika_DD

    Object Tparticl_DD is a Tparticl_DataDictionary
        Set DDO_Server to (Particle_DD(self))
        Set DDO_Server to (Baxiokat_DD(self))
        Set Constrain_File to Particle.File_Number
    End_Object    // Tparticl_DD

    Object Partlfpa_DD is a Partlfpa_DataDictionary
        Set DDO_Server to (Particle_DD(self))
        Set DDO_Server to (Fpa_DD(self))
        Set Constrain_File to Particle.File_Number
    End_Object    // Partlfpa_DD

    Set Main_DD to (Particle_DD(self))
    Set Server to (Particle_DD(self))

    //AB-DDOEnd

    Object Ptyppar_Ptyppar_Code is a dbFormSub

        //AB-StoreTopStart

        Procedure Preset_Nomisma
            String  sNom
            Integer iRec
            Number  nIsot
            Get Field_Current_Value Of Particle_DD Field Particle.recnum to iRec
            If (NOT(iRec)) Begin
                Get Field_Current_Value Of Nomisma_DD Field Nomisma.Nomisma_Code to sNom
                If (trim(sNom)='') Begin
                    Send Clear to Nomisma_DD
                    Move 'GRD' to Nomisma.Nomisma_Code
                    Send Find to Nomisma_DD eq 1 // Nomisma:Index.1:Nomisma_Code
                    Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                End
            End
        End_procedure

        //AB-StoreTopEnd

        Entry_Item Ptyppar.Ptyppar_code
        Set Size to 13 66
        Set Location to 2 61
        Set Label_Col_Offset to 4
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOn
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        Procedure Rythmise_Thn_Seira
            String sRecr sWhat sNom
            Send Combo_delete_Data to Particle_Pseira_Seira
            Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Ptyppar_Recr to sRecr
            If (trim(sRecr)<>'') Begin
                Get Field_Current_Value Of Ptyppar_DD Field Ptyppar.Ptyppar_Is_What to sWhat
                If (Trim(sWhat)='2') Begin // Ä§ ú†§ò† ß‡¢û©û
                    Set psPtyppar to sRecr
                    Send Rebuild_Constraints to Pseira_DD
                    Send Rebuild_Constraints to Pseira_DD2
                    Send Combo_Fill_List to Particle_Pseira_Seira
                End
                Else Begin
                    Set Shadow_State Of Particle_Partl_No Item 0 to False
                    Set psPtyppar to ''
                    Send Rebuild_Constraints to Pseira_DD
                    Send Rebuild_Constraints to Pseira_DD2
                End
            End
            Else Set Shadow_State Of Particle_Partl_No Item 0 to False
            Send Preset_Nomisma
        End_Procedure

        Procedure Prompt
            Set psModule Of (sl012(self)) to (psModule(Self))
            Set Modal_State Of (sl012(Self)) to True
            Forward Send Prompt
            Send Rythmise_Thn_Seira
        End_procedure

        Procedure OnChange
            If (Focus(Desktop)=Ptyppar_Ptyppar_Code(Self)) Send Rythmise_Thn_Seira
        End_procedure

        Procedure Find_Next
            Forward Send Find_Next
            Send Rythmise_Thn_Seira
        End_procedure

        Procedure Find_Previous
            Forward Send Find_Previous
            Send Rythmise_Thn_Seira
        End_procedure

        Procedure Find_Ge
            Forward Send Find_Ge
            Send Rythmise_Thn_Seira
        End_procedure

        Procedure OnKillFocus
            Forward Send OnKillFocus
            Send Preset_Nomisma
            Send Rythmise_Thn_Seira
        End_Procedure

        Procedure Exiting
            Forward Send Exiting
            Send Preset_Nomisma
            Send Rythmise_Thn_Seira
        End_Procedure


        //AB-StoreEnd

    End_Object    // Ptyppar_Ptyppar_Code

    Object Ptyppar_Ptyppar_Descr is a dbFormSub
        Entry_Item Ptyppar.Ptyppar_descr
        Set Size to 13 278
        Set Location to 2 133
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE

        //AB-StoreStart
        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        //AB-StoreEnd

    End_Object    // Ptyppar_Ptyppar_Descr

    Object Particle_Partl_Hmnia is a dbFormSub

        //AB-StoreTopStart


        //AB-StoreTopEnd

        Entry_Item Particle.Partl_hmnia
        Set Size to 13 66
        Set Location to 18 61
        Set Label_Col_Offset to 4
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOn
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart


        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        Procedure Prompt
            Set psModule Of (sl014(self)) to (psModule(Self))
            Forward Send Prompt
            Send Show_CN
            Send Show_Seira
            Send Set_The_Decimal_Points
        End_Procedure

        Procedure Refresh Integer iMode
            Integer iLockMe iRecn
            String  sRecr sEkleise
            Integer iRecnm
            Forward Send Refresh iMode

            Set psWapokat Of (Wax(Self))    to ''
            Set psWapokat Of Wax_DD         to ''
            Send Rebuild_Constraints        to Wax_DD

            Set Enabled_State   Of BtnEktyposh          to True
            Set Enabled_State   Of BtnKleisimo          to True
            Set Enabled_State   Of BtnTP                to True
            Set Enabled_State   Of BtnPreview           to True
            Set Enabled_State   Of BtnMetasxhmatismos   to True
            Set Enabled_State   Of BtnSxetika           to True

            Move (Particle.Partl_Ektyposh='1')  to iLockMe
            Move Particle.Recnum                to irecn

            Set Enabled_State   Of BtnPreview   to (iRecn>0)
            Set Enabled_State   Of BtnAnalysh   to (iRecn>0)
            Set Enabled_State   Of BtnSxetika   to (iRecn>0)

            Set Enabled_State   Of BtnPelath    to ((Particle.Cmoves_Recr<>'') And (Particle.Partl_Ekleise='1'))

            Move Pmoves.Recnum             to iRecnm
            Move Pmoves.WCmoves_Recr       to sRecr
            Move Particle.Partl_Ekleise    to sEkleise

            Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))



            Move Particle.Partl_Recr to sRecr
            Clear Psxetika
            Move sRecr to Psxetika.Psx_Partl_Recr
            Find GT Psxetika By Index.3 // Psx_Partl_Recr+Partl_Recr
            Set Enabled_State Of (BtnSxetika(Particle(Self))) to ;
                ((Found=1) And (Psxetika.Psx_Partl_Recr=sRecr))


            If (iLockMe) Begin

                Set piNoChangesAllowed Of Particle_DD   to True
                Set piNoChangesAllowed Of Pmoves_DD     to True

                Set Enabled_State Of BtnMetasxhmatismos to (Trim(Particle.Partl_Timol)=0)

                If (Particle.Partl_Ekleise='1') Begin
                    Set Label   Of BtnKleisimo to 'Ä§¶†ö£ò'
                    Set Bitmap  Of BtnKleisimo to 'Open1.bmp'
                    Set Enabled_State   Of BtnTP        to True
                End
                else Begin
                    set label   of btnkleisimo to "â¢úÂ©†£¶"
                    Set Bitmap  Of BtnKleisimo to 'Close1.bmp'
                    Set Enabled_State   Of BtnTP        to False
                End

                Set Enabled_State                           Of BtnKleisimo to False
                Set Color                                   Of frmIsClosed to clRed
            End
            Else Begin
                Set piNoChangesAllowed Of Particle_DD       to ((Particle.Partl_Ekleise='1') Or (Trim(Particle.Partl_Timol)<>0))
                Set piNoChangesAllowed Of Pmoves_DD         to ((Particle.Partl_Ekleise='1') Or (Trim(Particle.Partl_Timol)<>0))

                Set Enabled_State   Of BtnEktyposh          to (Particle.Partl_Ekleise='1')
                Set Enabled_State   Of BtnMetasxhmatismos   to ((Particle.Partl_Ekleise='1') And (Trim(Particle.Partl_Timol)=0))
                Set Enabled_State   Of BtnKleisimo          to ((irecn>0) And (Trim(Particle.Partl_Timol)=0))

                If (Particle.Partl_Ekleise='1') Begin
                    Set Color           Of frmIsClosed to clRed
                    set label           Of btnkleisimo to 'Ä§¶†ö£ò'
                    Set Bitmap          Of BtnKleisimo to 'Open1.bmp'
                    Set Enabled_State   Of BtnTP       to True
                End
                Else Begin
                    Set Color           Of frmIsClosed to clLime
                    set label           Of btnkleisimo to "â¢úÂ©†£¶"
                    Set Bitmap          Of BtnKleisimo to 'Close1.bmp'
                    Set Enabled_State   Of BtnTP       to False
                End
            End
            Send Show_CN
            Send Show_Seira
            Send Set_The_Decimal_Points
            Send Kleise_Ta_Pedia
        End_Procedure

        Procedure Exiting Integer WhereTo Returns Integer
            Integer ret_val
            Date dHmnia
            String sStr
            Move '' to sStr
            Forward Get Msg_Exiting WhereTo to ret_val
            If Ret_Val Procedure_Return Ret_Val
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Hmnia to dHmnia
            If (dHmnia<>'') Begin
                If ((dHmnia<Syscurxr.Year_XrhshFrom) Or (dHmnia>Syscurxr.Year_XrhshTo)) Begin
                    append sstr tz.oria_xrhshs syscurxr.year_year '   òß¶ ' syscurxr.year_xrhshfrom '    ú¢™ ' syscurxr.year_xrhshto
                    send stop_box "Ü£ú®¶£û§Âò ú°´Ê™ ¶®Â‡§ Æ®„©û™" sstr
                    Function_Return 1
                End
            End
            Procedure_Return ret_val
        End_procedure











        //AB-StoreEnd

    End_Object    // Particle_Partl_Hmnia

    Object Ora_Apostolhs is a dbFormSub
        Entry_Item Particle.Ora_apostolhs
        Set Size to 13 35
        Set Location to 18 150
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
    End_Object    // Ora_Apostolhs

    Object Particle_Pseira_Seira is a dbComboFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Particle.Pseira_seira
        Set Size to 13 76
        Set Location to 18 221
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Allow_Blank_State to TRUE

        //AB-StoreStart
        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        On_Key KCancel Send Next

        Procedure Combo_Item_Changed
            String sSeira sAuto sWhat
            Forward Send Combo_Item_Changed
            Get Value Item 0 to sSeira
            Set psSeira to (Trim(sSeira))
            Send Show_Seira
            Get psIsSeiraAutoNum to sAuto
            Move (Trim(sAuto)) to sAuto
            Set Shadow_State Of Particle_Partl_No Item 0 to (sAuto='1')
        End_procedure

        Procedure OnCloseUp
            String sSeira sAuto sWhat
            Forward Send OnCloseUp
            Get Value Item 0 to sSeira
            Set psSeira to (Trim(sSeira))
            Send Show_Seira
            Get psIsSeiraAutoNum to sAuto
            Move (Trim(sAuto)) to sAuto
            Set Shadow_State Of Particle_Partl_No Item 0 to (sAuto='1')
        End_Procedure

        Procedure Combo_Fill_List
            String sSeira
            Send Combo_Delete_Data
            Send Rebuild_Constraints to Pseira_DD2
            Send Clear to Pseira_DD2
            Send Find to Pseira_DD2 First_Record 1
            While (Found=1)
                Get Field_Current_Value Of Pseira_DD2 Field Pseira.Pseira_Seira to sSeira
                Send Combo_Add_Item (Trim(sSeira))
                Send Find to Pseira_DD2 Next_Record 1
            Loop
        End_Procedure

        Procedure Find_Next
        End_Procedure
        Procedure Find_Previous
        End_Procedure
        Procedure Find_Ge
        End_Procedure




















        //AB-StoreEnd

    End_Object    // Particle_Pseira_Seira

    Object FormSub1 is a FormSub
        Set Size to 7 9
        Set Location to 21 299
        Set Label_Col_Offset to 2
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        Set Shadow_State    to True
        Set Enabled_State   to False
        Set Color           to clLime


        //AB-StoreEnd

    End_Object    // FormSub1

    Object Particle_Partl_No is a dbFormSub
        Entry_Item Particle.Partl_no
        Set Size to 13 63
        Set Location to 18 348
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        //AB-StoreEnd

    End_Object    // Particle_Partl_No

    Object Particle_Partl_Recr is a dbFormSub
        Entry_Item Particle.Partl_recr
        Set Size to 13 66
        Set Location to 18 454
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOff
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
        Set Visible_State To False
        Set Enabled_State to False


        //AB-StoreEnd

    End_Object    // Particle_Partl_Recr

    Object Clients_Client_ID is a dbFormSub
        Entry_Item Clients.Client_id
        Set Size to 13 126
        Set Location to 33 61
        Set Label_Col_Offset to 4
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOn
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        Set TextColor to clNavy

        Procedure Request_Clear
            Send Clear to Clients_DD
            Send Rebuild_Constraints to CN_DD
            Send Show_CN
        End_Procedure

        Procedure Request_Clear_All
            Send Clear to Clients_DD
            Send Rebuild_Constraints to CN_DD
            Send Show_CN
        End_Procedure

        Procedure Prompt
            Send Clear to CN_DD
            Send Clear to CN_DD2
            Set Value Of Particle_CN_Code to ''
            Set psModule Of (sl100(Self)) to (psModule(Self))
            Forward Send Prompt
            Send rebuild_Constraints to Cn_DD
            Send Show_CN
        End_procedure

        Procedure Find_Next
            Send Clear to CN_DD
            Send Clear to CN_DD2
            Set Value Of Particle_CN_Code to ''
            Forward Send Find_Next
            Send rebuild_Constraints to Cn_DD
            Send Show_CN
        End_procedure

        Procedure Find_Previous
            Send Clear to CN_DD
            Send Clear to CN_DD2
            Set Value Of Particle_CN_Code to ''
            Forward Send Find_Previous
            Send rebuild_Constraints to Cn_DD
            Send Show_CN
        End_procedure

        Procedure Find_Ge
            Send Clear to CN_DD
            Send Clear to CN_DD2
            Set Value Of Particle_CN_Code to ''
            Forward Send Find_GE
            Send rebuild_Constraints to Cn_DD
            Send Show_CN
        End_procedure




























        //AB-StoreEnd

    End_Object    // Clients_Client_ID

    Object Clients_Client_Name is a dbFormSub
        Entry_Item Clients.Client_name
        Set Size to 13 299
        Set Location to 33 221
        Set Color to clBtnFace
        Set Label_Col_Offset to 4
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOff
        Set Enabled_State to FALSE
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE

        //AB-StoreStart
        Set TextColor to clNavy

        //Procedure Request_Clear
        //    Send Clear to Clients_DD
        //    Send Rebuild_Constraints to CN_DD
        //    Send Show_CN
        //End_Procedure

        //Procedure Request_Clear_All
        //    Send Clear to Clients_DD
        //    Send Rebuild_Constraints to CN_DD
        //    Send Show_CN
        //End_Procedure

        //Procedure Prompt
        //    Send Clear to CN_DD
        //    Send Clear to CN_DD2
        //    Set Value Of Particle_CN_Code to ''
        //    Set psModule Of (sl100(Self)) to (psModule(Self))
        //    Forward Send Prompt
        //    Send rebuild_Constraints to Cn_DD
        //    Send Show_CN
        //End_procedure

        //Procedure Find_Next
        //    Send Clear to CN_DD
        //    Send Clear to CN_DD2
        //    Set Value Of Particle_CN_Code to ''
        //    Forward Send Find_Next
        //    Send rebuild_Constraints to Cn_DD
        //    Send Show_CN
        //End_procedure

        //Procedure Find_Previous
        //    Send Clear to CN_DD
        //    Send Clear to CN_DD2
        //    Set Value Of Particle_CN_Code to ''
        //    Forward Send Find_Previous
        //    Send rebuild_Constraints to Cn_DD
        //    Send Show_CN
        //End_procedure

        //Procedure Find_Ge
        //    Send Clear to CN_DD
        //    Send Clear to CN_DD2
        //    Set Value Of Particle_CN_Code to ''
        //    Forward Send Find_GE
        //    Send rebuild_Constraints to Cn_DD
        //    Send Show_CN
        //End_procedure





























        //AB-StoreEnd

    End_Object    // Clients_Client_Name

    Object Particle_Cn_Code is a dbFormSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Entry_Item Particle.Cn_code
        Set Size to 14 126
        Set Location to 48 61
        Set Label_Col_Offset to 4
        Set Label_Justification_Mode to jMode_Right

        //AB-StoreStart

        Procedure Exiting Integer WhereTo Returns Integer
            String sCode sClient
            Integer rVal
            Forward Get Msg_Exiting WhereTo to rVal
            Get Field_Current_Value Of Particle_DD Field Particle.CN_Code to sCode
            Move (Trim(sCode)) to sCode
            If (sCode<>'') Begin
                Clear CN
                Move sCode to CN.CN_Code
                Find Eq CN By Index.5 // CN:Index.1:Cn_Code
                If (Not(Found)) Begin
                    Send Stop_Box "í¶ ‚®ö¶ úÂ§ò† ò§Áßò®°´¶" "è®¶©¶Æ„"
                    Move 1 to rVal
                End
                Else Begin
                    Get Field_Current_Value Of Clients_DD Field Clients.Client_ID to sClient
                    If (Trim(sClient)<>Trim(Cn.Client_ID)) Begin
                        Send Stop_Box "í¶ ‚®ö¶ õú§ ò§¶Â°ú† ©´¶§ úß†¢úö£‚§¶ ≠¶®‚ò" "è®¶©¶Æ„"
                        Move 1 to rVal
                    End
                End
            End
            Procedure_Return rVal
        End_Procedure

        //Procedure OnKillFocus
        //    Forward Send OnKillFocus
        //End_Procedure



        Procedure Request_Clear
            Send Clear to Cn_DD
            Send Clear to Cn_DD2
        End_Procedure

        Procedure Request_Clear_All
            Send Clear to Cn_DD
            Send Clear to Cn_DD2
        End_Procedure

        Procedure Prompt_CallBack Integer hPromptID
            String sID
            get field_current_value of clients_dd field clients.client_id to sid
            Set FragmaClient_ID Of hPromptID to sID
        End_Procedure

        Procedure Prompt
            Forward Send Prompt
            Send Show_CN
        End_Procedure

        Procedure OnChange
            Send Show_CN
        End_procedure


        Procedure Find_Next
        End_Procedure
        Procedure Find_Previous
        End_Procedure
        Procedure Find_GE
        End_Procedure



















        //AB-StoreEnd

    End_Object    // Particle_Cn_Code

    Object Cn_Cn_Descr is a dbFormSub
        Entry_Item Cn.Cn_descr
        Set Server to (Cn_DD(self))
        Set Size to 13 299
        Set Location to 49 221
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Prompt_Button_Mode to pb_PromptOff
        Set Enabled_State to FALSE
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE

        //AB-StoreStart

        Set Server to (CN_DD2(Self))




        //AB-StoreEnd

    End_Object    // Cn_Cn_Descr

    Object Tropos_Diakin is a dbComboFormSub
        Entry_Item Particle.Tropos_diakin
        Set Size to 13 126
        Set Location to 64 61
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Entry_State to FALSE
        Set Combo_Sort_State to FALSE

        //AB-StoreStart

        Set Entry_State Item 0      to False
        Set Allow_Blank_State       to False
        Set Allow_Undefined_State   to False







        //AB-StoreEnd

    End_Object    // Tropos_Diakin

    Object Topos_Apostolhs is a dbFormSub
        Entry_Item Particle.Topos_apostolhs
        Set Size to 13 145
        Set Location to 64 221
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
    End_Object    // Topos_Apostolhs

    Object Skopos_Diakin is a dbFormSub
        Entry_Item Particle.Skopos_diakin
        Set Size to 13 123
        Set Location to 64 397
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
    End_Object    // Skopos_Diakin

    Object Oxhma_Code is a dbFormSub
        Entry_Item Particle.Oxhma_code
        Set Size to 13 43
        Set Location to 80 61
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right

        //AB-StoreStart

        Procedure OnChange
            String sCar sCarDescr sDriver sDriverDescr
            Get Field_Current_Value Of Particle_DD Field Particle.Oxhma_Code to sCar

            Get fsVresOxhmaDescr    Of Particle_DD sCar     to sCarDescr
            Set Value               Of Particle_Oxhma_Descr to sCarDescr

            Get fsVresDriverCode    Of Particle_DD sCar     to sDriver
            //Set Value Of Particle_Odhgos_Code                   to sDriver

            get fsVresDriverDescr   Of Particle_DD sDriver  to sDriverDescr
            Set Value               Of Particle_Odhgos_Name to sDriverDescr
        End_Procedure


        //AB-StoreEnd

    End_Object    // Oxhma_Code

    Object Particle_Oxhma_Descr is a dbFormSub
        Entry_Item Particle.Oxhma_descr
        Set Size to 13 75
        Set Location to 80 109
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Particle_Oxhma_Descr

    Object Particle_Odhgos_Name is a dbFormSub
        Entry_Item Particle.Odhgos_name
        Set Size to 13 145
        Set Location to 80 221
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Particle_Odhgos_Name

    Object Antlia_Code is a dbFormSub
        Entry_Item Particle.Antlia_code
        Set Size to 13 55
        Set Location to 80 397
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right

        //AB-StoreStart

        Procedure OnChange
            String sCar sCarDescr
            Get Field_Current_Value Of Particle_DD Field Particle.Antlia_Code   to sCar
            Get fsVresAntliaDescr   Of Particle_DD              sCar            to sCarDescr
            Set Value               Of Particle_Antlia_Descr                    to sCarDescr
        End_Procedure


        //AB-StoreEnd

    End_Object    // Antlia_Code

    Object Particle_Antlia_Descr is a dbFormSub
        Entry_Item Particle.Antlia_descr
        Set Size to 13 64
        Set Location to 80 456
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Enabled_State to FALSE
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // Particle_Antlia_Descr

    Object frmIsClosed is a FormSub
        Set Size to 29 34
        Set Location to 2 413
        Set Label_Col_Offset to 2
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set Shadow_State to True


        //AB-StoreEnd

    End_Object    // frmIsClosed

    Object Nomisma_Nomisma_code is a dbFormSub
        Entry_Item Nomisma.Nomisma_code
        Set Size to 13 126
        Set Location to 95 61
        Set Label_Col_Offset to 4
        Set Label_Justification_Mode to jMode_Right

        //AB-StoreStart

        //Procedure Request_Clear
        //    Delegate Send Request_Clear
        //End_procedure

        //Procedure Request_Clear_All
        //    Delegate Send Request_Clear_All
        //End_procedure

        Procedure Prompt
            Forward Send Prompt
            Send Find_The_Rate
        End_Procedure

        Procedure Exiting Integer WhereTo Returns Integer
            Integer rVal iInt
            Forward Get Msg_Exiting WhereTo to rVal
            Send Find_The_Rate
            Procedure_Return rVal
        End_Procedure

        Procedure OnKillFocus
            Send Find_The_Rate
        End_Procedure

        Procedure Find_Next
            Forward Send Find_Next
            Send Find_The_Rate
        End_Procedure

        Procedure Find_Previous
            Forward Send Find_Previous
            Send Find_The_Rate
        End_Procedure

        Procedure Find_GE
            Forward Send Find_GE
            Send Find_The_Rate
        End_Procedure


        //AB-StoreEnd

    End_Object    // Nomisma_Nomisma_code

    Object Particle_Isotimia is a dbFormSub
        Entry_Item Particle.Isotimia
        Set Size to 13 69
        Set Location to 95 221
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right

        //AB-StoreStart
        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure


        //AB-StoreEnd

    End_Object    // Particle_Isotimia

    Object frmIsotimia is a FormSub
        Set Size to 13 62
        Set Location to 95 304
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Enabled_State to FALSE
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // frmIsotimia

    Object frmEURO is a FormSub
        Set Size to 13 55
        Set Location to 95 397
        Set Color to clBtnFace
        Set Label_Col_Offset to 2
        Set Enabled_State to FALSE
        Set Item_Shadow_State Item 0 to TRUE
        Set Shadow_State Item 0 to TRUE
    End_Object    // frmEURO

    Object dbTabDialogSubS1 is a dbTabDialogSubS
        Set Size to 103 523
        Set Location to 110 1
        Object dbTabPageSubS1 is a dbTabPageSubS
            Set Label to "â†§„©ú†™    "
            Object Pmoves_ is a dbGridSub
                Set Main_File to Pmoves.File_Number
                Set Server to (Pmoves_DD(self))
                Set Size to 62 519
                Set Location to 2 0
                Set Wrap_State to TRUE
                Set Child_Table_State to FALSE

                Begin_Row
                    Entry_Item Witemx.Witemx_code
                    Entry_Item Witemx.Witemx_descr
                    Entry_Item Wax.Wax_descr
                    Entry_Item Pmoves.Pms_qty
                    Entry_Item Units.Units_descr
                    Entry_Item Pmoves.Pms_unitprice
                    Entry_Item Pmoves.Pms_amaftdisc
                    Entry_Item Pmoves.Pms_vatpct
                    Entry_Item Pmoves.Pms_vatam
                    Entry_Item Pmoves.Pms_payable
                End_Row

                Set Form_Width    item 0 to 48
                Set Header_Label  item 0 to "â‡õ"

                Set Form_Width    item 1 to 95
                Set Header_Label  item 1 to "Ñ†õ¶™"

                Set Form_Width    item 2 to 76
                Set Header_Label  item 2 to "Äß¶ü„°û"

                Set Form_Width    item 3 to 27
                Set Header_Label  item 3 to "è¶©"

                Set Form_Width    item 4 to 31
                Set Header_Label  item 4 to "ã/ã"

                Set Form_Width    item 5 to 47
                Set Header_Label  item 5 to "í†£„ ã¶§"

                Set Form_Width    item 6 to 42
                Set Header_Label  item 6 to "åú´"

                Set Form_Width    item 7 to 36
                Set Header_Label  item 7 to "% îèÄ"

                Set Form_Width    item 8 to 53
                Set Header_Label  item 8 to "è¶©Ê îèÄ"

                Set Form_Width    item 9 to 58
                Set Header_Label  item 9 to "ëÁ§¶¢¶"


                //AB-StoreStart

                Set Column_Option       Item  1 to NoEnter True // èú®†ö®ò≠„ ÑÂõ¶¨™
                Set Column_Option       Item  4 to NoEnter True // ã¶§·õò ã‚´®û©û™
                Set Column_Option       Item  6 to NoEnter True // åú´ è¶©¶ (Calculated)
                Set Column_Option       Item  9 to NoEnter True // ë¨§¶¢¶   (Calculated)GEORG

                Set Child_Table_State To True

                Set Points Item 3 to 1 // 1 Éú°òõ†°¶ ö†ò ´û§ è¶©¶©´û´ò 06/03/2001 js


                Function Child_entering returns Integer
                    Integer rVal iRec iDecs iRecNom isReadOnly iRecnm
                    String  sNomCode sRecr sEkleise

                    If ( (Should_Save(Particle_DD(Self)))           And ;
                         (piNoChangesAllowed(Particle_DD(Self))<>1) )   ;
                                Send Request_Save to (Particle_DD(Self))


                    Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                    Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                    Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise

                    If (BtnApothikh(Particle(Self))) ;
                        Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                            ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))


                    Get Field_Current_Value Of Nomisma_DD  Field Nomisma.Nomisma_Code to sNomCode

                    Clear Nomisma
                    Move sNomCode to Nomisma.Nomisma_Code
                    Find eq Nomisma By Index.1 // Nomisma:Index.1:Nomisma_Code

                    If (Not(Found)) Begin
                        Send Activate to (Nomisma_Nomisma_Code(Particle(Self)))
                        Function_Return 1
                    End
                    Else Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum


                    Get Field_Current_Value Of Particle_DD Field Particle.Recnum to iRec
                    Get Field_Current_Value Of Nomisma_DD Field Nomisma.Recnum to iRecNom
                    If (Not(iRec)) Begin
                        send info_box "Éú§ ¨ß·®Æú† ú§ú®öÊ ßò®ò©´ò´†°Ê" tz.plhroforia
                        Send Activate to (Particle_Partl_Hmnia(Particle(Self)))
                        Function_Return 1
                    End
                    Else If (Not(iRecNom)) Begin
                        send info_box "Éú§ úß†¢‚•ò´ú åÊ£†©£ò ©´¶ èò®ò©´ò´†°Ê" tz.plhroforia
                        Send Activate to (Nomisma_Nomisma_Code(Particle(Self)))
                        Function_Return 1
                    End

                    Forward Get Child_Entering to rVal

                    Function_Return rVal
                End_Function

                Function  row_changing integer from_item integer to_item returns integer
                    String  sRecr sEkleise
                    Integer iRecnm rVal
                    Forward get row_changing from_item to_item to rVal

                    Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                    Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                    Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise

                    If (BtnApothikh(Particle(Self))) ;
                        Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                            ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))

                    Function_Return rVal
                End_Function

                Procedure Item_Change Integer Fromi Integer Toi Returns Integer
                    Integer rVal iBase iColumn iFieldNumber iFileNumber
                    Integer iFromPCT iDecimals iYear iColfrom iColTo iRecnm
                    Number nQty nTimhMon nQtyTimhMon nPctEkpt nPosoEkpt
                    Number nPosoNet nPctFpa nPosoFpa nPosoSynolo nFpa
                    String sNameFrom sNameTo sRecr sWapokat sCompany sBranch swrecr sEkleise

                    Forward Get Msg_Item_Change Fromi Toi To Rval

                    Set psWapokat Of (Wax(Self))    to ''
                    Set psWapokat Of Wax_DD         to ''
                    Send Rebuild_Constraints        to Wax_DD

                    Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                    Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                    Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise

                    If (BtnApothikh(Particle(Self))) ;
                        Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                            ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))

                    If ( ((piNoChangesAllowed(Pmoves_DD  (Self))<>1)    Or  ;
                          (piNoChangesAllowed(Particle_DD(Self))<>1))   And ;
                          (Current_Record    (Particle_DD(Self)))    ) Begin

                        Get Column FromI    to iColumn
                        Get Column FromI    to iColFrom
                        Get Column ToI      to iColTo

                        If (iColTo=2) Begin
                            Get Field_Current_Value Of Witemx_DD Field Witemx.Witemx_recr to swrecr
                            If (trim(swrecr)<>'') Begin
                                Move SysCurXr.Company_Code   to sCompany
                                Move SysCurXr.Branch_Code    to sBranch
                                Move SysCurXr.Year_Year      to iYear
                                Get Field_Current_Value Of Witemx_DD Field Witemx.ITEM_APOKAT_COD ;
                                    to sWapokat

                                Set piMustConstrain Of (Wax(Self)) To True
                                Set piYear          Of (Wax(Self)) To iYear
                                Set psCompany       Of (Wax(Self)) To sCompany
                                Set psBranch        Of (Wax(Self)) To sBranch
                                Set psWapokat       Of (Wax(Self)) To sWapokat

                                Set piYear          Of Wax_DD To iYear
                                Set psCompany       Of Wax_DD To sCompany
                                Set psBranch        Of Wax_DD To sBranch
                                Set psWapokat       Of Wax_DD To sWapokat

                                Send Rebuild_Constraints to Wax_DD

                                Get Field_Current_Value Of Fpa_DD       Field Fpa.Fpa_Pososto   to nFpa
                                Set Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_Vatpct to nFpa
                            End
                        End

                        Get Data_File  Item iColumn                             to iFileNumber
                        Get Data_Field Item iColumn                             to iFieldNumber
                        Get_Attribute DF_FIELD_NAME Of iFileNumber iFieldNumber to sNameFrom
                        Move (Trim(sNameFrom))                                  to sNameFrom
                        Get Column ToI                                          to iColumn
                        Get Data_File  Item iColumn                             to iFileNumber
                        Get Data_Field Item iColumn                             to iFieldNumber
                        Get_Attribute DF_FIELD_NAME Of iFileNumber iFieldNumber to sNameTo
                        Move (Trim(sNameTo))                                    to sNameTo
                        Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Dekadika      To iDecimals
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_qty        To nQty
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_unitprice  To nTimhMon

                        If ((nQty<>0) And (nTimhMon<>0)) Begin

                            Move (nQty*nTimhMon) to nQtyTimhMon

                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_pctdisc   To nPctEkpt
                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt

                            //If (sNameFrom=(Uppercase('Pms_PctDisc'))) Begin
                                Move  (Round_Number((nQtyTimhMon*nPctEkpt/100),iDecimals))    to nPosoEkpt
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam To nPosoEkpt
                            //End

                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                            Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Amaftdisc To (nQtyTimhMon-nPosoEkpt)
                            Move (nQtyTimhMon-nPosoEkpt)                                    To nPosoNet

                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatPct    To nPctFpa
                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa

                            //If (sNameFrom=(Uppercase('Pms_VatPct'))) Begin
                                Move  (Round_Number((nPosoNet*nPctFpa/100),iDecimals)) to nPosoFpa
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm To nPosoFpa
                            //End

                            Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                            Move (nPosoNet+nPosoFpa) to nPosoSynolo
                            Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Payable   To nPosoSynolo
                        End
                    End
                    Procedure_Return rVal
                End_Procedure

                Procedure Request_Delete
                    Forward Send Request_Delete
                    Send Display_UI
                End_Procedure





                //AB-StoreEnd

            End_Object    // Pmoves_

            Object ExtraContainer is a dbContainer3dSub
                Set Border_Style to Border_ClientEdge
                Set Size to 23 517
                Set Location to 65 0
                Set Color to 14671839
                Object Pms_Pctdisc is a dbFormSub
                    Entry_Item Pmoves.Pms_pctdisc
                    Set Server to (Pmoves_DD(self))
                    Set Size to 13 29
                    Set Location to 4 188
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart

                    Procedure GoBack_to_Grid
                        Integer iRec
                        Get Field_Current_Value Of Pmoves_DD Field Pmoves.Recnum to iRec
                        Send Activate to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self))))
                        If (iRec) Send Find_By_Recnum to Pmoves_DD Pmoves.File_Number iRec
                    End_Procedure

                    Procedure Request_Save
                        Send GoBack_to_Grid
                    End_Procedure

                    Procedure Request_Delete
                    End_Procedure

                    Procedure Compute_Again
                        Integer rVal iBase iColumn iFieldNumber iFileNumber
                        Integer iFromPCT iDecimals iYear iColfrom iColTo iRecnm
                        Number nQty nTimhMon nQtyTimhMon nPctEkpt nPosoEkpt
                        Number nPosoNet nPctFpa nPosoFpa nPosoSynolo nFpa
                        String sNameFrom sNameTo sRecr sWapokat sCompany sBranch swrecr sEkleise

                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Recnum             to iRecnm
                        Get Field_Current_Value Of Pmoves_DD    Field Pmoves.WCmoves_Recr       to sRecr
                        Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to sEkleise

                        If (BtnApothikh(Particle(Self))) ;
                            Set Enabled_State Of (BtnApothikh(Particle(Self))) to ;
                                ((iRecnm<>0) And (sRecr<>'') And (sEkleise='1'))

                        If ( ((piNoChangesAllowed(Pmoves_DD  (Self))<>1)    And  ;
                              (piNoChangesAllowed(Particle_DD(Self))<>1))   And ;
                              (Current_Record    (Particle_DD(Self)))    ) Begin

                            Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Dekadika      To iDecimals
                            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_qty        To nQty
                            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Pms_unitprice  To nTimhMon

                            If ((nQty<>0) And (nTimhMon<>0)) Begin

                                Move (nQty*nTimhMon) to nQtyTimhMon

                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_pctdisc   To nPctEkpt
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                                Move  (Round_Number((nQtyTimhMon*nPctEkpt/100),iDecimals))    to nPosoEkpt
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam To nPosoEkpt

                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_discam    To nPosoEkpt
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Amaftdisc To (nQtyTimhMon-nPosoEkpt)
                                Move (nQtyTimhMon-nPosoEkpt)                                    To nPosoNet

                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatPct    To nPctFpa
                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa

                                Move  (Round_Number((nPosoNet*nPctFpa/100),iDecimals)) to nPosoFpa
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm To nPosoFpa

                                Get Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_VatAm     To nPosoFpa
                                Move (nPosoNet+nPosoFpa) to nPosoSynolo
                                Set Field_Current_Value Of Pmoves_DD Field Pmoves.Pms_Payable   To nPosoSynolo
                            End
                        End
                    End_Procedure

                    Procedure OnChange
                        If (Focus(Desktop)=Pms_PctDisc(Self)) Send Compute_Again
                    End_Procedure

                    Procedure OnKillFocus
                        If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
                    End_Procedure

                    Procedure Exiting Integer WhereTo Returns Integer
                        Integer rVal
                        Forward Get Msg_Exiting WhereTo to rVal
                        If rVal Procedure_Return rVal
                        If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
                        Procedure_Return rVal
                    end_procedure


                    //AB-StoreEnd

                End_Object    // Pms_Pctdisc

                Object Pms_Discam is a dbFormSub
                    Entry_Item Pmoves.Pms_discam
                    Set Server to (Pmoves_DD(self))
                    Set Size to 13 59
                    Set Location to 4 307
                    Set Label_Col_Offset to 2
                    Set Label_Justification_Mode to jMode_Right

                    //AB-StoreStart
                    Set Item_Option Item 0 to NoEnter true


                    //AB-StoreEnd

                End_Object    // Pms_Discam

                Object TextBoxSub28 is a TextBoxSub
                    Set Label to "%"
                    Set Color to 14671839
                    Set Location to 6 219
                    Set Size to 10 7
                    Set FontWeight to 600
                End_Object    // TextBoxSub28

                Object TextBoxSub29 is a TextBoxSub
                    Set Label to "è¶©¶©´Ê Ñ°ß´‡©û™"
                    Set Color to 14671839
                    Set Location to 5 106
                    Set Size to 10 67
                    Set FontWeight to 600
                End_Object    // TextBoxSub29

                Object TextBoxSub30 is a TextBoxSub
                    Set Label to "è¶©Ê Ñ°ß´‡©û™"
                    Set Color to 14671839
                    Set Location to 5 244
                    Set Size to 10 53
                    Set FontWeight to 600
                End_Object    // TextBoxSub30

            End_Object    // ExtraContainer


            //AB-StoreStart
            set label to "Ä§·¢¨©û ßò®ò©´ò´†°¶Á"

            //AB-StoreEnd

        End_Object    // dbTabPageSubS1

        Object dbTabPageSubS2 is a dbTabPageSubS
            Set Label to "ëÆú´†°· èò®ò©´ò´†°·"
            Object Psxetika_ is a dbGridSub

                //AB-StoreTopStart


                //AB-StoreTopEnd

                Set Main_File to Psxetika.File_Number
                Set Server to (Psxetika_DD(self))
                Set Size to 82 509
                Set Location to 2 3
                Set Wrap_State to TRUE

                Begin_Row
                    Entry_Item Psxetika.Psx_partl_recr
                    Entry_Item Psxetika.Sx_client_desc
                    Entry_Item Psxetika.Sx_ptyppar_desc
                    Entry_Item Psxetika.Sx_partl_hmnia
                    Entry_Item Psxetika.Sx_partl_no
                    Entry_Item Psxetika.Sx_pseira_seira
                End_Row

                Set Form_Width    item 0 to 65
                Set Header_Label  item 0 to "Recr"

                Set Form_Width    item 1 to 161
                Set Header_Label  item 1 to "î¶®‚ò™"

                Set Form_Width    item 2 to 127
                Set Header_Label  item 2 to "èò®ò©´ò´†°Ê"

                Set Form_Width    item 3 to 60
                Set Header_Label  item 3 to "Ü£ú®/§Âò"

                Set Form_Width    item 4 to 53
                Set Header_Label  item 4 to "Ä®†ü£Ê™"

                Set Form_Width    item 5 to 38
                Set Header_Label  item 5 to "ëú†®ò"


                //AB-StoreStart

                //Set Read_Only_State To True
                Set No_Create_State To True
                Set No_Delete_State To True

                Function Child_entering00 returns Integer
                    Integer rVal iRec iDecs iRecNom isReadOnly
                    Get Read_Only_State Of Pmoves_DD to isReadOnly
                    If (isReadOnly) Function_Return 1
                    Forward Get Child_Entering to rVal
                    Function_Return rVal
                End_Function





                //AB-StoreEnd

            End_Object    // Psxetika_


            //AB-StoreStart
            set label to "ëÆú´†°· èò®ò©´ò´†°·"


            //AB-StoreEnd

        End_Object    // dbTabPageSubS2


        //AB-StoreStart


        //AB-StoreEnd

    End_Object    // dbTabDialogSubS1

    Object btnKleisimo is a ButtonSub
        Set Label to "â¢úÂ©†£¶"
        Set Bitmap to "open1.bmp"
        Set Size to 21 23
        Set Location to 213 2
        Set Focus_Mode to Pointer_Only
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set TooltipValue to "Ä§¶†ö£ò / â¢úÂ©†£¶ ßò®ò©´ò´†°¶Á"

        Function Ftiaxe_Epimerismous    String  asRecr  ;
                                        Number  anEkpt  ;
                                        Number  anExtra ;
                                        Integer aiLines ;
                                        Number  anSynolo;
                                        Integer aisClosed Returns Integer

            Number nYpolExtra nYpolEkpt nPosoGrammhs nPososto nSynolo nPoso
            Integer iNoOfLines iInt rVal

            // Ü ú§û£ú®‡©û ´¶¨ Pmoves £ú úß†£ú®†©£¶ ß¶©‡§ öú§†°„™ ú°ß´‡©û™
            // °ò† öú§†°„™ úß†ôò®¨§©û™ òß¶ ´¶ ßò®ò©´ò´†°Ê, ö†§ú´ò† £ú procedural
            // °‡õ†°ò ö†ò 2 ôò©†°¶Á™ ¢Êö¶¨™.
            // 1. ö†ò ¢Êö¶¨™ ´òÆ¨´û´ò™
            // 2. ö†ò´† ´ò ßúõ†ò ò¨´ò ÉÑå ©¨££ú´úÆ¶¨§ ©´ò ©¨§¶¢ò ´¶¨ Pmoves
            // òß¢ò °ò´òö®ò≠¶§´ò† ‡©´ú §ò ©¨§¨ß¶¢¶ö†©´¶¨§ òß¶ ´û§ õ†òõ†°ò©†ò
            // ò§¶†•ú/°¢ú†©ú (business process bpencmvs.dg) ¶´ò§ üò ö†§¶¨§ ¶†
            // úöö®ò≠ú™ ©´û§ òß¶üû°û °ò† ©´¶¨™ ßú¢ò´ú™ °ò† ò¨´ò úò§ ´¶ ß®¶ô¢úß¶¨§
            // ´ò ò§´†©´¶†Æò flags. (ßÆ ©´û§ òß¶üû°û ´¶ õú¢´. òß¶©´¶¢û™)

            If (aisClosed=1) Begin
                // ò§ ú†§ò† °¢ú†©´¶ ¶´ò§ ßò´òú† ´¶ °¶¨£ß† ò§¶†•ú/°¢ú†©ú ´¶´ú
                // ©û£ò†§ú† ß‡™ ´¶ ßò®ò©´ò´†°Ê ò§¶†öú† ò®ò °òüò®†ù¶¨£ú ´ò ßúõ†ò
                // úß†£ú®†©£¶¨ ú°ß´‡©û™ °ò† úß†ôò®¨§©û™ ´†£¶¢¶ö†¶¨ ©´ò lines
                Clear Pmoves
                Lock
                Move (Trim(asRecr)) to Pmoves.Partl_Recr
                Find Gt Pmoves By Index.3
                While ((Found=1) And (Pmoves.Partl_Recr=(Trim(asRecr))))
                    Move 0 to Pmoves.Extra_Epimer
                    Move 0 to Pmoves.Ekpt_Epimer
                    Saverecord Pmoves
                    Find Gt Pmoves By Index.3
                Loop
                Unlock
            End
            Else Begin
                // ò§ ú†§ò† ò§¶†Æ´¶ ¶´ò§ ßò´òú† ´¶ °¶¨£ß† ò§¶†•ú/°¢ú†©ú ´¶´ú
                // ©û£ò†§ú† ß‡™ ´¶ ßò®ò©´ò´†°Ê °¢ú†§ú† ò®ò ¨ß¶¢¶öÂù¶¨£ú ´ò ßúõ†ò
                // £ú ´†™ extra ú°ß´‡©ú†™ °ò† úß†ôò®¨§©ú†™ ö†ò °òüú Pmove

                Move anExtra    to nYpolExtra
                Move anEkpt     to nYpolEkpt


                Move 0 to iNoOfLines
                Clear Pmoves
                Move (Trim(asRecr)) to Pmoves.Partl_Recr
                Find Gt Pmoves By Index.3
                While ((Found=1) And (Pmoves.Partl_Recr=(Trim(asRecr))))
                    Add 1 to iNoOfLines
                    Find Gt Pmoves By Index.3
                Loop

                If (iNoOfLines<>aiLines) Function_Return 50999

                Move 0 to iNoOfLines
                Clear Pmoves
                Lock
                Move (Trim(asRecr)) to Pmoves.Partl_Recr
                Find Gt Pmoves By Index.3
                While ((Found=1) And (Pmoves.Partl_Recr=(Trim(asRecr))))
                    Add 1 to iNoOfLines
                    If (iNoOfLines=aiLines) Begin
                        // Ä§ ú†§ò† û ´ú¢ú¨´ò†ò ö®ò££û ´¶¨ ßò®ò©´ò´†°¶Á
                        // ô·ù¶¨£ú ´¶ ¨ß¶¢¶†ß¶ ´‡§ ß¶©‡§ ö†ò §ò £û§ ¨ß·®•¶¨§
                        // õ†ò≠¶®ú™ ©´¶ ©¨§¶¢¶ ´¶¨ úß†£ú®†©£¶Á
                        Move nYpolExtra to Pmoves.Extra_Epimer
                        Move nYpolEkpt  to Pmoves.Ekpt_Epimer
                    End
                    Else Begin
                        // Å®†©°¶¨£ú ß¶©¶©´¶ ©¨££ú´¶Æû™ ´¶¨ ß¶©¶¨ ´û™ ö®ò££û™
                        // ©´¶ ©¨§¶¢†°¶ ß¶©¶ ´¶¨ ßò®ò©´ò´†°¶Á ‡©´ú §ò ß®¶°ÁØú†
                        // ´¶ ß¶©¶©´¶ ö†ò úß†£ú®†©£Ê ´‡§ ß¶©‡§.
                        Move ((Pmoves.Pms_Ambd/anSynolo)*100) to nPososto

                        Move 0 to nPoso
                        If (anExtra<>0) Begin
                            Move (Round(anExtra*nPososto/100)) to nPoso
                            Sub nPoso from nYpolExtra
                            Move nPoso to Pmoves.Extra_Epimer
                        End
                        Else Move 0 to Pmoves.Extra_Epimer

                        Move 0 to nPoso
                        If (anEkpt<>0) Begin
                            Move (Round(anEkpt*nPososto/100)) to nPoso
                            Sub nPoso from nYpolEkpt
                            Move nPoso to Pmoves.Ekpt_Epimer
                        End
                        Else Move 0 to Pmoves.Ekpt_Epimer
                    End
                    Saverecord Pmoves
                    Find Gt Pmoves By Index.3
                Loop
                Unlock
            End
            Send Beginning_Of_Data to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self)))) True
            Function_Return rVal
        End_Function

        Procedure Ftiaxe_Tropous_Plhromhs String asPartlRecr Integer aisClosed Integer aiPartlRecnum

            String  sClient sErgo sPresp sBranch sWhere
            Integer iFoundOne iFromWhere isClosed

            Send Find_By_Recnum         to Particle_DD Particle.File_Number aiPartlRecnum
            Move (Trim(asPartlRecr))    to asPartlRecr


            // Hard Coded ¨ß¶¢¶ö†©£Ê™ ´®Êß‡§ ß¢û®‡£„™ £ú ´û§ ú•„™ ëìÇâÑâêàãÑåÜ ©ú†®·
            // 1. Ñ®ö¶  -  2. èú¢·´û™ -  3. ìß. è¢û®‡£„™ - 4. ìß¶°ò´·©´û£ò


            // É†òö®ò≠û ´‡§ ´®¶ß‡§ ß¢û®‡£û™ ©´¶ ßò®ò©´ò´†°Ê ò§ úÂ§ò† ò§¶†Æ´Ê
            If (Not(aisClosed)) Begin
                Send Find to TParticl_DD First_Record 1
                While ((Found=1) And (TPArticl.Partl_Recr=asPartlRecr))
                    Send Request_Delete to TParticl_DD
                    Send Find to TParticl_DD Next_Record 1
                Loop
                Procedure_Return
            End

            Clear Branch
            Move SysCurXr.Company_Code  to Branch.Company_Code
            Move SysCurXr.Branch_Code   to Branch.Branch_Code
            Find Eq Branch By Index.1 // Company_Code+Branch_Code

            Move Branch.Branch_Recr                                         to sBranch
            Get Field_Current_Value Of Particle_DD Field Particle.Client_ID to sClient
            Get Field_Current_Value Of Particle_DD Field Particle.Presp_ID  to sPresp
            Get Field_Current_Value Of Particle_DD Field Particle.CN_Code   to sErgo

            Move 0 to iFoundOne

            Move 0 to iFromWhere

            Move '' to sWhere

            Clear TPErga
            Move sErgo to TPErga.CN_Code
            Find Gt TPErga By Index.1 // CN_Code+...
            If ((Found=1) And (TPErga.CN_Code=sErgo)) Move 1 to iFoundOne
            If (iFoundOne) Begin
                Move 1 to iFromWhere
                Clear TPErga
                Move sErgo to TPErga.CN_Code
                Find Gt TPErga By Index.1 // CN_Code+...
                While ((Found=1) And (TPErga.CN_Code=sErgo))
                    Send Clear to TPArticl_DD
                    Send Clear to Baxiokat_DD
                    Move TPErga.Baxiokat_Code       to Baxiokat.Baxiokat_Code
                    Send Find to Baxiokat_DD Eq 1
                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPErga.Pct_Epi_Synolou
                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPErga.Paralabh_Meres
                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPErga.Xarhtos_Meres
                    Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPErga.Plhroteo_Meres
                    Send Calc_All_The_Fields to TPArticl_DD
                    Send Request_Save to Tparticl_DD
                    Find Gt TPErga By Index.1 // CN_Code+...
                Loop
            End
            Else Begin
                Move 0 to iFoundOne
                Clear TPClient
                Move sClient to TPClient.Client_ID
                Find Gt TPClient By Index.1 // TPClient_ID+...
                If ((Found=1) And (TPClient.Client_ID=sClient)) Move 1 to iFoundOne
                If (iFoundOne) Begin
                    Move 2 to iFromWhere
                    Clear TPClient
                    Move sClient to TPClient.Client_ID
                    Find Gt TPClient By Index.1 // Client_ID+...
                    While ((Found=1) And (TPClient.Client_ID=sClient))

                        Send Clear to TPArticl_DD
                        Send Clear to Baxiokat_DD
                        Move TPClient.Baxiokat_Code to Baxiokat.Baxiokat_Code
                        Send Find to Baxiokat_DD Eq 1
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPClient.Pct_Epi_Synolou
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPClient.Paralabh_Meres
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPClient.Xarhtos_Meres
                        Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPClient.Plhroteo_Meres
                        Send Calc_All_The_Fields to TPArticl_DD
                        Send Request_Save to Tparticl_DD
                        Find Gt TPClient By Index.1 // Client_ID+...
                    Loop
                End
                Else Begin
                    Move 0 to iFoundOne
                    Clear TPPresp
                    Move sPresp to TPPresp.PayResp_ID
                    Find Gt TPPresp By Index.1 // Presp_ID+...
                    If ((Found=1) And (TPPresp.PAYRESP_ID=sPresp)) Move 1 to iFoundOne
                    If (iFoundOne) Begin
                        Move 3 to iFromWhere
                        Clear TPPresp
                        Move sPresp to TPPresp.PayResp_ID
                        Find Gt TPPresp By Index.1 // Presp_ID+...
                        While ((Found=1) And (TPPresp.PAYRESP_ID=sPresp))

                            Send Clear to TPArticl_DD
                            Send Clear to Baxiokat_DD
                            Move TPPresp.Baxiokat_Code to Baxiokat.Baxiokat_Code
                            Send Find to Baxiokat_DD Eq 1
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPPresp.Pct_Epi_Synolou
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPPresp.Paralabh_Meres
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPPresp.Xarhtos_Meres
                            Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPPresp.Plhroteo_Meres
                            Send Calc_All_The_Fields to TPArticl_DD
                            Send Request_Save to Tparticl_DD
                            Find Gt TPPresp By Index.1 // Presp_ID+...
                        Loop
                    End
                    Else Begin
                        Move 0 to iFoundOne
                        Clear TPBranch
                        Move sBranch to TPBranch.Branch_Recr
                        Find Gt TPBranch By Index.1 // Branch_Recr+...
                        If ((Found=1) And (TPBranch.Branch_Recr=sBranch)) Move 1 to iFoundOne
                        If (iFoundOne) Begin
                            Move 4 to iFromWhere
                            Clear TPBranch
                            Move sBranch to TPBranch.Branch_Recr
                            Find Gt TPBranch By Index.1 // Branch_Recr+...
                            While ((Found=1) And (TPBranch.Branch_Recr=sBranch))

                                Send Clear to TPArticl_DD
                                Send Clear to Baxiokat_DD
                                Move TPBranch.Baxiokat_Code to Baxiokat.Baxiokat_Code
                                Send Find to Baxiokat_DD Eq 1
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Pct_Epi_Synolou   to TPBranch.Pct_Epi_Synolou
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Paralabh_Meres    to TPBranch.Paralabh_Meres
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Xarhtos_Meres     to TPBranch.Xarhtos_Meres
                                Set Field_Changed_Value Of TParticl_DD Field TParticl.Plhroteo_Meres    to TPBranch.Plhroteo_Meres
                                Send Calc_All_The_Fields to TPArticl_DD
                                Send Request_Save to Tparticl_DD
                                Find Gt TPBranch By Index.1 // Branch_ID+...
                            Loop
                        End
                    End
                End
            End
            If (iFromWhere) Begin
                     If (iFromWhere=1)  Move '´ò ‚®öò'              to sWhere
                Else If (iFromWhere=2)  Move '´¶¨™ ßú¢·´ú™'         to sWhere
                Else If (iFromWhere=3)  Move '´¶¨™ ¨ß. ß¢û®‡£„™'    to sWhere
                Else If (iFromWhere=4)  Move '´¶ ¨ß¶°ò´·©´û£ò'      to sWhere
                Send Info_Box ("Éû£†¶¨®ö„üû°ò§ ´®Êß¶† ß¢û®‡£„™ òß¶ "+sWhere) "è¢û®¶≠¶®Âò"
            End
            Else Send Info_Box "Éú§ õû£†¶¨®ö„üû°ò§ ò¨´Ê£ò´ò ´®Êß¶† ß¢û®‡£„™\nõ†Ê´† õú§ ‚Æ¶¨§ ¶®†©´úÂ ¶Á´ú ©´¶ ‚®ö¶ ¶Á´ú ©´¶ ßú¢·´û\n ¶Á´ú ©´¶§ ¨ß.ß¢û®‡£û™ ¶Á´ú ©´¶ ¨ß¶°ò´·©´û£ò" ;
                               "è¢û®¶≠¶®Âò"
        End_Procedure


        Procedure OnClick
            String  sRecr sStr sActualLabel sNewLabel sFtiaxneiTpay
            String  sCompany sBranch sWapokat
            Number  nExtra nEkpt nSynolo nPososto
            Integer isClosed iErr iRecnum iStatuspanel iLines iYear

            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr    to sRecr
            Get Field_Current_Value Of Particle_DD Field Particle.Recnum        to iRecnum
            Move (Trim(sRecr)) to sRecr
            If (sRecr<>'') Begin
                Send Beginning_Of_Data to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Particle(Self))))) True
                If Status Pmoves Begin
                    Begin_Transaction
                        Get Field_Current_Value Of Particle_DD Field Particle.Partl_Totambd     to nSynolo
                        Get Field_Current_Value Of Particle_DD Field Particle.Partl_Ekleise     to isClosed
                        Get Field_Current_Value Of Particle_DD Field Particle.Partl_NoOfLines   to iLines
                        Get Field_Current_Value Of Particle_DD Field Particle.Partl_totdiscpc   to nEkpt
                        Get Field_Current_Value Of Particle_DD Field Particle.Partl_extra       to nExtra

                        Get Ftiaxe_Epimerismous sRecr nEkpt nExtra iLines nSynolo isClosed to iErr

                        If (iErr=50999) Begin
                            Send Stop_Box "ìß·®Æú† ò©¨£≠‡§Âò ò§·£ú©ò ©´¶§ ò®†ü£Ê ö®ò££È§ ´¶¨ ßò®ò©´ò´†°¶Á \n°ò† ´¶¨ ß®òö£ò´†°¶Á ò®†ü£¶Á ö®ò££È§ ß¶¨ ¨ß·®Æ¶¨§ ©´†™ °†§„©ú†™" "ë≠·¢£ò"
                            Abort_Transaction
                        End

                        Set psParticleRecr  Of (bpEnCmvs(Self)) to sRecr
                        Set piParticleID    Of (bpEnCmvs(Self)) to (Particle(Self))
                        Set psModule        Of (bpEnCmvs(Self)) to (psModule(Self))
                        Send DoProcess                          to (bpEnCmvs(Self))
                        Get piLathos        Of (bpEnCmvs(Self)) to iErr

                        If (iErr) Abort_Transaction
                    End_Transaction
                End
                Else Move 55560 to iErr
                     If (iErr=50000) Send Stop_Box "No Initial Particle recr is passed"                         "Error 50000"
                Else If (iErr=50001) Send Stop_Box "Initially Passed Particle Recr Not Found"                   "Error 50001"
                Else If (iErr=50002) Send Stop_Box "Error While attempting to Delete Cmoves"                    "Error 50002"
                Else If (iErr=50003) Send Stop_Box "Could not find Cmoves with Particle_Cmoves_Recr"            "Error 50003"
                Else If (iErr=50004) Send Stop_Box "Error While Saving Particle after deletion Cmoves+WcMoves"  "Error 50004"
                Else If (iErr=50005) Send Stop_Box "Client record not found"                                    "Error 50005"
                Else If (iErr=50006) Send Stop_Box "Ctypkin record not found"                                   "Error 50006"
                Else If (iErr=50007) Send Stop_Box "Error While Saving Cmoves"                                  "Error 50007"
                Else If (iErr=50008) Send Stop_Box "Saved Cmoves but dont have Recr"                            "Error 50008"
                Else If (iErr=50009) Send Stop_Box "Error While Saving Particle after Saving Cmoves+Wmoves"     "Error 50009"
                Else If (iErr=50010) Send Stop_Box "Nomisma record not found"                                   "Error 50010"
                Else If (iErr=50011) Send Stop_Box "Client record not found for saving flags"                   "Error 50011"
                Else If (iErr=50012) Send Stop_Box "No Flags found in Cflagkin to process"                      "Error 50012"
                Else If (iErr=50111) Send Stop_Box "Could Not Delete Cmoves to Open Particle"                   "Error 50111"
                Else If (iErr=51000) Send Stop_Box "Found Cmoves Record on Open Particle"                       "Error 51000"
                Else If (iErr=59999) Send Stop_Box "Business Process Called without setting psModule property"  "Error 59999"
                Else If (iErr=60002) Send Stop_Box "Error While attempting to Delete WCmoves"                   "Error 60002"
                Else If (iErr=60003) Send Stop_Box "Could not find WCmoves with Particle_WCmoves_Recr"          "Error 60003"
                Else If (iErr=60006) Send Stop_Box "Wtypkin record not found"                                   "Error 60006"
                Else If (iErr=60007) Send Stop_Box "Error While Saving WCmoves"                                 "Error 60007"
                Else If (iErr=60008) Send Stop_Box "Saved WCmoves but dont have Recr"                           "Error 60008"
                Else If (iErr=60012) Send Stop_Box "No Flags found in Wflagkin to process"                      "Error 60012"
                Else If (iErr=60111) Send Stop_Box "Could Not Delete WCmoves to Open Particle"                  "Error 60111"
                Else If (iErr=60106) Send Stop_Box "Witemx Record Not Found"                                    "Error 60106"
                Else If (iErr=60206) Send Stop_Box "Wax Record Not Found"                                       "Error 60206"
                Else If (iErr=60500) Send Stop_Box "Could Not Update Pmoves with Wcmoves Recr"                  "Error 60500"
                Else If (iErr=61000) Send Stop_Box "Found WCmoves Record on Open Particle"                      "Error 61000"
                Else If (iErr=55555) Send Stop_Box "Error Saving Clients after updating Ypoloipa"               "Error 55555"
                Else If (iErr=55556) Send Stop_Box "Error Saving Clients after updating Hmnies"                 "Error 55556"
                Else If (iErr=55560) Send info_box "Éú§ ¢ú†´¶¨®öúÂ û õ†òõ†°ò©Âò ò¨´„.\nÉú§ ¨ß·®Æú† °ò££Âò ö®ò££„ ©´¶ ßò®ò©´ò´†°Ê" "Error 55560"
                Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                If (Not(iErr)) Begin
                    Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise    to isClosed
                    Get Field_Current_Value Of Ptyppar_DD   Field Ptyppar.Ftiaxnei_Tpay     to sFtiaxneiTpay
                    Send Frontise_Ta_Ekkremh isClosed 0
                    If (Trim(sFtiaxneiTpay)='1') Send Ftiaxe_Tropous_Plhromhs sRecr isClosed iRecnum
                End
            End
            else send info_box "Éú§ ¨ß·®Æú† ´®‚Æ¶§ ßò®ò©´ò´†°Ê. âò££Âò ò¢¢òö„ õú§ ‚ö†§ú" tz.plhroforia

            Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
            Send Activate           to Particle_Partl_Hmnia
            Send Beginning_Of_Data  to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self)))) True
            Move SysCurXr.Company_Code   to sCompany
            Move SysCurXr.Branch_Code    to sBranch
            Move SysCurXr.Year_Year      to iYear

            Set piMustConstrain Of (Wax(Self)) To True
            Set piYear          Of (Wax(Self)) To iYear
            Set psCompany       Of (Wax(Self)) To sCompany
            Set psBranch        Of (Wax(Self)) To sBranch
            Set psWapokat       Of (Wax(Self)) To sWapokat
            Set piYear          Of Wax_DD To iYear
            Set psCompany       Of Wax_DD To sCompany
            Set psBranch        Of Wax_DD To sBranch
            Set psWapokat       Of Wax_DD To ''
            Send Rebuild_Constraints to Wax_DD
        End_Procedure // OnClick









































        //AB-StoreEnd

    End_Object    // btnKleisimo

    Object btnEktyposh is a ButtonSub
        Set Label to "Ñ°´Á&ß‡©û"
        Set Bitmap to "Print17.bmp"
        Set Size to 21 23
        Set Location to 234 2
        Set Focus_Mode to Pointer_Only
        Set Form_FontHeight Item 0 to 12
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set TooltipValue to "Ñ°´Áß‡©û ßò®ò©´ò´†°¶Á"

        Procedure OnClick
            String Wrecr
            Integer iNextNo iRecnum iMsg
            If (Particle.Recnum) Begin
                Move Particle.Recnum to iRecnum
                If (Particle.Partl_No<0) Begin
                    Clear Pseira
                    Move SysCurXr.Company_Code  to Pseira.Company_Code
                    Move SysCurXr.Branch_Code   to Pseira.Branch_Code
                    Move SysCurXr.Year_Year     to Pseira.Year_Year
                    Move Ctypkin.Ctypkin_Code   to Pseira.Ctypkin_Code
                    Move Wtypkin.Wtypkin_Code   to Pseira.Wtypkin_Code
                    Move Ptyppar.Ptyppar_Code   to Pseira.Ptyppar_Code
                    Move Particle.Pseira_Seira  to Pseira.Pseira_Seira
                    Find eq Pseira By Index.1 // Pseira:Index.1:Company_Code+Branch_Code+Year_Year+;
                                              //                Ctypkin_Code+Wtypkin_Code+Ptyppar_Code+Seira_Seira
                    If (Found=1) Begin
                        Reread
                        // Ä§ û ©ú†®ò ú†§ò† autonum °ò† ´¶ ßò®ò©´ò´†°¶ ú†§ò† ´¨ß¶¨ 2 èóäÜëÜ
                        If ((Pseira.Pseira_Autonum=1) And (Ptyppar.Ptyppar_Is_What='2')) Begin
                           Move (Pseira.Autonum_Plus+1) to iNextNo
                           Move (Pseira.Autonum_Plus+1) to Pseira.Autonum_Plus
                           Saverecord Pseira
                           Move iNextNo to Particle.Partl_No
                           Saverecord Particle
                           Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                        End
                        Unlock
                    End
                    reread particle
                    Move '1' to Particle.Partl_Ektyposh
                    Saverecord Particle
                    unlock
                    Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
                    Get Field_Current_Value Of (Particle_DD(Self)) Field Particle.Partl_Recr to Wrecr
                    Set psRecr Of (Timologio_BasicReport(Rmhtrb(Self))) to Wrecr
                    Send StartReport to Rmhtrb
                    //******
                End
                Else Begin
                    if (particle.partl_no=0) send info_box "Éú§ £ß¶®úÂ §ò ´¨ß‡üúÂ ßò®ò©´ò´†°Ê £ú ò®†ü£Ê 0" tz.plhroforia
                    Else If (Particle.Partl_No>0) Begin
                        get message_box "í¶ ßò®ò©´ò´†°Ê ‚Æú† „õû ú°´¨ß‡üúÂ.\ná‚¢ú´ú §ò °·§ú´ú úßò§ú°´Áß‡©û ?" tz.epibebaiosh;
                            MB_OKCANCEL (MB_ICONQUESTION IOR MB_DEFBUTTON2) to iMsg  // 1=ok 2=cancel
                        If (iMsg=1) Begin
                            Get Field_Current_Value Of (Particle_DD(Self)) Field Particle.Partl_Recr to Wrecr
                            Set psRecr Of (Timologio_BasicReport(Rmhtrb(Self))) to Wrecr
                            Send StartReport to Rmhtrb
                        End
                    End
                End
            End
            else send info_box "Éú§ ¨ß·®Æú† ßò®ò©´ò´†°Ê ö†ò ú°´Áß‡©û" tz.plhroforia
            Send Rebuild_Constraints to Pmoves_DD
            Send Rebuild_Constraints to Psxetika_DD
            Send Beginning_Of_Data to (Pmoves_  (dbTabPageSubS1(dbTabDialogSubS1(Self))))  True
            Send Beginning_Of_Data to (Psxetika_(dbTabPageSubS2(dbTabDialogSubS1(Self))))  True
        End_Procedure // OnClick


















        //AB-StoreEnd

    End_Object    // btnEktyposh

    Object Payam is a dbFormSub
        Entry_Item Particle.Partl_payam
        Set Size to 13 71
        Set Location to 261 449
        Set Color to clNavy
        Set TextColor to clAqua
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_TypeFace Item 0 to "MS Sans Serif"
        Set Form_Mask Item 0 to "###,###,###,###.######"

        //AB-StoreStart

        Set Shadow_State    to True
        Set Enabled_State   to False

        Set Color           to clNavy
        Set TextColor       to clAqua













        //AB-StoreEnd

    End_Object    // Payam

    Object Totambd is a dbFormSub
        Entry_Item Particle.Partl_totambd
        Set Size to 13 60
        Set Location to 227 222
        Set Color to clNavy
        Set TextColor to clLtGray
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_Mask Item 0 to "###,###,###,###.######"

        //AB-StoreStart

        Set Shadow_State    to True
        Set Enabled_State   to False

        //Set Color           to 15000804

        Set Color           to clNavy
        Set TextColor       to clLtGray




        //AB-StoreEnd

    End_Object    // Totambd

    Object Totdiscpc is a dbFormSub
        Entry_Item Particle.Partl_amdiscpms
        Set Size to 13 60
        Set Location to 242 222
        Set Color to clNavy
        Set TextColor to clLtGray
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_Mask Item 0 to "###,###,###,###.######"

        //AB-StoreStart

        Set Shadow_State    to True
        Set Enabled_State   to False

        Set Color           to clNavy
        Set TextColor       to clLtGray

        //Procedure OnChange
        //    If (Focus(Desktop)=TotDiscPc(Self)) Begin
        //        Send Enhm_Particle_Amounts
        //    End
        //End_Procedure

        //Procedure Request_Clear
        //    Delegate Send Request_Clear
        //End_procedure

        //Procedure Request_Clear_All
        //    Delegate Send Request_Clear_All
        //End_procedure


        //AB-StoreEnd

    End_Object    // Totdiscpc

    Object GenFpa is a dbFormSub
        Entry_Item Particle.Partl_vatam
        Set Size to 13 66
        Set Location to 261 290
        Set Color to clNavy
        Set TextColor to clAqua
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_Mask Item 0 to "###,###,###,###.######"

        //AB-StoreStart
        Set Shadow_State    to True
        Set Enabled_State   to False

        Procedure OnChange
            If (Focus(Desktop)=Extra(Self)) Begin
                Send Enhm_Particle_Amounts
            End
        End_Procedure

        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        Set Color           to clNavy
        Set TextColor       to clAqua



        //AB-StoreEnd

    End_Object    // GenFpa

    Object TextBoxSub1 is a TextBoxSub
        Set Label to "âòüò®„ ò•Âò"
        Set Location to 229 173
        Set Size to 10 45
    End_Object    // TextBoxSub1

    Object TextBoxSub3 is a TextBoxSub
        Set Label to "Ñ°ß´‡©û"
        Set Location to 244 173
        Set Size to 10 34
    End_Object    // TextBoxSub3

    Object TextBoxSub6 is a TextBoxSub
        Set Label to "è¢û®‡´‚¶"
        Set TextColor to clPurple
        Set Location to 214 448
        Set Size to 10 34
        Set FontWeight to 600
        Set Justification_Mode to jMode_Left
    End_Object    // TextBoxSub6

    Object BtnAnalysh is a ButtonSub

        //AB-StoreTopStart


        //AB-StoreTopEnd

        Set Label to "Ä§·¢¨©û îèÄ"
        Set Bitmap to "AnalFpa2.bmp"
        Set Size to 21 25
        Set Location to 255 141
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "Ä§·¢¨©û îèÄ ´¶¨ ßò®©´ò´†°¶Á ò§ò ©¨§´ú¢ú©´„"

        Procedure OnClick
        //    If (piNoChangesAllowed(Particle_DD(Self))<>1) Begin
        //        If (Should_Save(Particle_DD(Self))) Send Request_Save to Particle_DD
        //    End
        //    If (piNoChangesAllowed(Pmoves_DD(Self))<>1) Begin
        //        If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
        //    End
            Send Activate_PartlFpa
        End_Procedure // OnClick







        //AB-StoreEnd

    End_Object    // BtnAnalysh

    Object btnExodos is a ButtonSub
        Set Label to "ButtonSub2"
        Set Bitmap to "exit_m.bmp"
        Set Size to 21 23
        Set Location to 255 2
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "Ñ•¶õ¶™ òß¶ ´¶ ßò®ò©´ò´†°Ê"

        Procedure OnClick
            Send Request_Cancel //Close_Panel
        End_Procedure // OnClick



        //AB-StoreEnd

    End_Object    // btnExodos

    Object Textbox1 is a Textbox
        Set Label to "èò®ò©´ò´†°Ê"
        Set Location to 2 8
        Set Size to 10 48
    End_Object    // Textbox1

    Object Textbox3 is a Textbox
        Set Label to "Ü£-§Âò"
        Set Location to 17 8
        Set Size to 10 25
    End_Object    // Textbox3

    Object Textbox4 is a Textbox
        Set Label to "ë¨§ò¢/§¶™"
        Set Location to 33 8
        Set Size to 10 41
    End_Object    // Textbox4

    Object Textbox5 is a Textbox
        Set Label to "Ñ®ö¶/ìß¶°ò´"
        Set Location to 48 8
        Set Size to 10 49
    End_Object    // Textbox5

    Object Textbox6 is a Textbox
        Set Label to "åÊ£†©£ò"
        Set Location to 95 8
        Set Size to 10 32
    End_Object    // Textbox6

    Object TextBoxSub8 is a TextBoxSub
        Set Label to "ëú†®ò"
        Set Location to 19 191
        Set Size to 10 20
    End_Object    // TextBoxSub8

    Object TextBoxSub11 is a TextBoxSub
        Set Label to "Ä®†ü£Ê™"
        Set Location to 19 317
        Set Size to 10 29
    End_Object    // TextBoxSub11

    Object txtRecr is a TextBoxSub
        Set Label to "Recr"
        Set Location to 6 454
        Set Size to 10 17

        //AB-StoreStart

        // Ñ§ú®ö¶ß¶†ú†´ò† £ú Alt+R
        Set Visible_State To False



        //AB-StoreEnd

    End_Object    // txtRecr

    Object BtnMetasxhmatismos is a ButtonSub
        Set Label to "ãú´ò©Æû£ò´†©£Ê™"
        Set Bitmap to "Auto.bmp"
        Set Size to 21 23
        Set Location to 213 55
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "ãú´ò©Æû£ò´†©£Ê™ ´¶¨ ´®‚Æ¶§´¶™ ßò®ò©´ò´†°¶Á ©ú ·¢¢¶"

        Procedure OnClick
            String sRecr sID
            Integer iReadOnly iRecnum iChangedTheFlag isTimol
            Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Recr   to sRecr
            Get Field_Current_Value of Clients_DD   Field Clients.Client_ID     to sID

            Send Beginning_Of_Data to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self)))) True

            If Status Pmoves Begin

                If ((sRecr<>'') And (sID<>'')) Begin

                    Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Timol to isTimol

                    If (isTimol) Begin
                        Send Info_Box "í¶ ßò®ò©´ò´†°Ê ‚Æú† ûõû £ú´ò©Æû£ò´†©´úÂ \nÉú§ úß†´®‚ßú´ò† §‚¶™ £ú´ò©Æû£ò´†©£Ê™ ´¶¨" "è¢û®¶≠¶®Âò"
                        Procedure_Return
                    End

                    Move 0 to iChangedTheFlag

                    If (piNoChangesAllowed(Particle_DD(Self))=1) Begin
                        Move 1 to iChangedTheFlag
                        Set piNoChangesAllowed Of (Particle_DD(Self)) to 0
                    End

                    Set Field_Changed_Value Of Particle_DD  Field Particle.Partl_Selected to '1'
                    Send Request_Save to Particle_DD

                    If (iChangedTheFlag=1) Set piNoChangesAllowed Of (Particle_DD(Self)) to 1

                    Set piMustNOTConstrain  Of v014 to 1
                    Set psClientID          Of v014 to sID
                    Set psParticleRecr      Of v014 to sRecr
                    Send activate_v014

                End

            End
            Else Send Info_Box "Éú§ ¨ß·®Æú† úöö®ò≠„ ©´û§ ö®ò££„ ´¶¨ ßò®ò©´ò´†°¶Á" "è¢û®¶≠¶®Âò"
        End_Procedure // OnClick




















        //AB-StoreEnd

    End_Object    // BtnMetasxhmatismos

    Object Textbox7 is a Textbox
        Set Label to "Textbox7"
        Set Location to 416 -5844
        Set Size to 10 31
    End_Object    // Textbox7

    Object TextBoxSub13 is a TextBoxSub
        Set Label to "Euro"
        Set Location to 95 371
        Set Size to 10 16
    End_Object    // TextBoxSub13

    Object btnTP is a ButtonSub
        Set Label to "ButtonSub2"
        Set Bitmap to "VisaCard.bmp"
        Set Size to 21 23
        Set Location to 213 29
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "É†òÆúÂ®†©û ´®Êß‡§ ß¢û®‡£„™ ßò®ò©´ò´†°¶Á"

        Procedure OnClick
            String sRecr
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
            Set psParticleRecr Of (TParticl(self)) to sRecr
            If (Trim(sRecr)<>'') Send Activate_TPArticl
        End_Procedure // OnClick






        //AB-StoreEnd

    End_Object    // btnTP

    Object TextBoxSub14 is a TextBoxSub
        Set Label to "è®¶ îèÄ"
        Set Color to clNavy
        Set TextColor to clYellow
        Set Location to 263 173
        Set Size to 10 33
        Set FontWeight to 600
    End_Object    // TextBoxSub14

    Object ProFPA is a dbFormSub
        Entry_Item Particle.Partl_totamad
        Set Size to 13 60
        Set Location to 261 222
        Set Color to clNavy
        Set TextColor to clAqua
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Form_Mask Item 0 to "###,###,###,###.######"

        //AB-StoreStart
        Set Shadow_State    to True
        Set Enabled_State   to False

        Procedure OnChange
            If (Focus(Desktop)=Extra(Self)) Begin
                Send Enhm_Particle_Amounts
            End
        End_Procedure

        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure

        Set Color           to clNavy
        Set TextColor       to clAqua

        Procedure Request_Clear
            Delegate Send Request_Clear
        End_procedure

        Procedure Request_Clear_All
            Delegate Send Request_Clear_All
        End_procedure



        //AB-StoreEnd

    End_Object    // ProFPA

    Object btnPreview is a ButtonSub

        //AB-StoreTopStart

        //AB-StoreTopEnd

        Set Label to "Ñ°´Á&ß‡©û"
        Set Bitmap to "Monitor1.bmp"
        Set Size to 21 23
        Set Location to 234 28
        Set Focus_Mode to Pointer_Only
        Set Form_FontHeight Item 0 to 12
        Set Form_FontWeight Item 0 to 600
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart

        Set TooltipValue to "è®¶úß†©°Êß†©û ßò®ò©´ò´†°¶Á"

        Procedure OnClick
            Integer iRecnum
            String wRecr
            Get Field_Current_Value Of Particle_DD Field Particle.Recnum        to iRecnum
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr    to Wrecr
            If (iRecnum) Begin
                Set psRecr Of (Timologio_BasicReport(Rmhtrb(Self))) to Wrecr
                Set Output_Device_Mode Of (Timologio_BasicReport(Rmhtrb(Self))) to Print_To_Window
                Send StartReport to Rmhtrb
            End
        End_Procedure // OnClick




















        //AB-StoreEnd

    End_Object    // btnPreview

    Object TextBoxSub15 is a TextBoxSub
        Set Label to "Euro"
        Set Color to clTeal
        Set TextColor to clYellow
        Set Location to 247 422
        Set Size to 10 21
        Set FontWeight to 600
        Set Justification_Mode to jMode_Center
    End_Object    // TextBoxSub15

    Object TextBoxSub16 is a TextBoxSub
        Set Label to "É®Æ"
        Set Color to clNavy
        Set TextColor to clYellow
        Set Location to 263 422
        Set Size to 10 21
        Set FontWeight to 600
        Set Justification_Mode to jMode_Center

        //AB-StoreStart

        Set Label to SysCurXr.C_Code0

        //AB-StoreEnd

    End_Object    // TextBoxSub16

    Object frmEuro0 is a FormSub
        Set Size to 13 71
        Set Location to 246 449
        Set Color to clTeal
        Set TextColor to clWhite
        Set Label_Col_Offset to 2

        //AB-StoreStart

        Set Numeric_Mask Item 0 to 14 2 ' ,*'

        Set Shadow_State    to True
        Set Enabled_State   to False
        Set Color           to clTeal
        Set TextColor       to clWhite





        //AB-StoreEnd

    End_Object    // frmEuro0

    Object TextBoxSub17 is a TextBoxSub
        Set Label to "ó®ò"
        Set Location to 18 132
        Set Size to 12 16
    End_Object    // TextBoxSub17

    Object TextBoxSub18 is a TextBoxSub
        Set Label to "à©¶´†£Âò"
        Set Location to 97 192
        Set Size to 10 28
    End_Object    // TextBoxSub18

    Object TextBoxSub19 is a TextBoxSub
        Set Label to "í®Êß¶™ Äß¶©´"
        Set Location to 64 8
        Set Size to 10 48
    End_Object    // TextBoxSub19

    Object TextBoxSub20 is a TextBoxSub
        Set Label to "ë°¶ßÊ™"
        Set Location to 64 371
        Set Size to 10 25
    End_Object    // TextBoxSub20

    Object TextBoxSub21 is a TextBoxSub
        Set Label to "íÊß¶™"
        Set Location to 66 191
        Set Size to 10 21
    End_Object    // TextBoxSub21

    Object FormSub2 is a FormSub
        Set Size to 7 9
        Set Location to 51 191
        Set Label_Col_Offset to 2
        Set Form_TypeFace Item 0 to "MS Sans Serif"

        //AB-StoreStart
        Set Shadow_State    to True
        Set Enabled_State   to False
        Set Color           to clLime


        //AB-StoreEnd

    End_Object    // FormSub2

    Object TextBoxSub22 is a TextBoxSub
        Set Label to "éÆû£ò"
        Set Location to 81 11
        Set Size to 10 23
    End_Object    // TextBoxSub22

    Object TextBoxSub23 is a TextBoxSub
        Set Label to "éõûöÊ™"
        Set Location to 81 192
        Set Size to 10 26
    End_Object    // TextBoxSub23

    Object TextBoxSub24 is a TextBoxSub
        Set Label to "Ä§´¢Âò"
        Set Location to 81 372
        Set Size to 10 24
    End_Object    // TextBoxSub24

    Object TextBoxSub27 is a TextBoxSub
        Set Label to "îèÄ ëÁ§¶¢¶"
        Set Color to clNavy
        Set TextColor to clYellow
        Set Location to 263 361
        Set Size to 10 45
        Set FontWeight to 600
    End_Object    // TextBoxSub27

    Object btnPelath is a ButtonSub
        Set Label to "ButtonSub1"
        Set Bitmap to "CardFile.bmp"
        Set Size to 21 23
        Set Location to 255 55
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "Ñ£≠·§†©û âÂ§û©û™ èú¢·´û / è®¶£ûüú¨´„"

        Procedure OnClick
            String  sMovesRecr sClientRecr
            Integer iEkleise

            Get Field_Current_Value Of Particle_DD  Field Particle.Cmoves_Recr  to sMovesRecr
            Get Field_Current_Value Of Clients_DD   Field Clients.Client_Recr   to sClientRecr
            Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise  to iEkleise

            Move (Trim(sMovesRecr))     to sMovesRecr
            Move (Trim(sClientRecr))    to sClientRecr

            If ((sMovesRecr<>'') And (sClientRecr<>'')) Begin
                If (Not(iEkleise)) Begin
                    Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† ò§¶†Æ´Ê.\nÉú§ ¨ß·®Æú† °Â§û©û ©´¶Á™ ßú¢·´ú™" "è¢û®¶≠¶®Âò"
                    Procedure_Return
                End
                Set psFindMovesRecr     Of (vwCmoves(Self)) to sMovesRecr
                Set psFindClientRecr    Of (vwCmoves(Self)) to sClientRecr
                Set piFromParticl       Of (vwCmoves(Self)) to True
                Send Activate_vwCmoves
            End
            Else Begin
                If (sMovesRecr<>'') Begin
                    Send Info_Box "í¶ ßò®ò©´ò´†°Ê ÉÑå ‚Æú† °·§ú† úöö®ò≠„\n©´¶ °Á°¢‡£ò ßú¢ò´È§" "è¢û®¶≠¶®Âò"
                End
                Else Begin
                    If (sClientRecr<>'') Begin
                        Send Info_Box "Éú§ ¨ß·®Æú† ©‡©´Ê™ °‡õ†°Ê™ ßú¢·´û" "è¢û®¶≠¶®Âò"
                    End
                End
            End
        End_Procedure // OnClick








        //AB-StoreEnd

    End_Object    // btnPelath

    Object btnApothikh is a ButtonSub
        Set Label to "ButtonSub1"
        Set Bitmap to "Apothik.bmp"
        Set Size to 21 23
        Set Location to 255 29
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "Ñ£≠·§†©û âÂ§û©û™ Äß¶ü„°û™"

        Procedure OnClick
            String  sMovesRecr sItemRecr
            Integer iEkleise


            Get Field_Current_Value Of Pmoves_DD    Field Pmoves.Wcmoves_Recr   to sMovesRecr
            Get Field_Current_Value Of Witemx_DD    Field Witemx.Witemx_Recr    to sItemRecr
            Move (Trim(sMovesRecr)) to sMovesRecr
            Move (Trim(sItemRecr))  to sItemRecr

            Send Beginning_Of_Data to (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self)))) True

            If ((sMovesRecr<>'') And (sItemRecr<>'')) Begin
                Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Ekleise  to iEkleise
                If (Not(iEkleise)) Begin
                    Send Info_Box "í¶ ßò®ò©´ò´†°Ê úÂ§ò† ò§¶†Æ´Ê.\nÉú§ ¨ß·®Æú† °Â§û©û ©´û§ òß¶ü„°û" "è¢û®¶≠¶®Âò"
                    Procedure_Return
                End
                Set psFindMovesRecr     Of (KinApoth(Self)) to sMovesRecr
                Set psFindItemRecr      Of (KinApoth(Self)) to sItemRecr
                Set piFromParticl       Of (KinApoth(Self)) to True
                Send Activate_KinApoth
            End
            Else Begin
                If (sMovesRecr<>'') Begin
                    Send Info_Box "Ü °Â§û©û ò¨´„ ÉÑå ‚Æú† °·§ú† úöö®ò≠„\n©´¶ °Á°¢‡£ò ´û™ òß¶ü„°û™" "è¢û®¶≠¶®Âò"
                End
                Else Begin
                    If (sItemRecr<>'') Begin
                        Send Info_Box "Éú§ ¨ß·®Æú† ´¶ úÂõ¶™ ©´û§ °Â§û©û ò¨´„" "è¢û®¶≠¶®Âò"
                    End
                End
            End
        End_Procedure // OnClick



        //AB-StoreEnd

    End_Object    // btnApothikh

    Object Particle_Tropos_Plhromhs is a dbComboFormSub
        Entry_Item Particle.Tropos_plhromhs
        Set Size to 13 98
        Set Location to 227 422
        Set Label_Col_Offset to 2
        Set Label_Justification_Mode to jMode_Right
        Set Combo_Sort_State to FALSE

        //AB-StoreStart

        Set Entry_State Item 0      to False
        Set Allow_Blank_State       to False
        Set Allow_Undefined_State   to False




        //AB-StoreEnd

    End_Object    // Particle_Tropos_Plhromhs

    Object btnSxetika is a ButtonSub
        Set Label to "ButtonSub1"
        Set Bitmap to "Sxetika.bmp"
        Set Size to 21 23
        Set Location to 234 55
        Set Focus_Mode to Pointer_Only

        //AB-StoreStart

        Set TooltipValue to "Ñ£≠·§†©û ©´¶†ÆúÂ‡§ ©Æú´†°¶Á ßò®ò©´ò´†°¶Á ß¶¨ õû£†¶¨®ö„üû°ú òß¶ ò¨´Ê"

        Procedure OnClick
            String sRecr
            If (piNoChangesAllowed(Particle_DD(Self))<>1) Begin
                If (Should_Save(Particle_DD(Self))) Send Request_Save to Particle_DD
            End
            If (piNoChangesAllowed(Pmoves_DD(Self))<>1) Begin
                If (Should_Save(Pmoves_DD(Self))) Send Request_Save to Pmoves_DD
            End
            Get Field_Current_Value Of Particle_DD Field Particle.Partl_Recr to sRecr
            Move (Trim(sRecr)) to sRecr
            If (sRecr<>'') Begin
                Send Clear to Psxetika_DD2
                Move sRecr to Psxetika.Psx_Partl_Recr
                Send Find to Psxetika_DD2 Gt 3 // Psx_Partl_Recr+Partl_Recr
                If ((Found=1) And (Psxetika.Psx_Partl_Recr=sRecr)) Begin
                    Get Field_Current_value Of Psxetika_DD2 Field Psxetika.Partl_Recr to sRecr
                    Set psArticleRecr Of (ShowSx(Self)) to sRecr
                    Send Activate_ShowSx
                End
                Else Send Info_Box "Éú§ ¨ß·®Æú† ©Æú´†°Ê ßò®ò©´ò´†°Ê\nß¶¨ §ò õû£†¶¨®ö„üû°ú òß¶ ´¶ ´®‚Æ¶§" "è¢û®¶≠¶®Âò"
            End
        End_Procedure // OnClick








        //AB-StoreEnd

    End_Object    // btnSxetika


    //AB-StoreStart

    On_Key Key_Alt+Key_r    Send Show_Recr
    On_Key KCancel          Send Next


    //On_Key Key_Alt+Key_o    Send Check_If_Can_Force_Open


    //Procedure Check_If_Can_Force_Open
    //    Integer iCanOpen iRecn iLockMe
    //    Move Sysfile.Can_Force_Open to iCanOpen

    //    If (iCanOpen) Begin

    //        Set Enabled_State   Of BtnEktyposh  to True
    //        Set Enabled_State   Of BtnKleisimo  to True

    //        Move Particle.Recnum                to irecn

    //        Set Read_Only_State Of Particle_DD  to (Particle.Partl_Ekleise='1')
    //        Set Read_Only_State Of Pmoves_DD    to (Particle.Partl_Ekleise='1')
    //        Set Enabled_State   Of BtnEktyposh  to (Particle.Partl_Ekleise='1')
    //        Set Enabled_State   Of BtnKleisimo  to True

    //        If (Particle.Partl_Ekleise='1') Begin
    //            Set Color Of frmIsClosed to clRed
    //            set label of btnkleisimo to 'Ä§¶†ö£ò'
    //            Set Bitmap  Of BtnKleisimo to 'Open1.bmp'
    //        End
    //        Else Begin
    //            Set Color Of frmIsClosed to clLime
    //            set label of btnkleisimo to "â¢úÂ©†£¶"
    //            Set Bitmap  Of BtnKleisimo to 'Close1.bmp'
    //        End
    //    End
    //    Else Begin
    //        Set Enabled_State   Of BtnEktyposh  to True
    //        Set Enabled_State   Of BtnKleisimo  to True

    //        Move (Particle.Partl_Ektyposh='1')  to iLockMe
    //        Move Particle.Recnum                to irecn

    //        If (iLockMe) Begin
    //            Set Read_Only_State Of Particle_DD  to True
    //            Set Read_Only_State Of Pmoves_DD    to True
    //            If (Particle.Partl_Ekleise='1') Begin
    //                Set Label   Of BtnKleisimo to 'Ä§¶†ö£ò'
    //                Set Bitmap  Of BtnKleisimo to 'Open1.bmp'
    //            End
    //            else Begin
    //                set label   of btnkleisimo to "â¢úÂ©†£¶"
    //                Set Bitmap  Of BtnKleisimo to 'Close1.bmp'
    //            End
    //            Set Enabled_State                           Of BtnKleisimo to False
    //            Set Color                                   Of frmIsClosed to clRed
    //        End
    //        Else Begin
    //            Set Read_Only_State Of Particle_DD  to (Particle.Partl_Ekleise='1')
    //            Set Read_Only_State Of Pmoves_DD    to (Particle.Partl_Ekleise='1')
    //            Set Enabled_State   Of BtnEktyposh  to (Particle.Partl_Ekleise='1')
    //            Set Enabled_State   Of BtnKleisimo  to True
    //            If (Particle.Partl_Ekleise='1') Begin
    //                Set Color Of frmIsClosed to clRed
    //                set label of btnkleisimo to 'Ä§¶†ö£ò'
    //                Set Bitmap  Of BtnKleisimo to 'Open1.bmp'
    //            End
    //            Else Begin
    //                Set Color Of frmIsClosed to clLime
    //                set label of btnkleisimo to "â¢úÂ©†£¶"
    //                Set Bitmap  Of BtnKleisimo to 'Close1.bmp'
    //            End
    //        End
    //    End
    //    Send Show_CN
    //    Send Show_Seira
    //    Send Kleise_Ta_Pedia
    //    Send Rebuild_Constraints to Pmoves_DD
    //    Send Rebuild_Constraints to Psxetika_DD
    //    Send Find to Pmoves_DD      First_Record 1
    //    Send Find to Psxetika_DD    First_Record 1
    //    Send Find_The_Rate
    //End_Procedure

    Procedure Show_Recr
        Integer iState
        Get Visible_State Of Particle_Partl_Recr to iState
        Set Visible_State Of Particle_Partl_Recr to (1-iState)
        Set Enabled_State Of Particle_Partl_Recr to (1-iState)
        Set Visible_State Of TxtRecr             to (1-iState)
    End_procedure

    Procedure Request_Clear
        Forward Send Request_Clear
        Send Delete_Data to Particle_Pseira_Seira
        Send Clear to Clients_DD //////CN_DD
        Send Rebuild_Constraints to Pmoves_DD
        Send Rebuild_Constraints to Psxetika_DD
        Send Beginning_Of_Data to (Pmoves_  (dbTabPageSubS1(dbTabDialogSubS1(Self))))  True
        Send Beginning_Of_Data to (Psxetika_(dbTabPageSubS2(dbTabDialogSubS1(Self))))  True
    End_procedure

    Procedure Request_Clear_All
        Forward Send Request_Clear_All
        Send Delete_Data to Particle_Pseira_Seira
        Send Clear to Clients_DD ////CN_DD
        Send Rebuild_Constraints to Pmoves_DD
        Send Rebuild_Constraints to Psxetika_DD
        Send Beginning_Of_Data to (Pmoves_  (dbTabPageSubS1(dbTabDialogSubS1(Self))))  True
        Send Beginning_Of_Data to (Psxetika_(dbTabPageSubS2(dbTabDialogSubS1(Self))))  True
    End_procedure


    Procedure Activate_View Returns Integer
        String  sStr sModule sDescr sRecr
        Integer rVal iRecnum

        Move '' to sStr
        move (append(sstr, tz.timologhsh                   +'        ' +;
                           (Trim(SyscurXr.Company_Name))   +' - '      +;
                           (Trim(SyscurXr.Branch_Name))    +' - '      +;
                           (Trim(SyscurXr.Year_Descr)))) to sStr
        Set Label Of Particle to sStr

        Get psMenuModule  Of Main_Menu  to sModule
        If (psFindParticleRecr(Self)='') Set psModule to sModule

        Get gsfCode_Mast "MODULE" sModule to sDescr
        Move (Trim(sDescr)) to sDescr

        Send Clear to Particle_DD

        // â‡õ†°ò™ ß¶¨ ò≠¶®ò ´¶ constrain ´‡§ ©´¶†Æú†‡§ ´¶¨ view ¶ß‡™ ßò®ò©´ò´†°·
        // û °†§„©ú†™ ß¶¨ èêÑèÑà §ò úÂ§ò† constrain ò§ò¢¶öò £ú ´¶ °Á°¢‡£ò òß¶
        // ´¶ ¶ß¶†¶ °ò¢úÂ´ò† ´¶ view. è.ï. ò§ °¢ûüúÂ òß¶ è‡¢„©ú†™/èú¢·´ú™ §ò £û§
        // ≠òÂ§¶§´ò† ©´ò ßò®ò©´ò´†°· ´ò ctypkin Äö¶®È§ °¢ß....
        Case Begin
            Case (psModule(Self)='01') // è‡¢„©ú†™ / èú¢·´ú™
                Send Rebuild_Constraints to Ptyppar_DD
                set label of particle to "è‡¢„©ú†™ - â†§„©ú†™    "
              Case Break
            Case (psModule(Self)='02') // è®¶£ûüú¨´‚™ / Äö¶®‚™
                Send Rebuild_Constraints to Ptyppar_DD
                set label of particle to "Äö¶®‚™ - â†§„©ú†™    "
              Case Break
        Case End

        If (psFindParticleRecr(Self)<>'') Begin
            Get psFindParticleRecr  to sRecr
            Move (Trim(sRecr))      to sRecr
            If (sRecr<>'') Begin
                Clear Particle
                Move sRecr to Particle.Partl_Recr
                Find eq Particle By Index.2   // Particle:Index.2:Partl_Recr
                Move Particle.Recnum to iRecnum
                If (iRecnum) Send Find_By_Recnum to Particle_DD Particle.File_Number iRecnum
            End
            Set psFindParticleRecr to ''
        End

        Send Rebuild_Constraints to Particle_DD
        Send Rebuild_Constraints to Pmoves_DD
        Send Rebuild_Constraints to Psxetika_DD
        Send Find to Pmoves_DD      First_Record 1
        Send Find to Psxetika_DD    First_Record 1
        Send Find_The_Rate
        Send Kleise_Ta_Pedia
        Forward Get Msg_Activate_View to rVal
        Procedure_Return rVal
    End_Procedure

    Procedure Activate000000000000
        Forward Send Activate
        If (piFromTparticl(Self)=1) Begin
            Set piFromTparticl to False
            If (psFindParticleRecr(Self)<>'') Begin
                Clear Particle
                Move (psFindParticleRecr(Self)) to Particle.Partl_Recr
                Find eq Particle By Index.2   // Particle:Index.2:Partl_Recr
                If (Found=1) Begin
                    Send Find to Particle_DD eq 2 // Particle:Index.2:Partl_Recr
                End
            End
        End
    End_Procedure

    Procedure Close_Panel
        Set psFindParticleRecr to ''
        Forward Send Close_Panel
    End_Procedure

    Procedure Find_The_Rate
        String  sCode sWhat
        Integer iRateID
        Number nEuro nIsot nRate
        Date dHmnia
        Get Field_Current_Value Of Nomisma_DD   Field Nomisma.Nomisma_Code to sCode
        If (sCode='') Begin
            Move 'GRD' to sCode
            Clear Nomisma
            Move sCode to Nomisma.Nomisma_Code
            Find Eq Nomisma By Index.1
            If (Found) Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
        End
        Get Field_Current_Value Of Particle_DD  Field Particle.Partl_Hmnia to dHmnia
        Get Field_Current_Value Of Particle_DD  Field Particle.Isotimia    to nIsot
        If (nIsot=0) Begin
            If (dHmnia='') Sysdate dHmnia
            Move (Trim(sCode)) to sCode
            Clear Isotimia
            Move sCode      to Isotimia.Nomisma_Code
            Move (dHmnia+1) to Isotimia.Isotimia_Hmnia
            Find lt Isotimia by Index.1 // Isotimia:Index.1:Nomisma_Code+Isotimia_Hmnia

            Clear Nomisma
            Move sCode to Nomisma.Nomisma_Code
            Find eq Nomisma By Index.1 // Nomisma:Index.1:Nomisma_Code

            If (Nomisma.Einai_Drx) Begin
                Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                Set Value Of frmIsotimia    to 1
                Set Value Of frmEuro        to Isotimia.Isotimia_Euro
            End
            Else Begin
                If (Nomisma.Einai_Drx) Begin
                    Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                    Set Value Of frmIsotimia    to 1
                    Set Value Of frmEuro        to Isotimia.Isotimia_Euro
                End
                Case Begin
                    case (isotimia.poia_metatrepei=tz.a) // agora ellhniko
                        Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Agora
                        Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Agora
                        Case Break
                    case (isotimia.poia_metatrepei=tz.p) // polhsh ellhniko
                        Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Polhsh
                        Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Polhsh
                        Case Break
                    Case (Isotimia.Poia_Metatrepei='F') // Fixing Ellhniko
                        Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Fixing
                        Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Fixing
                        Case Break
                    Case (Isotimia.Poia_Metatrepei='P') // Private Ellhniko
                        Set Field_Current_Value Of Particle_DD Field Particle.Isotimia  to Isotimia.Isotimia_Privat
                        Set Value Of frmIsotimia                                        to Isotimia.Isotimia_Privat
                        Case Break
                Case End
                Set Value Of frmEuro        to Isotimia.Isotimia_Euro
            End
        End
        Else Begin
            If (dHmnia='') Sysdate dHmnia
            Move (Trim(sCode)) to sCode
            If (Nomisma.Einai_Drx) Begin
                Set Field_Current_Value Of Particle_DD Field Particle.Isotimia to 1
                Set Value Of frmIsotimia    to 1
                Set Value Of frmEuro        to Isotimia.Isotimia_Euro
            End
        End
        Set Shadow_State Of Particle_ISotimia to (Nomisma.Einai_DRX='1')
        Send Set_The_Decimal_Points
    End_Procedure

    Procedure Set_The_Decimal_Points
        Integer iGridID iAmount iBreak iPmovesID
        String  sCode sOld sCodeApo sCodeEos sRecr
        Number  nPoso nPosoEuro nIsotimia
        Date    dHmnia

        Move Nomisma.Nomisma_Code   to sCodeApo
        Move Nomisma.KL_ISOT_EURO   to nIsotimia
        Move Particle.PARTL_PAYAM   to nPoso
        Move SysCurXr.Euro_Code     to sCodeEos
        Move Particle.Partl_Hmnia   to dHmnia
        Move Particle.Partl_Recr    to sRecr
        Set  psPartlRecr            to sRecr

        If (Current_Record(Particle_DD(Particle(Self)))) Begin
            If ((Trim(sCodeApo)<>'')    And (nIsotimia     <> 0)    And ;
                (nPoso         <> 0)    And (Trim(sCodeEos)<>'')    And ;
                (dHmnia        <>'')) Begin
                    Get fngConvertPoso sCodeApo nPoso sCodeEos dHmnia nIsotimia to nPosoEuro
                    If (nPosoEuro<>0) Set Value Of frmEuro0 Item 0 to nPosoEuro
                    //to Particle.Partl_Euro
                    Clear Nomisma
                    Move sCodeApo to Nomisma.Nomisma_Code
                    Find Eq Nomisma By Index.1
                    Send Find_By_Recnum to Nomisma_DD Nomisma.File_Number Nomisma.Recnum
            End
            Else Set Value Of frmEuro0 Item 0 to 0
        End
        Else Set Value Of frmEuro0 Item 0 to 0

        Get Field_Current_Value Of Nomisma_DD Field Nomisma.Nomisma_Code to sCode
        Get psOldNomismaCode to sOld
        Move (Trim(sCode))  to sCode
        Move (Trim(sOld))   to sOld

        If (sCode<>sOld) Begin
            Set psOldNomismaCode to sCode
            Move (Pmoves_(dbTabPageSubS1(dbTabDialogSubS1(Self)))) to iGridID
            Clear Nomisma
            Move sCode to Nomisma.Nomisma_Code
            Find eq Nomisma by Index.1
            Set Dynamic_Update_State Of iGridID to False
            Set Visible_State Of iGridID to False

            // ëú´ò®†©£ò õú°òõ†°È§ ö†ò ´¶ Grid Pmoves
            Set Points          Of iGridID          Item  3 to 1                       // è¶©Ê´û´ò
            Set Points          Of iGridID          Item  5 to Nomisma.Dekadika        // í†£„ £¶§·õ¶™
            Set Numeric_Mask    Of iGridID          Item  5 to 14   Nomisma.Dekadika " ,*"
            Set Points          Of iGridID          Item  6 to Nomisma.Dekadika        // åú´ è¶©Ê (ß®¶ îßò)
            Set Numeric_Mask    Of iGridID          Item  6 to 14   Nomisma.Dekadika " ,*"
            Set Points          Of iGridID          Item  7 to 2                       // è¶©¶©´Ê îèÄ
            Set Points          Of iGridID          Item  8 to Nomisma.Dekadika        // è¶©Ê îèÄ
            Set Numeric_Mask    Of iGridID          Item  8 to 14   Nomisma.Dekadika " ,*"
            Set Points          Of iGridID          Item  9 to Nomisma.Dekadika        // è¢û®‡´‚¶
            Set Numeric_Mask    Of iGridID          Item  9 to 14   Nomisma.Dekadika " ,*"

            // ëú´ò®†©£ò õú°òõ†°È§ ö†ò ´ò ©Á§¶¢ò ´¶¨ ´†£¶¢¶öÂ¶¨
            Set Points Of Totambd                   Item  0 to Nomisma.Dekadika
            Set Points Of Totdiscpc                 Item  0 to Nomisma.Dekadika
            Set Points Of Vatam                     Item  0 to Nomisma.Dekadika
            Set Points Of Extra                     Item  0 to Nomisma.Dekadika
            Set Points Of Payam                     Item  0 to Nomisma.Dekadika
            Set Points Of ProFPA                    Item  0 to Nomisma.Dekadika
            Set Points Of Disc_Vat_Poso             Item  0 to Nomisma.Dekadika
            Set Points Of ExtraVat                  Item  0 to Nomisma.Dekadika
            Set Points Of GenFpa                    Item  0 to Nomisma.Dekadika
            Set Points Of Particle_Isotimia         Item  0 to Nomisma.Dekadika

            Set Points       Of (Pms_PctDisc(ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to 2
            Set Points       Of (Pms_DiscAm (ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to Nomisma.Dekadika
            Set Numeric_Mask Of (Pms_PctDisc(ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of (Pms_DiscAm (ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to 12 Nomisma.Dekadika " ,*"

            Set Points       Of (Ekpt_Epimer (ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to 2
            Set Points       Of (Extra_Epimer(ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to Nomisma.Dekadika
            Set Numeric_Mask Of (Ekpt_Epimer (ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of (Extra_Epimer(ExtraContainer(dbTabPageSubS1(dbTabDialogSubS1(Self))))) Item 0 to 12 Nomisma.Dekadika " ,*"

            Set Numeric_Mask Of Totambd             Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of Totdiscpc           Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of Vatam               Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of Extra               Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of ProFPA              Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of Payam               Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of Disc_Vat_Poso       Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of ExtraVat            Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of GenFpa              Item  0 to 12 Nomisma.Dekadika " ,*"
            Set Numeric_Mask Of Particle_Isotimia   Item  0 to 12 Nomisma.Dekadika " ,*"

            Set Visible_State         Of iGridID to True
            Set Dynamic_Update_State  Of iGridID to True
        End
    End_procedure

    Procedure Show_Seira
        String  sSeira sCompany sBranch sCtypkin sWtypkin sPtyppar sWhat
        Integer iYear ret_val
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Company_Code      to sCompany
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Branch_Code       to sBranch
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Year_Year         to iYear
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Ctypkin_Code      to sCtypkin
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Wtypkin_Code      to sWtypkin
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Ptyppar_Code      to sPtyppar
        Get Field_Current_Value Of PtypPar_DD   Field Ptyppar.Ptyppar_Is_What   to sWhat
        Get Field_Current_Value Of Particle_DD  Field Particle.Pseira_Seira     to sSeira
        Clear Pseira
        Move (Trim(sCompany))   to Pseira.Company_Code
        Move (Trim(sBranch))    to Pseira.Branch_Code
        Move       iYear        to Pseira.Year_Year
        Move (Trim(sCtypkin))   to Pseira.Ctypkin_Code
        Move (Trim(sWtypkin))   to Pseira.Wtypkin_Code
        Move (Trim(sPtyppar))   to Pseira.Ptyppar_Code
        Move (Trim(sSeira))     to Pseira.Pseira_Seira
        Find eq Pseira By Index.1
        If (Found)  Begin
            Send Find_By_Recnum to Pseira_DD Pseira.File_Number Pseira.Recnum
            Set Color Of FormSub1 to clLime
            If ((Trim(sWhat)='2') And (Pseira.Pseira_Autonum=1)) ;
                Set psIsSeiraAutoNum to '1'
            Else Begin
                Set psIsSeiraAutoNum to ''
            End
        End
        Else Begin
            Set Color Of FormSub1 to clRed
            Set psIsSeiraAutoNum to ''
        End
    End_procedure

    Procedure Show_CN
        String  sCode sCompany sBranch sCustprom sCN_Recr
        String sClient_ID sClient_Recr sCN sCNd sCN_Code
        Integer iYear ret_val
        Get Value Of Particle_CN_Code Item 0 to sCode
        Move (Trim(sCode)) to sCode
        If (sCode='') Begin
            Move Particle.CN_Code to sCode
            Move (Trim(sCode)) to sCode
        End
        Clear Cn
        Move sCode to CN.CN_Code
        Find Eq CN By Index.5
        If (Found)  Begin
            Send Find_By_recnum To CN_DD2 CN.File_Number CN.Recnum
            Move CN.CN_Recr     to sCN_Recr
            Set Field_Changed_Value Of Particle_DD  Field Particle.CN_Recr  to sCN_Recr
            Set Color Of FormSub2 to clLime
            Set Value Of CN_CN_Descr Item 0 to CN.CN_Descr
        End
        Else Begin
            Set Color Of FormSub2 to clRed
            Set Value Of CN_CN_Descr Item 0 to ''
        End
    End_procedure



























    //AB-StoreEnd

End_Object    // Particle


//AB-StoreStart




//AB-StoreEnd

//AB/ End_Object    // prj
